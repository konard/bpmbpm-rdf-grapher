<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test ver8a fixes</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π ver8a</h1>
    
    <div class="test-section info">
        <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</h2>
        <button onclick="testBasicFunctions()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</button>
        <div id="basic-results"></div>
    </div>
    
    <div class="test-section info">
        <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–º–µ—Ä–∞</h2>
        <button onclick="testExampleLoading()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏–º–µ—Ä–∞</button>
        <div id="example-results"></div>
    </div>
    
    <div class="test-section info">
        <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏</h2>
        <button onclick="testVisualization()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é</button>
        <div id="viz-results"></div>
    </div>

    <div class="test-section">
        <h2>–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        <p>–û—Ç–∫—Ä–æ–π—Ç–µ <a href="../ver8a/index.html" target="_blank">ver8a/index.html</a> –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</p>
        <ol>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª–µ "–ú–∞–∫—Å. –¥–ª–∏–Ω–∞ VAD:" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ VAD TriG</li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–Ω–æ–ø–∫–∏ "–û—á–∏—Å—Ç–∏—Ç—å", "–¢–µ—Å—Ç", "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫" —Ä–∞–±–æ—Ç–∞—é—Ç</li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–∞–Ω–µ–ª–∏ Smart Design –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ</li>
        </ol>
    </div>

    <script>
        function testBasicFunctions() {
            const results = document.getElementById('basic-results');
            let html = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –±–∞–∑–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:</h3>';
            
            // –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ ver8a —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            const ver8aWindow = window.open('../ver8a/index.html', 'ver8a-test', 'width=800,height=600');
            
            if (!ver8aWindow) {
                html += '<p class="error">–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ ver8a. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω.</p>';
                results.innerHTML = html;
                return;
            }
            
            setTimeout(() => {
                try {
                    const functions = [
                        'visualize',
                        'clearRdfInput', 
                        'saveAsFile',
                        'testRdfValidation',
                        'loadExampleTrigVADv4',
                        'updateModeDescription',
                        'toggleSparqlPanel'
                    ];
                    
                    let allGood = true;
                    html += '<ul>';
                    
                    functions.forEach(funcName => {
                        if (ver8aWindow[funcName] && typeof ver8aWindow[funcName] === 'function') {
                            html += `<li class="success">‚úÖ ${funcName}: –§—É–Ω–∫—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</li>`;
                        } else {
                            html += `<li class="error">‚ùå ${funcName}: –§—É–Ω–∫—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</li>`;
                            allGood = false;
                        }
                    });
                    
                    html += '</ul>';
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
                    const elements = [
                        'rdf-input',
                        'visualization-mode',
                        'sparql-mode', 
                        'max-vad-row-length-group',
                        'smart-design-container',
                        'sparql-panel'
                    ];
                    
                    html += '<h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤:</h4><ul>';
                    elements.forEach(id => {
                        const element = ver8aWindow.document.getElementById(id);
                        if (element) {
                            const isVisible = element.offsetWidth > 0 && element.offsetHeight > 0;
                            const display = ver8aWindow.getComputedStyle(element).display;
                            html += `<li class="success">‚úÖ ${id}: –°—É—â–µ—Å—Ç–≤—É–µ—Ç (display: ${display}, visible: ${isVisible})</li>`;
                        } else {
                            html += `<li class="error">‚ùå ${id}: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</li>`;
                            allGood = false;
                        }
                    });
                    
                    html += '</ul>';
                    
                    if (allGood) {
                        html += '<p class="success">üéâ –í—Å–µ –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ!</p>';
                    }
                    
                    ver8aWindow.close();
                } catch (error) {
                    html += `<p class="error">–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: ${error.message}</p>`;
                }
                
                results.innerHTML = html;
            }, 2000);
        }
        
        function testExampleLoading() {
            const results = document.getElementById('example-results');
            results.innerHTML = '<h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–º–µ—Ä–∞...</h3><p>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –≤ –æ–∫–Ω–µ ver8a –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏.</p>';
        }
        
        function testVisualization() {
            const results = document.getElementById('viz-results');
            results.innerHTML = '<h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:</h3>';
            results.innerHTML += `
                <ol>
                    <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–º–µ—Ä RDF –¥–∞–Ω–Ω—ã—Ö" ‚Üí "Trig VADv4"</li>
                    <li>–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å"</li>
                    <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—è–≤–∏–ª–∞—Å—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞</li>
                    <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª—è "–ú–∞–∫—Å. –¥–ª–∏–Ω–∞ VAD:" –≤–∏–¥–Ω—ã</li>
                    <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–∞–Ω–µ–ª–∏ Smart Design —Ä–∞–±–æ—Ç–∞—é—Ç</li>
                </ol>
                <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.</p>
            `;
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            console.log('Test page loaded. Ready for testing ver8a fixes.');
        });
    </script>
</body>
</html>