# ==============================================================================
# Basic VAD Ontology - Базовая онтология верхнеуровневых процессов
# ==============================================================================
#
# Автор: RDF Grapher Project
# Версия: 1.0
# Дата создания: 2026-01-21
# Проект: https://github.com/bpmbpm/rdf-grapher/tree/main/ver7so/index.html
#
# Описание:
# Данная онтология формализует модель верхнеуровневых бизнес-процессов в нотации
# VAD (Value Added Diagram / Цепочка добавленной стоимости).
# Онтология используется для моделирования процессов, их иерархии, исполнителей
# и связей между ними.
#
# ==============================================================================
# СОГЛАШЕНИЯ ОБ ИМЕНОВАНИИ:
# - Имена классов (подклассов), типов (подтипов): UpperCamelCase (напр. Process)
# - Имена предикатов: lowerCamelCase (напр. hasNext)
# ==============================================================================
#
# СВЯЗЬ С JavaScript-КОДОМ (index.html):
# - Константа VAD_ALLOWED_TYPES: содержит список разрешённых типов объектов
# - Константа VAD_ALLOWED_PREDICATES: содержит список разрешённых предикатов
# - Константа PTREE_PREDICATES: определяет предикаты для хранения в vad:ptree
# ==============================================================================

@prefix rdf:      <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:     <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:      <http://www.w3.org/2002/07/owl#> .
@prefix xsd:      <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms:  <http://purl.org/dc/terms/> .
@prefix vad:      <http://example.org/vad#> .

# ==============================================================================
# МЕТАДАННЫЕ ОНТОЛОГИИ
# ==============================================================================

<http://example.org/vad#>
    a owl:Ontology ;
    rdfs:label "Basic VAD Ontology" ;
    rdfs:comment """
        Базовая онтология верхнеуровневых процессов (Basic VAD Ontology).

        Предназначена для формализации бизнес-процессов в нотации VAD
        (Value Added Diagram / Цепочка добавленной стоимости).

        Ключевые концепции:
        1. Process - ключевой объект, представляющий бизнес-процесс
        2. VADProcessDia - схема процесса (TriG-граф)
        3. ProcessTree - единственный экземпляр дерева процессов (ptree)
        4. ExecutorGroup - группа исполнителей процесса
        5. Executor - конкретный исполнитель

        Альтернативный подход:
        Можно было бы использовать стандартные онтологии для моделирования
        процессов (например, BBO - Business Process Ontology, или BPMN 2.0 Ontology),
        однако данная онтология специально разработана для упрощённой работы
        с верхнеуровневыми процессами в рамках проекта RDF Grapher.
    """ ;
    dcterms:description "Базовая онтология для моделирования верхнеуровневых бизнес-процессов в нотации VAD" ;
    owl:versionInfo "1.0" .

# ==============================================================================
# КЛАССЫ (CLASSES)
# ==============================================================================

# ------------------------------------------------------------------------------
# Класс Process - Процесс
# ------------------------------------------------------------------------------
# Ключевая сущность онтологии. Представляет бизнес-процесс любого уровня.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# Альтернатива: можно было бы унаследовать от стандартного класса
#               (например, bbo:Process), но это усложнило бы интеграцию
# ------------------------------------------------------------------------------

vad:Process
    a rdfs:Class, owl:Class ;
    rdfs:label "Process" ;
    rdfs:comment """
        Процесс (Process) - ключевая сущность онтологии.

        Объекты типа Process имеют две группы свойств:

        1. Группа свойств «Общая для всех схем процессов» (хранится в vad:ptree):
           - rdf:type vad:Process (тип объекта)
           - rdfs:label (название процесса)
           - dcterms:description (описание процесса)
           - vad:hasTrig (ссылка на TriG-схему детализации, при наличии)

           Связь с JS-кодом: эти предикаты определены в константе PTREE_PREDICATES

        2. Группа свойств «Индивидуальная для конкретной схемы процесса»
           (хранится в соответствующем TriG типа VADProcessDia):
           - vad:hasExecutor (исполнитель/группа исполнителей процесса)
           - vad:processSubtype (подтип процесса: Basic или Detailed)
           - vad:hasNext (следующий процесс в цепочке)
    """ ;
    dcterms:description "Бизнес-процесс в цепочке добавленной стоимости" .

# ------------------------------------------------------------------------------
# Класс VADProcessDia - Схема процесса (TriG-граф)
# ------------------------------------------------------------------------------
# Формализует схему процесса как именованный граф (TriG).
# Название: dia = diagram (диаграмма/схема)
#
# Альтернатива: можно было бы использовать owl:NamedIndividual, но TriG
#               естественным образом представляется через именованные графы
# ------------------------------------------------------------------------------

vad:VADProcessDia
    a rdfs:Class, owl:Class ;
    rdfs:label "VADProcessDia" ;
    rdfs:comment """
        Схема процесса (VADProcessDia) - именованный граф TriG,
        представляющий конкретную схему процесса в нотации VAD.

        Каждая схема процесса содержит:
        - Список процессов, отображаемых на схеме
        - Связи между процессами (vad:hasNext)
        - Привязку исполнителей (vad:hasExecutor)
        - Группы исполнителей и их членов

        При построении схемы процесса используется информация из двух источников:
        1. Текущий TriG (VADProcessDia) - индивидуальные свойства процессов
        2. vad:ptree - общие свойства всех процессов (метаданные)

        Структурные свойства TriG:
        - rdfs:label - название схемы
        - vad:hasParent - родительский TriG (для построения иерархии)
    """ ;
    dcterms:description "Схема процесса, представленная как именованный граф TriG" .

# ------------------------------------------------------------------------------
# Класс ProcessTree - Дерево процессов
# ------------------------------------------------------------------------------
# Единственный экземпляр данного класса - vad:ptree.
# Содержит общие метаданные всех процессов.
#
# Связь с JS-кодом: используется при фильтрации предикатов в режиме vad:ptree
# ------------------------------------------------------------------------------

vad:ProcessTree
    a rdfs:Class, owl:Class ;
    rdfs:label "ProcessTree" ;
    rdfs:comment """
        Дерево процессов (ProcessTree) - специальный класс,
        имеющий единственный экземпляр vad:ptree.

        vad:ptree является центральным хранилищем метаданных всех процессов.
        Содержит группу свойств «Общая для всех схем процессов» для каждого
        объекта типа vad:Process:
        - rdf:type vad:Process
        - rdfs:label (название)
        - dcterms:description (описание)
        - vad:hasTrig (ссылка на детализирующую схему)

        Структурные свойства самого vad:ptree:
        - rdfs:label "Дерево Процессов (TriG)"
        - vad:hasParent vad:root

        После структурных свойств vad:ptree следует перечень всех объектов
        типа Process с их общими свойствами.

        Связь с JS-кодом: предикаты определены в константе PTREE_PREDICATES
    """ ;
    dcterms:description "Дерево процессов, хранящее общие метаданные всех процессов" .

# ------------------------------------------------------------------------------
# Класс ExecutorGroup - Группа исполнителей
# ------------------------------------------------------------------------------
# Технический класс для группировки исполнителей процесса.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:ExecutorGroup
    a rdfs:Class, owl:Class ;
    rdfs:label "ExecutorGroup" ;
    rdfs:comment """
        Группа исполнителей (ExecutorGroup) - технический класс,
        предназначенный для группировки исполнителей конкретного процесса.

        Каждая группа исполнителей:
        - Принадлежит конкретному процессу (связь через vad:hasExecutor)
        - Содержит одного или нескольких исполнителей (vad:includes)
        - Имеет название (rdfs:label)

        Примечание: ExecutorGroup является индивидуальным для каждой схемы процесса
        и хранится в соответствующем TriG (VADProcessDia), а не в vad:ptree.

        Альтернатива: можно было бы использовать rdf:Bag или rdf:Seq,
        но ExecutorGroup даёт более явную семантику в контексте VAD.
    """ ;
    dcterms:description "Группа исполнителей процесса" .

# ------------------------------------------------------------------------------
# Класс Executor - Исполнитель
# ------------------------------------------------------------------------------
# Представляет конкретного исполнителя (роль, должность, подразделение и т.д.)
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:Executor
    a rdfs:Class, owl:Class ;
    rdfs:label "Executor" ;
    rdfs:comment """
        Исполнитель (Executor) - конкретный участник процесса.

        Может представлять:
        - Роль (например, "Менеджер проекта")
        - Должность (например, "Главный бухгалтер")
        - Подразделение (например, "Отдел продаж")
        - Внешнего участника (например, "Клиент")

        Свойства:
        - rdf:type vad:Executor
        - rdfs:label (название исполнителя)

        Исполнители могут входить в несколько групп исполнителей,
        что позволяет моделировать участие одного исполнителя
        в нескольких процессах.

        Альтернатива: можно было бы использовать foaf:Agent, но это добавило бы
        ненужную зависимость от внешней онтологии для данного контекста.
    """ ;
    dcterms:description "Исполнитель (роль, подразделение или должность)" .

# ==============================================================================
# ПОДТИПЫ ПРОЦЕССОВ (PROCESS SUBTYPES)
# ==============================================================================

# ------------------------------------------------------------------------------
# Basic - Базовый процесс
# ------------------------------------------------------------------------------
# Процесс без детализации (не имеет дочерней схемы)
# ------------------------------------------------------------------------------

vad:Basic
    a rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:Process ;
    rdfs:label "Basic" ;
    rdfs:comment """
        Базовый процесс (Basic) - процесс без детализации.

        Не имеет связанной дочерней схемы процесса (vad:hasTrig).
        Является "листовым" элементом в иерархии процессов.

        Используется через предикат vad:processSubtype:
        vad:SomeProcess vad:processSubtype vad:Basic .
    """ ;
    dcterms:description "Базовый (нетедализируемый) процесс" .

# ------------------------------------------------------------------------------
# Detailed - Детализированный процесс
# ------------------------------------------------------------------------------
# Процесс с детализацией (имеет дочернюю схему через vad:hasTrig)
# ------------------------------------------------------------------------------

vad:Detailed
    a rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:Process ;
    rdfs:label "Detailed" ;
    rdfs:comment """
        Детализированный процесс (Detailed) - процесс с детализацией.

        Имеет связанную дочернюю схему процесса через предикат vad:hasTrig
        в vad:ptree. При двойном клике на такой процесс происходит переход
        к его детализирующей схеме.

        Используется через предикат vad:processSubtype:
        vad:SomeProcess vad:processSubtype vad:Detailed .

        В vad:ptree для такого процесса указывается:
        vad:SomeProcess vad:hasTrig vad:t_SomeProcess .
    """ ;
    dcterms:description "Детализированный процесс (имеет дочернюю схему)" .

# ==============================================================================
# ТЕХНИЧЕСКИЕ ЭКЗЕМПЛЯРЫ (TECHNICAL INSTANCES)
# ==============================================================================

# ------------------------------------------------------------------------------
# vad:ptree - Единственный экземпляр ProcessTree
# ------------------------------------------------------------------------------
# Центральное хранилище метаданных всех процессов
# ------------------------------------------------------------------------------

vad:ptree
    a vad:ProcessTree ;
    rdfs:label "Process Tree (ptree)" ;
    rdfs:comment """
        Дерево процессов (ptree) - единственный экземпляр класса ProcessTree.

        Является именованным графом (TriG), содержащим:
        1. Собственные свойства (rdfs:label, vad:hasParent)
        2. Общие свойства всех объектов типа vad:Process

        Связь с JS-кодом: используется для определения целевого графа
        при добавлении триплетов (функция determineTargetGraph)
    """ ;
    dcterms:description "Единственный экземпляр дерева процессов" .

# ------------------------------------------------------------------------------
# vad:root - Технический корневой узел
# ------------------------------------------------------------------------------
# Невидимый корень дерева TriG графов
# ------------------------------------------------------------------------------

vad:root
    a rdfs:Resource ;
    rdfs:label "Root (технический узел)" ;
    rdfs:comment """
        Корневой технический узел (root) - образует корень дерева всех TriG
        при формировании иерархии в Окне «Дерево TriG».

        Узел root в дереве не отображается - он служит только для
        определения верхнего уровня иерархии.

        Использование:
        vad:ptree vad:hasParent vad:root .
        vad:t_pGA vad:hasParent vad:root .
    """ ;
    dcterms:description "Технический корневой узел дерева TriG графов" .

# ==============================================================================
# СВОЙСТВА (PROPERTIES)
# ==============================================================================

# ==============================================================================
# ГРУППА СВОЙСТВ «ОБЩАЯ ДЛЯ ВСЕХ СХЕМ ПРОЦЕССОВ» (PTREE_PREDICATES)
# ==============================================================================
# Эти предикаты хранятся в vad:ptree для объектов типа vad:Process
# Связь с JS-кодом: константа PTREE_PREDICATES
# ==============================================================================

# Примечание: rdf:type, rdfs:label, dcterms:description - стандартные предикаты,
# определённые в соответствующих пространствах имён

# ------------------------------------------------------------------------------
# vad:hasTrig - Ссылка на детализирующую схему
# ------------------------------------------------------------------------------
# Входит в PTREE_PREDICATES
# ------------------------------------------------------------------------------

vad:hasTrig
    a rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasTrig" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:VADProcessDia ;
    rdfs:comment """
        Предикат hasTrig связывает процесс с его детализирующей схемой (TriG).

        Используется для процессов с подтипом vad:Detailed.
        Хранится в vad:ptree (входит в группу PTREE_PREDICATES).

        Пример:
        vad:p1 vad:hasTrig vad:t_p1 .

        Здесь процесс p1 детализирован в схеме t_p1.

        Связь с JS-кодом: входит в константу PTREE_PREDICATES
    """ ;
    dcterms:description "Связывает процесс с его детализирующей схемой TriG" .

# ==============================================================================
# ГРУППА СВОЙСТВ «ИНДИВИДУАЛЬНАЯ ДЛЯ КОНКРЕТНОЙ СХЕМЫ ПРОЦЕССА»
# ==============================================================================
# Эти предикаты хранятся в соответствующем TriG (VADProcessDia)
# Связь с JS-кодом: входят в VAD_ALLOWED_PREDICATES, но НЕ в PTREE_PREDICATES
# ==============================================================================

# ------------------------------------------------------------------------------
# vad:hasNext - Следующий процесс
# ------------------------------------------------------------------------------
# Определяет последовательность процессов в цепочке VAD
# ------------------------------------------------------------------------------

vad:hasNext
    a rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasNext" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:Process ;
    rdfs:comment """
        Предикат hasNext определяет следующий процесс в цепочке VAD.

        Используется для построения последовательной цепочки процессов
        на схеме. Процесс может иметь несколько следующих процессов
        (ветвление цепочки).

        Пример:
        vad:Process1 vad:hasNext vad:Process2 .
        vad:Process2 vad:hasNext vad:Process3, vad:Process4 .  # ветвление

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Определяет следующий процесс в цепочке добавленной стоимости" .

# ------------------------------------------------------------------------------
# vad:hasExecutor - Исполнитель процесса
# ------------------------------------------------------------------------------
# Связывает процесс с группой исполнителей
# ------------------------------------------------------------------------------

vad:hasExecutor
    a rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasExecutor" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:ExecutorGroup ;
    rdfs:comment """
        Предикат hasExecutor связывает процесс с группой исполнителей.

        Каждый процесс на схеме имеет одну группу исполнителей,
        которая содержит одного или нескольких конкретных исполнителей.

        Пример:
        vad:Process1 vad:hasExecutor vad:ExecutorGroup1 .

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Связывает процесс с группой исполнителей" .

# ------------------------------------------------------------------------------
# vad:processSubtype - Подтип процесса
# ------------------------------------------------------------------------------
# Указывает подтип процесса (Basic или Detailed)
# ------------------------------------------------------------------------------

vad:processSubtype
    a rdf:Property, owl:ObjectProperty ;
    rdfs:label "processSubtype" ;
    rdfs:domain vad:Process ;
    rdfs:range [ owl:oneOf ( vad:Basic vad:Detailed ) ] ;
    rdfs:comment """
        Предикат processSubtype указывает подтип процесса.

        Возможные значения:
        - vad:Basic - базовый процесс (без детализации)
        - vad:Detailed - детализированный процесс (имеет дочернюю схему)

        Пример:
        vad:Process1 vad:processSubtype vad:Detailed .
        vad:Process2 vad:processSubtype vad:Basic .

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Указывает подтип процесса (Basic или Detailed)" .

# ------------------------------------------------------------------------------
# vad:hasParent - Родительский TriG
# ------------------------------------------------------------------------------
# Определяет иерархию TriG графов
# ------------------------------------------------------------------------------

vad:hasParent
    a rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasParent" ;
    rdfs:domain [ owl:unionOf ( vad:VADProcessDia vad:ProcessTree ) ] ;
    rdfs:range [ owl:unionOf ( vad:VADProcessDia rdfs:Resource ) ] ;
    rdfs:comment """
        Предикат hasParent определяет родительский TriG граф.

        Используется для построения иерархии TriG графов в Окне «Дерево TriG».

        Корневые графы имеют hasParent = vad:root:
        vad:ptree vad:hasParent vad:root .
        vad:t_pGA vad:hasParent vad:root .

        Дочерние графы указывают на родительский:
        vad:t_p1 vad:hasParent vad:t_pGA .

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Определяет родительский TriG граф для построения иерархии" .

# ------------------------------------------------------------------------------
# vad:includes - Включает исполнителя
# ------------------------------------------------------------------------------
# Связывает группу исполнителей с конкретными исполнителями
# ------------------------------------------------------------------------------

vad:includes
    a rdf:Property, owl:ObjectProperty ;
    rdfs:label "includes" ;
    rdfs:domain vad:ExecutorGroup ;
    rdfs:range vad:Executor ;
    rdfs:comment """
        Предикат includes связывает группу исполнителей с конкретными исполнителями.

        Одна группа может включать нескольких исполнителей,
        один исполнитель может входить в несколько групп.

        Пример:
        vad:ExecutorGroup1 vad:includes vad:Executor1 .
        vad:ExecutorGroup2 vad:includes vad:Executor1, vad:Executor2 .

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Связывает группу исполнителей с конкретными исполнителями" .

# ==============================================================================
# ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ (USAGE EXAMPLES)
# ==============================================================================
# Ниже приведены примеры на основе exampleTrigVADv2 из index.html
# Эти примеры закомментированы, чтобы не загрязнять онтологию данными
# ==============================================================================

# Пример определения процесса в vad:ptree:
#
# vad:ptree {
#     vad:p1 rdf:type vad:Process ;
#         rdfs:label "p1 Процесс 1" ;
#         dcterms:description "Первый процесс в цепочке добавленной стоимости" ;
#         vad:hasTrig vad:t_p1 .
# }

# Пример определения процесса в VADProcessDia (vad:t_pGA):
#
# vad:t_pGA {
#     vad:t_pGA rdfs:label "Схема процесса t_pGA" ;
#         vad:hasParent vad:root .
#
#     vad:p1 vad:hasExecutor vad:ExecutorGroup1 ;
#         vad:processSubtype vad:Detailed ;
#         vad:hasNext vad:Process2 .
#
#     vad:ExecutorGroup1 rdf:type vad:ExecutorGroup ;
#         rdfs:label "Группа исполнителей процесса Процесс 1" ;
#         vad:includes vad:Executor1 .
#
#     vad:Executor1 rdf:type vad:Executor ;
#         rdfs:label "Исполнитель 1" .
# }

# ==============================================================================
# КОНЕЦ ОНТОЛОГИИ
# ==============================================================================
