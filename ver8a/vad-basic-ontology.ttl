# ==============================================================================
# Basic VAD Ontology - Базовая онтология верхнеуровневых процессов
# ==============================================================================
#
# Автор: RDF Grapher Project
# Версия: 1.1
# Дата создания: 2026-01-21
# Дата обновления: 2026-01-24
# Проект: https://github.com/bpmbpm/rdf-grapher/tree/main/ver8/index.html
#
# Описание:
# Данная онтология формализует модель верхнеуровневых бизнес-процессов в нотации
# VAD (Value Added Diagram / Цепочка добавленной стоимости).
# Онтология используется для моделирования процессов, их иерархии, исполнителей
# и связей между ними.
#
# СВЯЗАННЫЕ ФАЙЛЫ:
# - vad-basic-ontology_tech_Appendix.ttl - технологические классы и объекты
#   (загружается при старте index.html для формирования справочников)
#
# ==============================================================================
# СОГЛАШЕНИЯ ОБ ИМЕНОВАНИИ:
# - Имена классов (подклассов), типов (подтипов): UpperCamelCase (напр. Process)
# - Имена предикатов: lowerCamelCase (напр. hasNext)
# ==============================================================================
#
# СВЯЗЬ С JavaScript-КОДОМ (index.html):
# - Константа VAD_ALLOWED_TYPES: содержит список разрешённых типов объектов
# - Константа VAD_ALLOWED_PREDICATES: содержит список разрешённых предикатов
# - Константа PTREE_PREDICATES: определяет предикаты для хранения в vad:ptree
# ==============================================================================

@prefix rdf:      <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:     <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:      <http://www.w3.org/2002/07/owl#> .
@prefix xsd:      <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms:  <http://purl.org/dc/terms/> .
@prefix vad:      <http://example.org/vad#> .

# ==============================================================================
# МЕТАДАННЫЕ ОНТОЛОГИИ
# ==============================================================================

<http://example.org/vad#>
    rdf:type owl:Ontology ;
    rdfs:label "Basic VAD Ontology" ;
    rdfs:comment """
        Базовая онтология верхнеуровневых процессов (Basic VAD Ontology).

        Предназначена для формализации бизнес-процессов в нотации VAD
        (Value Added Diagram / Цепочка добавленной стоимости).

        Ключевые концепции:
        1. Process - ключевой объект, представляющий бизнес-процесс
        2. VADProcessDia - схема процесса (TriG-граф)
        3. ProcessTree - единственный экземпляр дерева процессов (ptree)
        4. ExecutorGroup - группа исполнителей процесса
        5. Executor - конкретный исполнитель

        Технологические объекты (Tech) вынесены в отдельный файл:
        vad-basic-ontology_tech_Appendix.ttl

        Альтернативный подход:
        Можно было бы использовать стандартные онтологии для моделирования
        процессов (например, BBO - Business Process Ontology, или BPMN 2.0 Ontology),
        однако данная онтология специально разработана для упрощённой работы
        с верхнеуровневыми процессами в рамках проекта RDF Grapher.
    """ ;
    dcterms:description "Базовая онтология для моделирования верхнеуровневых бизнес-процессов в нотации VAD" ;
    owl:versionInfo "1.1" .

# ==============================================================================
# КЛЮЧЕВЫЕ ПРАВИЛА (KEY RULES)
# ==============================================================================
# Правила использования окна Smart Design и добавления данных
# ==============================================================================

# Правило 1: Добавление триплетов только в TriG
# Добавлять триплеты мы можем только в какой-либо TriG, поэтому в окне
# Smart Design в поле TriG: нужно выбрать конкретный TriG.
# Кнопка «New TriG (VADProcessDia)» позволяет добавлять только TriG типа
# VADProcessDia. Другие типы TriG (vad:ptree, vad:rtree) не добавляются
# через окно Smart Design.

# Правило 2: Свойства процесса разделены на две группы
# a) Свойства концепта (хранятся в vad:ptree):
#    rdf:type, rdfs:label, dcterms:description, vad:hasTrig
# b) Индивидуальные свойства (хранятся в VADProcessDia):
#    vad:isSubprocessTrig, vad:hasExecutor, vad:processSubtype, vad:hasNext

# Правило 3: Автоматическое создание связанных объектов
# При создании нового индивида процесса (TypeProcess) автоматически создаются:
# - vad:isSubprocessTrig - связь с текущим TriG
# - vad:hasExecutor - ссылка на автоматически создаваемую ExecutorGroup

# Правило 4: Исполнители определяются разово в vad:rtree
# Все свойства исполнителя (rdf:type, rdfs:label) определяются разово
# в vad:rtree, а не дублируются в каждой схеме процесса.

# Правило 5: Группы исполнителей создаются автоматически
# При создании нового индивида процесса автоматически создается
# ExecutorGroup с уникальным id (vad:ExecutorGroup_{processId}).

# Правило 6: Новый TriG создается на основе концепта процесса
# ID нового TriG формируется автоматически как t_{processId},
# а rdfs:label - на основе label концепта процесса.

# ==============================================================================
# КЛАССЫ (CLASSES)
# ==============================================================================

# ------------------------------------------------------------------------------
# Класс Process - Процесс
# ------------------------------------------------------------------------------
# Ключевая сущность онтологии. Представляет бизнес-процесс любого уровня.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# Альтернатива: можно было бы унаследовать от стандартного класса
#               (например, bbo:Process), но это усложнило бы интеграцию
# ------------------------------------------------------------------------------

vad:Process
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "Process" ;
    rdfs:comment """
        Процесс (Process) - ключевая сущность онтологии.

        Объекты типа Process имеют две группы свойств:

        1. Группа свойств «Общая для всех схем процессов» (хранится в vad:ptree):
           - rdf:type vad:Process (тип объекта)
           - rdfs:label (название процесса)
           - dcterms:description (описание процесса)
           - vad:hasTrig (ссылка на TriG-схему детализации, при наличии)

           Связь с JS-кодом: эти предикаты определены в константе PTREE_PREDICATES

        2. Группа свойств «Индивидуальная для конкретной схемы процесса»
           (хранится в соответствующем TriG типа VADProcessDia):
           - vad:isSubprocessTrig (ссылка на содержащий TriG, добавляется первым!)
           - vad:hasExecutor (исполнитель/группа исполнителей процесса)
           - vad:processSubtype (подтип процесса: Basic или Detailed)
           - vad:hasNext (следующий процесс в цепочке)
    """ ;
    dcterms:description "Бизнес-процесс в цепочке добавленной стоимости" .

# ------------------------------------------------------------------------------
# Класс TypeProcess - Синоним класса Process
# ------------------------------------------------------------------------------
# TypeProcess используется в JavaScript-коде как псевдоним для vad:Process.
# Это позволяет использовать единое имя типа для всех процессов,
# включая подтипы Basic, Detailed, DetailedChild, DetailedExternal.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:TypeProcess
    rdf:type rdfs:Class, owl:Class ;
    owl:equivalentClass vad:Process ;
    rdfs:label "TypeProcess" ;
    rdfs:comment """
        TypeProcess - синоним (эквивалентный класс) для vad:Process.

        Используется в JavaScript-коде для унификации типов объектов.
        Включает все подтипы процессов (вычисляемые автоматически):

        Detailed (имеет vad:hasTrig):
        - vad:DetailedChild - детализированный подпроцесс
        - vad:DetailedExternal - детализированный внешний процесс

        notDetailed (НЕ имеет vad:hasTrig):
        - vad:notDetailedChild - недетализированный подпроцесс
        - vad:notDetailedExternal - недетализированный внешний процесс
        - vad:NotDefinedType - тип не определен

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Синоним класса Process для использования в JavaScript-коде" .

# ------------------------------------------------------------------------------
# Класс TriG - Базовый класс для всех типов TriG-графов
# ------------------------------------------------------------------------------
# Базовый класс, объединяющий все типы TriG-графов, используемых в проекте.
# Подклассы: VADProcessDia, ProcessTree, ExecutorTree
#
# Связь с JS-кодом: используется для определения списка всех типов TriG в проекте
# ------------------------------------------------------------------------------

vad:TriG
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "TriG" ;
    rdfs:comment """
        Базовый класс TriG (TriG) - объединяет все типы TriG-графов в проекте.

        Подклассы:
        - vad:VADProcessDia - схема процесса в нотации VAD
        - vad:ProcessTree - дерево процессов (единственный экземпляр vad:ptree)
        - vad:ExecutorTree - дерево исполнителей (единственный экземпляр vad:rtree)

        Данный класс позволяет:
        - Получить список всех типов TriG, используемых в проекте
        - Определить общие свойства для всех TriG-графов
        - Организовать иерархию классов для лучшей структуризации
    """ ;
    dcterms:description "Базовый класс для всех типов TriG-графов (именованных графов)" .

# ------------------------------------------------------------------------------
# Класс VADProcessDia - Схема процесса (TriG-граф)
# ------------------------------------------------------------------------------
# Формализует схему процесса как именованный граф (TriG).
# Название: dia = diagram (диаграмма/схема)
#
# Альтернатива: можно было бы использовать owl:NamedIndividual, но TriG
#               естественным образом представляется через именованные графы
# ------------------------------------------------------------------------------

vad:VADProcessDia
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:TriG ;
    rdfs:label "VADProcessDia" ;
    rdfs:comment """
        Схема процесса (VADProcessDia) - именованный граф TriG,
        представляющий конкретную схему процесса в нотации VAD.

        Каждая схема процесса содержит:
        - Список процессов, отображаемых на схеме
        - Связи между процессами (vad:hasNext)
        - Привязку исполнителей (vad:hasExecutor)
        - Группы исполнителей и их членов

        При построении схемы процесса используется информация из двух источников:
        1. Текущий TriG (VADProcessDia) - индивидуальные свойства процессов
        2. vad:ptree - общие свойства всех процессов (метаданные)

        Структурные свойства TriG:
        - rdfs:label - название схемы
        - vad:hasParentTrig - родительский TriG (для построения иерархии)
    """ ;
    dcterms:description "Схема процесса, представленная как именованный граф TriG" .

# ------------------------------------------------------------------------------
# Класс ProcessTree - Дерево процессов
# ------------------------------------------------------------------------------
# Единственный экземпляр данного класса - vad:ptree.
# Содержит общие метаданные всех процессов.
#
# Связь с JS-кодом: используется при фильтрации предикатов в режиме vad:ptree
# ------------------------------------------------------------------------------

vad:ProcessTree
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:TriG ;
    rdfs:label "ProcessTree" ;
    rdfs:comment """
        Дерево процессов (ProcessTree) - специальный класс,
        имеющий единственный экземпляр vad:ptree.

        vad:ptree является центральным хранилищем метаданных всех процессов.
        Содержит группу свойств «Общая для всех схем процессов» для каждого
        объекта типа vad:Process:
        - rdf:type vad:Process
        - rdfs:label (название)
        - dcterms:description (описание)
        - vad:hasTrig (ссылка на детализирующую схему)

        Структурные свойства самого vad:ptree:
        - rdfs:label "Дерево Процессов (TriG)"
        - vad:hasParentTrig vad:root

        После структурных свойств vad:ptree следует перечень всех объектов
        типа Process с их общими свойствами.

        Связь с JS-кодом: предикаты определены в константе PTREE_PREDICATES
    """ ;
    dcterms:description "Дерево процессов, хранящее общие метаданные всех процессов" .

# ------------------------------------------------------------------------------
# Класс ExecutorGroup - Группа исполнителей
# ------------------------------------------------------------------------------
# Технический класс для группировки исполнителей процесса.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:ExecutorGroup
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "ExecutorGroup" ;
    rdfs:comment """
        Группа исполнителей (ExecutorGroup) - технический класс,
        предназначенный для группировки исполнителей конкретного процесса.

        Каждая группа исполнителей:
        - Принадлежит конкретному процессу (связь через vad:hasExecutor)
        - Содержит одного или нескольких исполнителей (vad:includes)
        - Имеет название (rdfs:label)

        Примечание: ExecutorGroup является индивидуальным для каждой схемы процесса
        и хранится в соответствующем TriG (VADProcessDia), а не в vad:ptree.

        Альтернатива: можно было бы использовать rdf:Bag или rdf:Seq,
        но ExecutorGroup даёт более явную семантику в контексте VAD.
    """ ;
    dcterms:description "Группа исполнителей процесса" .

# ------------------------------------------------------------------------------
# Класс Executor - Исполнитель
# ------------------------------------------------------------------------------
# Представляет конкретного исполнителя (роль, должность, подразделение и т.д.)
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:Executor
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "Executor" ;
    rdfs:comment """
        Исполнитель (Executor) - конкретный участник процесса.

        Может представлять:
        - Роль (например, "Менеджер проекта")
        - Должность (например, "Главный бухгалтер")
        - Подразделение (например, "Отдел продаж")
        - Внешнего участника (например, "Клиент")

        Свойства (хранятся в vad:rtree):
        - rdf:type vad:Executor
        - rdfs:label (название исполнителя)

        Исполнители могут входить в несколько групп исполнителей,
        что позволяет моделировать участие одного исполнителя
        в нескольких процессах.

        Альтернатива: можно было бы использовать foaf:Agent, но это добавило бы
        ненужную зависимость от внешней онтологии для данного контекста.
    """ ;
    dcterms:description "Исполнитель (роль, подразделение или должность)" .

# ------------------------------------------------------------------------------
# Класс TypeExecutor - Синоним класса Executor
# ------------------------------------------------------------------------------
# TypeExecutor используется в JavaScript-коде как псевдоним для vad:Executor.
# Это позволяет использовать единое имя типа для всех исполнителей.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:TypeExecutor
    rdf:type rdfs:Class, owl:Class ;
    owl:equivalentClass vad:Executor ;
    rdfs:label "TypeExecutor" ;
    rdfs:comment """
        TypeExecutor - синоним (эквивалентный класс) для vad:Executor.

        Используется в JavaScript-коде для унификации типов объектов.
        Представляет исполнителей всех видов (роли, должности, подразделения).

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Синоним класса Executor для использования в JavaScript-коде" .

# ------------------------------------------------------------------------------
# Класс ExecutorTree - Дерево исполнителей
# ------------------------------------------------------------------------------
# Аналогично ProcessTree - единственный экземпляр данного класса - vad:rtree
# Содержит общие метаданные всех исполнителей (r=Role).
#
# Связь с JS-кодом: используется при фильтрации предикатов в режиме vad:rtree
# ------------------------------------------------------------------------------

vad:ExecutorTree
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:TriG ;
    rdfs:label "ExecutorTree" ;
    rdfs:comment """
        Дерево исполнителей (ExecutorTree) - специальный класс,
        имеющий единственный экземпляр vad:rtree (r=Role).

        vad:rtree является центральным хранилищем метаданных всех исполнителей.
        Содержит группу свойств «Общая для всех схем процессов» для каждого
        объекта типа vad:Executor:
        - rdf:type vad:Executor
        - rdfs:label (название исполнителя)

        Структурные свойства самого vad:rtree:
        - rdfs:label "Дерево Исполнителей (TriG)"
        - vad:hasParentTrig vad:root

        Таким образом, все свойства исполнителя перечисляются не в схеме
        процесса (VADProcessDia), а разово в vad:rtree.

        При отрисовке схемы процесса используется информация как из vad:ptree
        (для процессов), так и из vad:rtree (для исполнителей).

        Связь с JS-кодом: предикаты определены в константе RTREE_PREDICATES
    """ ;
    dcterms:description "Дерево исполнителей, хранящее общие метаданные всех исполнителей" .

# ==============================================================================
# ПОДТИПЫ ПРОЦЕССОВ (PROCESS SUBTYPES)
# ==============================================================================
# Подтипы процессов определены в файле vad-basic-ontology_tech_Appendix.ttl
#
# Они вычисляются автоматически в virtualRDFdata на основе анализа данных:
#
# Detailed (процесс имеет vad:hasTrig):
#   - vad:DetailedChild - дочерняя схема имеет hasParentTrig на текущую схему
#   - vad:DetailedExternal - дочерняя схема НЕ имеет hasParentTrig на текущую
#
# notDetailed (процесс НЕ имеет vad:hasTrig):
#   - vad:notDetailedChild - hasParentProcess совпадает с текущим процессом
#   - vad:notDetailedExternal - hasParentProcess НЕ совпадает
#   - vad:NotDefinedType - hasParentProcess = NotDefined
#
# Визуализация (цвета):
#   - DetailedChild: голубая (#90CAF9)
#   - DetailedExternal: оранжевая (#FFB74D)
#   - notDetailedChild: зеленая (#A5D6A7)
#   - notDetailedExternal: серая (#E0E0E0)
#   - NotDefinedType: красноватая (#FFCDD2)
#
# См. vad-basic-ontology_tech_Appendix.ttl для полного описания подтипов.
# ==============================================================================

# ==============================================================================
# ТЕХНИЧЕСКИЕ ЭКЗЕМПЛЯРЫ (TECHNICAL INSTANCES)
# ==============================================================================

# ------------------------------------------------------------------------------
# vad:ptree - Единственный экземпляр ProcessTree
# ------------------------------------------------------------------------------
# Центральное хранилище метаданных всех процессов
# ------------------------------------------------------------------------------

vad:ptree
    rdf:type vad:ProcessTree ;
    rdfs:label "Process Tree (ptree)" ;
    rdfs:comment """
        Дерево процессов (ptree) - единственный экземпляр класса ProcessTree.

        Является именованным графом (TriG), содержащим:
        1. Собственные свойства (rdfs:label, vad:hasParentTrig)
        2. Общие свойства всех объектов типа vad:Process

        Связь с JS-кодом: используется для определения целевого графа
        при добавлении триплетов (функция determineTargetGraph)
    """ ;
    dcterms:description "Единственный экземпляр дерева процессов" .

# ------------------------------------------------------------------------------
# vad:rtree - Единственный экземпляр ExecutorTree
# ------------------------------------------------------------------------------
# Центральное хранилище метаданных всех исполнителей (r=Role)
# ------------------------------------------------------------------------------

vad:rtree
    rdf:type vad:ExecutorTree ;
    rdfs:label "Executor Tree (rtree)" ;
    rdfs:comment """
        Дерево исполнителей (rtree) - единственный экземпляр класса ExecutorTree.

        Является именованным графом (TriG), содержащим:
        1. Собственные свойства (rdfs:label, vad:hasParentTrig)
        2. Общие свойства всех объектов типа vad:Executor

        При отрисовке схемы процесса используется информация как из vad:ptree
        (для процессов), так и из vad:rtree (для исполнителей).

        Связь с JS-кодом: используется для определения целевого графа
        при добавлении триплетов (функция determineTargetGraph)
    """ ;
    dcterms:description "Единственный экземпляр дерева исполнителей" .

# ------------------------------------------------------------------------------
# vad:root - Технический корневой узел
# ------------------------------------------------------------------------------
# Невидимый корень дерева TriG графов
# ------------------------------------------------------------------------------

vad:root
    rdf:type rdfs:Resource ;
    rdfs:label "Root (технический узел)" ;
    rdfs:comment """
        Корневой технический узел (root) - образует корень дерева всех TriG
        при формировании иерархии в Окне «Дерево TriG».

        Узел root в дереве не отображается - он служит только для
        определения верхнего уровня иерархии.

        Использование:
        vad:ptree vad:hasParentTrig vad:root .
        vad:rtree vad:hasParentTrig vad:root .
        vad:t_pGA vad:hasParentTrig vad:root .
    """ ;
    dcterms:description "Технический корневой узел дерева TriG графов" .

# ==============================================================================
# СВОЙСТВА (PROPERTIES)
# ==============================================================================

# ==============================================================================
# ГРУППА СВОЙСТВ «ОБЩАЯ ДЛЯ ВСЕХ СХЕМ ПРОЦЕССОВ» (PTREE_PREDICATES)
# ==============================================================================
# Эти предикаты хранятся в vad:ptree для объектов типа vad:Process
# Связь с JS-кодом: константа PTREE_PREDICATES
# ==============================================================================

# Примечание: rdf:type, rdfs:label, dcterms:description - стандартные предикаты,
# определённые в соответствующих пространствах имён

# ------------------------------------------------------------------------------
# vad:hasTrig - Ссылка на детализирующую схему
# ------------------------------------------------------------------------------
# Входит в PTREE_PREDICATES
# ------------------------------------------------------------------------------

vad:hasTrig
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasTrig" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:VADProcessDia ;
    rdfs:comment """
        Предикат hasTrig связывает процесс с его детализирующей схемой (TriG).

        Используется для процессов с подтипом vad:Detailed.
        Хранится в vad:ptree (входит в группу PTREE_PREDICATES).

        Пример:
        vad:p1 vad:hasTrig vad:t_p1 .

        Здесь процесс p1 детализирован в схеме t_p1.

        Связь с JS-кодом: входит в константу PTREE_PREDICATES
    """ ;
    dcterms:description "Связывает процесс с его детализирующей схемой TriG" .

# ------------------------------------------------------------------------------
# vad:hasParentProcess - Родительский процесс
# ------------------------------------------------------------------------------
# Входит в PTREE_PREDICATES
# ВАЖНО: vad:hasTrig и vad:hasParentProcess - взаимоисключающие предикаты
# ------------------------------------------------------------------------------

vad:hasParentProcess
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasParentProcess" ;
    rdfs:domain vad:Process ;
    rdfs:range [ owl:unionOf ( vad:Process rdfs:Resource ) ] ;
    rdfs:comment """
        Предикат hasParentProcess указывает родительский процесс
        для процессов, которые НЕ имеют собственной схемы детализации.

        ВАЖНОЕ ПРАВИЛО:
        vad:hasTrig и vad:hasParentProcess - взаимоисключающие предикаты.
        Только один из них может быть заполнен для конкретного процесса:
        - Если есть vad:hasTrig - процесс детализирован, родитель определяется
          через vad:hasParentTrig в соответствующем TriG
        - Если НЕТ vad:hasTrig - должен быть указан vad:hasParentProcess

        Возможные значения:
        - URI процесса-родителя (например, vad:pGA)
        - vad:NotDefined - родитель еще не определен

        Хранится в vad:ptree (входит в группу PTREE_PREDICATES).

        Пример:
        vad:Process2 vad:hasParentProcess vad:pGA .

        При создании нового TriG для процесса:
        1. Проверяется, что hasParentProcess != vad:NotDefined
        2. Если проверка пройдена, hasParentProcess удаляется
        3. Добавляется vad:hasTrig на новый TriG

        Связь с JS-кодом: входит в константу PTREE_PREDICATES
    """ ;
    dcterms:description "Указывает родительский процесс для недетализированных процессов" .

# ------------------------------------------------------------------------------
# vad:definesProcess - Явная связь TriG со схемой конкретного процесса
# ------------------------------------------------------------------------------
# Обратное свойство к vad:hasTrig
# Входит в VAD_ALLOWED_PREDICATES
# ------------------------------------------------------------------------------

vad:definesProcess
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "definesProcess" ;
    rdfs:domain vad:VADProcessDia ;
    rdfs:range vad:Process ;
    owl:inverseOf vad:hasTrig ;
    rdfs:comment """
        Предикат definesProcess явно связывает схему процесса (TriG)
        с конкретным процессом, который она описывает.

        Это обратное свойство к vad:hasTrig - если:
        vad:p1 vad:hasTrig vad:t_p1 .
        то также подразумевается:
        vad:t_p1 vad:definesProcess vad:p1 .

        Использование данного предиката решает проблему неявной связи между
        идентификаторами процесса и схемы процесса (TriG), например:
        vad:p1 и vad:t_p1 (где t_ - обозначает trig).

        Рекомендуемый подход:
        1. В vad:ptree указывается vad:hasTrig для процесса
        2. В TriG (VADProcessDia) указывается vad:definesProcess для схемы

        Пример:
        # В vad:ptree:
        vad:p1 vad:hasTrig vad:t_p1 .

        # В vad:t_p1:
        vad:t_p1 vad:definesProcess vad:p1 .

        Преимущество: явная связь без необходимости ручной синхронизации
        и без дублирования vad:hasParentTrig.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Явно связывает TriG схему с конкретным процессом, который она описывает" .

# ==============================================================================
# ГРУППА СВОЙСТВ «ИНДИВИДУАЛЬНАЯ ДЛЯ КОНКРЕТНОЙ СХЕМЫ ПРОЦЕССА»
# ==============================================================================
# Эти предикаты хранятся в соответствующем TriG (VADProcessDia)
# Связь с JS-кодом: входят в VAD_ALLOWED_PREDICATES, но НЕ в PTREE_PREDICATES
# ==============================================================================

# ------------------------------------------------------------------------------
# vad:hasNext - Следующий процесс
# ------------------------------------------------------------------------------
# Определяет последовательность процессов в цепочке VAD
# ------------------------------------------------------------------------------

vad:hasNext
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasNext" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:Process ;
    rdfs:comment """
        Предикат hasNext определяет следующий процесс в цепочке VAD.

        Используется для построения последовательной цепочки процессов
        на схеме. Процесс может иметь несколько следующих процессов
        (ветвление цепочки).

        Пример:
        vad:Process1 vad:hasNext vad:Process2 .
        vad:Process2 vad:hasNext vad:Process3, vad:Process4 .  # ветвление

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Определяет следующий процесс в цепочке добавленной стоимости" .

# ------------------------------------------------------------------------------
# vad:isSubprocessTrig - Явная связь процесса со схемой процесса
# ------------------------------------------------------------------------------
# Указывает, что процесс является подпроцессом в данном TriG
# Добавляется первым при создании нового процесса в составе TriG
# ------------------------------------------------------------------------------

vad:isSubprocessTrig
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "isSubprocessTrig" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:VADProcessDia ;
    rdfs:comment """
        Предикат isSubprocessTrig явно указывает вхождение индивида процесса
        в схему процесса (TriG).

        Этот предикат ПЕРВЫМ добавляется при создании нового процесса
        в составе TriG (схемы процесса). Он явно указывает, что данный
        процесс является подпроцессом в данной схеме.

        Пример:
        vad:Process2 vad:isSubprocessTrig vad:t_pGA ;
            vad:hasExecutor vad:ExecutorGroup_Process2 ;
            vad:processSubtype vad:Basic .

        Порядок предикатов:
        1. vad:isSubprocessTrig - связь с TriG (первым!)
        2. vad:hasExecutor - группа исполнителей
        3. vad:processSubtype - подтип процесса
        4. vad:hasNext - следующий процесс (опционально)

        Преимущества:
        - Явная связь процесса со схемой процесса
        - Упрощает SPARQL-запросы для поиска процессов в схеме
        - Ясная семантика: процесс входит в состав TriG

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Явно указывает вхождение индивида процесса в схему процесса (TriG)" .

# ------------------------------------------------------------------------------
# vad:hasExecutor - Исполнитель процесса
# ------------------------------------------------------------------------------
# Связывает процесс с группой исполнителей
# ------------------------------------------------------------------------------

vad:hasExecutor
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasExecutor" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:ExecutorGroup ;
    rdfs:comment """
        Предикат hasExecutor связывает процесс с группой исполнителей.

        Каждый процесс на схеме имеет одну группу исполнителей,
        которая содержит одного или нескольких конкретных исполнителей.

        Пример:
        vad:Process1 vad:hasExecutor vad:ExecutorGroup1 .

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Связывает процесс с группой исполнителей" .

# ------------------------------------------------------------------------------
# vad:processSubtype - Подтип процесса
# ------------------------------------------------------------------------------
# Указывает подтип процесса (Basic или Detailed)
# ------------------------------------------------------------------------------

vad:processSubtype
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "processSubtype" ;
    rdfs:domain vad:Process ;
    rdfs:range [
        owl:oneOf (
            vad:Detailed
            vad:DetailedChild
            vad:DetailedExternal
            vad:notDetailed
            vad:notDetailedChild
            vad:notDetailedExternal
            vad:NotDefinedType
        )
    ] ;
    rdfs:comment """
        Предикат processSubtype указывает подтип процесса.

        ВАЖНО: Значение vad:processSubtype вычисляется автоматически
        в virtualRDFdata и НЕ хранится в RDF-данных напрямую.

        Возможные значения (Detailed - процесс имеет vad:hasTrig):
        - vad:DetailedChild - детализированный процесс-подпроцесс
          (дочерняя схема имеет vad:hasParentTrig на текущую схему)
        - vad:DetailedExternal - детализированный внешний процесс
          (дочерняя схема НЕ имеет vad:hasParentTrig на текущую схему)

        Возможные значения (notDetailed - процесс НЕ имеет vad:hasTrig):
        - vad:notDetailedChild - недетализированный подпроцесс
          (vad:hasParentProcess совпадает с текущим процессом)
        - vad:notDetailedExternal - недетализированный внешний процесс
          (vad:hasParentProcess НЕ совпадает с текущим процессом)
        - vad:NotDefinedType - тип не определен
          (vad:hasParentProcess = vad:NotDefined)

        Пример:
        vad:Process1 vad:processSubtype vad:DetailedChild .
        vad:Process2 vad:processSubtype vad:notDetailedChild .
        vad:Process3 vad:processSubtype vad:NotDefinedType .

        Значение вычисляется на основе анализа vad:hasTrig, vad:hasParentTrig
        и vad:hasParentProcess. Подробности в vad-basic-ontology_tech_Appendix.ttl.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Указывает подтип процесса (вычисляется автоматически в virtualRDFdata)" .

# ------------------------------------------------------------------------------
# vad:hasParentTrig - Родительский TriG
# ------------------------------------------------------------------------------
# Определяет иерархию TriG графов
# ВАЖНО: Предикат hasParentTrig используется ТОЛЬКО для TriG-графов,
# а не для объектов типа Process.
# ------------------------------------------------------------------------------

vad:hasParentTrig
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasParentTrig" ;
    rdfs:domain [ owl:unionOf ( vad:VADProcessDia vad:ProcessTree vad:ExecutorTree ) ] ;
    rdfs:range [ owl:unionOf ( vad:VADProcessDia rdfs:Resource ) ] ;
    rdfs:comment """
        Предикат hasParentTrig определяет родительский TriG граф.

        ВАЖНО: Этот предикат используется ТОЛЬКО для TriG-графов,
        а НЕ для объектов типа Process. Название явно указывает,
        что это отношение только между объектами TriG для построения
        дерева в окне «Дерево TriG».

        Корневые графы имеют hasParentTrig = vad:root:
        vad:ptree vad:hasParentTrig vad:root .
        vad:rtree vad:hasParentTrig vad:root .
        vad:t_pGA vad:hasParentTrig vad:root .

        Дочерние графы указывают на родительский:
        vad:t_p1 vad:hasParentTrig vad:t_pGA .

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Определяет родительский TriG граф для построения иерархии (только для TriG-графов)" .

# ------------------------------------------------------------------------------
# vad:includes - Включает исполнителя
# ------------------------------------------------------------------------------
# Связывает группу исполнителей с конкретными исполнителями
# ------------------------------------------------------------------------------

vad:includes
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "includes" ;
    rdfs:domain vad:ExecutorGroup ;
    rdfs:range vad:Executor ;
    rdfs:comment """
        Предикат includes связывает группу исполнителей с конкретными исполнителями.

        Одна группа может включать нескольких исполнителей,
        один исполнитель может входить в несколько групп.

        Пример:
        vad:ExecutorGroup1 vad:includes vad:Executor1 .
        vad:ExecutorGroup2 vad:includes vad:Executor1, vad:Executor2 .

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Связывает группу исполнителей с конкретными исполнителями" .

# ==============================================================================
# ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ (USAGE EXAMPLES)
# ==============================================================================
# Ниже приведены примеры на основе exampleTrigVADv2 из index.html
# Эти примеры закомментированы, чтобы не загрязнять онтологию данными
# ==============================================================================

# Пример определения процесса в vad:ptree:
#
# vad:ptree {
#     vad:p1 rdf:type vad:Process ;
#         rdfs:label "p1 Процесс 1" ;
#         dcterms:description "Первый процесс в цепочке добавленной стоимости" ;
#         vad:hasTrig vad:t_p1 .
# }

# Пример определения процесса в VADProcessDia (vad:t_pGA):
#
# vad:t_pGA {
#     vad:t_pGA rdfs:label "Схема процесса t_pGA" ;
#         vad:hasParentTrig vad:root .
#
#     vad:p1 vad:isSubprocessTrig vad:t_pGA ;
#         vad:hasExecutor vad:ExecutorGroup1 ;
#         vad:processSubtype vad:Detailed ;
#         vad:hasNext vad:Process2 .
#
#     vad:ExecutorGroup1 rdf:type vad:ExecutorGroup ;
#         rdfs:label "Группа исполнителей процесса Процесс 1" ;
#         vad:includes vad:Executor1 .
#
#     vad:Executor1 rdf:type vad:Executor ;
#         rdfs:label "Исполнитель 1" .
# }

# ==============================================================================
# ПРИЛОЖЕНИЕ 1: СВОДНАЯ ТАБЛИЦА «ОБЪЕКТ-ПРЕДИКАТ»
# ==============================================================================
# Допустимые предикаты для каждого типа объекта
# Используется для фильтрации в окне Smart Design (поле Predicate зависит от Subject Type)
#
# Связь с JS-кодом: константа TYPE_PREDICATE_MAP
# ==============================================================================
#
# | Тип объекта (Subject Type)    | Допустимые предикаты                                        | Граф хранения     |
# |-------------------------------|-------------------------------------------------------------|-------------------|
# | --- Типы TriG (подклассы vad:TriG) ---                                                                         |
# | vad:VADProcessDia             | rdf:type, rdfs:label, vad:hasParentTrig, vad:definesProcess | VADProcessDia     |
# | vad:ProcessTree               | rdf:type, rdfs:label, vad:hasParentTrig                     | vad:ptree         |
# | vad:ExecutorTree              | rdf:type, rdfs:label, vad:hasParentTrig                     | vad:rtree         |
# | --- Типы Process (TypeProcess) ---                                                                             |
# | vad:Process (в ptree)         | rdf:type, rdfs:label, dcterms:description, vad:hasTrig      | vad:ptree         |
# | vad:Process (в VADProcessDia) | vad:isSubprocessTrig, vad:hasExecutor, vad:processSubtype,  | VADProcessDia     |
# |                               | vad:hasNext                                                 |                   |
# | --- Типы Executor (TypeExecutor) ---                                                                           |
# | vad:Executor (в rtree)        | rdf:type, rdfs:label                                        | vad:rtree         |
# | vad:ExecutorGroup             | rdf:type, rdfs:label, vad:includes                          | VADProcessDia     |
#
# Примечание:
# - TypeProcess = vad:Process и его подтипы (вычисляемые автоматически в virtualRDFdata)
# - TypeExecutor = vad:Executor
# - vad:TriG - базовый класс для VADProcessDia, ProcessTree, ExecutorTree
# - Process имеет разный набор предикатов в зависимости от контекста (ptree или VADProcessDia)
# - ProcessTree и ExecutorTree - это специальные типы для деревьев ptree и rtree
# - Подтипы Process (DetailedChild, DetailedExternal, notDetailedChild, notDetailedExternal, NotDefinedType)
#   определены в vad-basic-ontology_tech_Appendix.ttl
#
# ==============================================================================

# ==============================================================================
# ПРИЛОЖЕНИЕ 2: СПИСКИ ОБЩИХ СВОЙСТВ
# ==============================================================================
# Перечень свойств для каждого типа объекта по группам
#
# Связь с JS-кодом: константы PTREE_PREDICATES, RTREE_PREDICATES
# ==============================================================================
#
# --- Группа «Общие свойства процессов для всех схем процессов» (PTREE_PREDICATES) ---
# Хранятся в vad:ptree для всех объектов типа vad:Process:
#   1. rdf:type           - тип объекта (vad:Process)
#   2. rdfs:label         - название процесса
#   3. dcterms:description - описание процесса
#   4. vad:hasTrig        - ссылка на детализирующую схему (при наличии)
#   5. vad:hasParentProcess - родительский процесс (взаимоисключающий с vad:hasTrig)
#
# --- Группа «Индивидуальные свойства процесса для конкретной схемы» ---
# Хранятся в соответствующем VADProcessDia:
#   1. vad:isSubprocessTrig - связь с TriG (добавляется первым!)
#   2. vad:hasExecutor      - группа исполнителей
#   3. vad:processSubtype   - подтип процесса
#   4. vad:hasNext          - следующий процесс
#
# --- Группа «Общие свойства исполнителя для всех схем процессов» (RTREE_PREDICATES) ---
# Хранятся в vad:rtree для всех объектов типа vad:Executor:
#   1. rdf:type     - тип объекта (vad:Executor)
#   2. rdfs:label   - название исполнителя
#
# --- Группа «Свойства группы исполнителей» ---
# Хранятся в соответствующем VADProcessDia:
#   1. rdf:type     - тип объекта (vad:ExecutorGroup)
#   2. rdfs:label   - название группы (генерируется автоматически)
#   3. vad:includes - включённые исполнители
#
# --- Группа «Свойства схемы процесса» ---
# Хранятся в соответствующем TriG (VADProcessDia):
#   1. rdf:type           - тип объекта (vad:VADProcessDia)
#   2. rdfs:label         - название схемы
#   3. vad:hasParentTrig  - родительский TriG
#   4. vad:definesProcess - связь с процессом, который схема детализирует
#
# ==============================================================================

# ==============================================================================
# ТЕХНОЛОГИЧЕСКИЕ ОБЪЕКТЫ И ПОДТИПЫ ПРОЦЕССОВ
# ==============================================================================
# Технологические классы и объекты (Tech), а также подтипы процессов
# вынесены в отдельный файл: vad-basic-ontology_tech_Appendix.ttl
#
# Этот файл загружается при старте index.html и используется для:
# - Формирования связанных справочников в окне Smart Design
# - Определения групп предикатов для различных типов объектов
# - Указания автоматически генерируемых предикатов
# - Определения подтипов процессов (Detailed, notDetailed и их подклассы)
# - Определения автоматически вычисляемых значений (virtualRDFdata)
# ==============================================================================

# ==============================================================================
# КОНЕЦ ОНТОЛОГИИ
# ==============================================================================
