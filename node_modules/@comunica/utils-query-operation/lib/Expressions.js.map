{"version":3,"file":"Expressions.js","sourceRoot":"","sources":["Expressions.ts"],"names":[],"mappings":";;AASA,wDAiBC;AA1BD,2DAAgF;AAEhF,yCAAsC;AAEtC;;;;GAIG;AACH,SAAgB,sBAAsB,CAAC,UAA8B;IACnE,IAAI,IAAA,8BAAc,EAAC,UAAU,EAAE,uBAAO,CAAC,eAAe,CAAC,SAAS,CAAC,EAAE,CAAC;QAClE,OAAO,4BAAY,CAAC,gBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACzD,CAAC;IACD,IAAI,IAAA,8BAAc,EAAC,UAAU,EAAE,uBAAO,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,CAAC;QAC9D,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,IAAI,IAAA,8BAAc,EAAC,UAAU,EAAE,uBAAO,CAAC,eAAe,CAAC,QAAQ,CAAC,EAAE,CAAC;QACjE,OAAO,IAAA,qBAAS,EAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAChF,CAAC;IACD,IAAI,IAAA,8BAAc,EAAC,UAAU,EAAE,uBAAO,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC;QAC7D,IAAI,UAAU,CAAC,IAAI,CAAC,QAAQ,KAAK,UAAU,EAAE,CAAC;YAC5C,OAAO,CAAE,UAAU,CAAC,IAAI,CAAE,CAAC;QAC7B,CAAC;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,MAAM,IAAI,KAAK,CAAC,qDAAqD,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC;AAC7F,CAAC","sourcesContent":["import { Algebra, algebraUtils, isKnownSubType } from '@comunica/utils-algebra';\nimport type * as RDF from '@rdfjs/types';\nimport { uniqTerms } from 'rdf-terms';\n\n/**\n * Get all variables inside the given expression.\n * @param expression An expression.\n * @return An array of variables, which can be empty.\n */\nexport function getExpressionVariables(expression: Algebra.Expression): RDF.Variable[] {\n  if (isKnownSubType(expression, Algebra.ExpressionTypes.EXISTENCE)) {\n    return algebraUtils.inScopeVariables(expression.input);\n  }\n  if (isKnownSubType(expression, Algebra.ExpressionTypes.NAMED)) {\n    return [];\n  }\n  if (isKnownSubType(expression, Algebra.ExpressionTypes.OPERATOR)) {\n    return uniqTerms(expression.args.flatMap(arg => getExpressionVariables(arg)));\n  }\n  if (isKnownSubType(expression, Algebra.ExpressionTypes.TERM)) {\n    if (expression.term.termType === 'Variable') {\n      return [ expression.term ];\n    }\n    return [];\n  }\n  throw new Error(`Getting expression variables is not supported for ${expression.subType}`);\n}\n"]}