{"version":3,"file":"ActorQueryOperationUpdateCompositeUpdate.js","sourceRoot":"","sources":["ActorQueryOperationUpdateCompositeUpdate.ts"],"names":[],"mappings":";;;AACA,uEAEuC;AAGvC,2DAAkD;AAClD,2EAA4E;AAE5E;;GAEG;AACH,MAAa,wCACX,SAAQ,sDAAyD;IACjE,YAAmB,IAA2C;QAC5D,KAAK,CAAC,IAAI,EAAE,uBAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;IAC9C,CAAC;IAEM,KAAK,CAAC,aAAa,CACxB,SAAkC,EAClC,OAAuB;QAEvB,OAAO,IAAA,oCAAY,EAAC,OAAO,CAAC,CAAC;IAC/B,CAAC;IAEM,KAAK,CAAC,YAAY,CAAC,iBAA0C,EAAE,OAAuB;QAE3F,MAAM,OAAO,GAAG,GAAkB,EAAE,CAAC,CAAC,KAAK,IAAkB,EAAE;YAC7D,wCAAwC;YACxC,KAAK,MAAM,SAAS,IAAI,iBAAiB,CAAC,OAAO,EAAE,CAAC;gBAClD,MAAM,SAAS,GAAG,IAAA,mCAAW,EAAC,MAAM,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;gBACjG,MAAM,SAAS,CAAC,OAAO,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,EAAE,CAAC;QAEL,OAAO;YACL,IAAI,EAAE,MAAM;YACZ,OAAO;SACR,CAAC;IACJ,CAAC;CACF;AA5BD,4FA4BC","sourcesContent":["import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { IActorTest, TestResult } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport { Algebra } from '@comunica/utils-algebra';\nimport { getSafeVoid, testReadOnly } from '@comunica/utils-query-operation';\n\n/**\n * A comunica Update CompositeUpdate Query Operation Actor.\n */\nexport class ActorQueryOperationUpdateCompositeUpdate\n  extends ActorQueryOperationTypedMediated<Algebra.CompositeUpdate> {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, Algebra.Types.COMPOSITE_UPDATE);\n  }\n\n  public async testOperation(\n    operation: Algebra.CompositeUpdate,\n    context: IActionContext,\n  ): Promise<TestResult<IActorTest>> {\n    return testReadOnly(context);\n  }\n\n  public async runOperation(operationOriginal: Algebra.CompositeUpdate, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const execute = (): Promise<void> => (async(): Promise<void> => {\n      // Execute update operations in sequence\n      for (const operation of operationOriginal.updates) {\n        const subResult = getSafeVoid(await this.mediatorQueryOperation.mediate({ operation, context }));\n        await subResult.execute();\n      }\n    })();\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n"]}