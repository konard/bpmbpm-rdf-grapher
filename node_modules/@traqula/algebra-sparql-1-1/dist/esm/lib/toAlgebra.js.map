{"version":3,"file":"toAlgebra.js","sourceRoot":"","sources":["../../../lib/toAlgebra.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,YAAY,EACZ,mBAAmB,EACnB,cAAc,EACd,mBAAmB,EACnB,sBAAsB,EACtB,8BAA8B,EAC9B,gBAAgB,EAChB,gBAAgB,EAChB,aAAa,EACb,sBAAsB,EACtB,YAAY,EACZ,mBAAmB,EACnB,qBAAqB,EACrB,YAAY,EACZ,2BAA2B,EAC3B,cAAc,EACd,yBAAyB,EACzB,0BAA0B,EAC1B,sBAAsB,EACtB,YAAY,EACZ,aAAa,EACb,eAAe,EACf,qBAAqB,EACrB,qBAAqB,EACrB,2BAA2B,EAC3B,yBAAyB,EACzB,wBAAwB,EACxB,iBAAiB,EACjB,wBAAwB,EACxB,aAAa,EACb,0BAA0B,EAC1B,uBAAuB,EACvB,cAAc,EACd,oBAAoB,EACpB,gBAAgB,GACjB,MAAM,sCAAsC,CAAC;AAE9C,OAAO,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AAG7C,MAAM,CAAC,MAAM,kBAAkB,GAAG,YAAY;KAC3C,MAAM,CAAS;IACd,YAAY;IACZ,mBAAmB;IACnB,YAAY;IACZ,uBAAuB;CACxB,CAAC;KACD,OAAO;AACN,UAAU;AACV,cAAc,EACd,aAAa,EACb,0BAA0B,EAC1B,mBAAmB,EACnB,sBAAsB,EACtB,8BAA8B,EAC9B,gBAAgB,EAChB,gBAAgB,EAChB,gBAAgB;AAChB,OAAO;AACP,aAAa,EACb,sBAAsB,EACtB,YAAY;AACZ,WAAW;AACX,mBAAmB,EACnB,qBAAqB,EACrB,YAAY,EACZ,2BAA2B,EAC3B,cAAc;AACd,gBAAgB;AAChB,yBAAyB,EACzB,0BAA0B,EAC1B,sBAAsB,EACtB,YAAY,EACZ,aAAa;AACb,UAAU;AACV,eAAe,EACf,qBAAqB,EACrB,qBAAqB,EACrB,2BAA2B,EAC3B,yBAAyB,EACzB,wBAAwB,EACxB,iBAAiB,EACjB,wBAAwB;AACxB,YAAY;AACZ,cAAc,CACf,CAAC;AAEJ;;;;;;;;;;;;GAYG;AACH,MAAM,UAAU,SAAS,CAAC,KAAkB,EAAE,UAA0B,EAAE;IACxE,MAAM,CAAC,GAAG,oBAAoB,CAAC,OAAO,CAAC,CAAC;IACxC,MAAM,WAAW,GAAG,kBAAkB,CAAC,KAAK,EAAE,CAAC;IAC/C,OAAO,WAAW,CAAC,cAAc,CAAC,CAAC,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC;AACtF,CAAC","sourcesContent":["import {\n  mapAggregate,\n  translateAggregates,\n  translateNamed,\n  translateInlineData,\n  translateDatasetClause,\n  translateBlankNodesToVariables,\n  findAllVariables,\n  generateFreshVar,\n  translatePath,\n  translatePathPredicate,\n  simplifyPath,\n  translateExpression,\n  translateGraphPattern,\n  translateBgp,\n  accumulateGroupGraphPattern,\n  simplifiedJoin,\n  translateTripleCollection,\n  translateBasicGraphPattern,\n  translateTripleNesting,\n  recurseGraph,\n  translateQuad,\n  translateUpdate,\n  translateSingleUpdate,\n  translateInsertDelete,\n  translateUpdateTriplesBlock,\n  translateGraphRefSpecific,\n  translateGraphRefDefSpec,\n  translateGraphRef,\n  translateUpdateGraphLoad,\n  translateTerm,\n  registerContextDefinitions,\n  translateBoundAggregate,\n  translateQuery,\n  createAlgebraContext,\n  inScopeVariables,\n} from '@traqula/algebra-transformations-1-1';\nimport type { Algebra, ContextConfigs } from '@traqula/algebra-transformations-1-1';\nimport { IndirBuilder } from '@traqula/core';\nimport type { SparqlQuery } from '@traqula/rules-sparql-1-1';\n\nexport const toAlgebra11Builder = IndirBuilder\n  .create(<const> [\n    // Aggregate\n    translateAggregates,\n    mapAggregate,\n    translateBoundAggregate,\n  ])\n  .addMany(\n    // General\n    translateNamed,\n    translateTerm,\n    registerContextDefinitions,\n    translateInlineData,\n    translateDatasetClause,\n    translateBlankNodesToVariables,\n    findAllVariables,\n    inScopeVariables,\n    generateFreshVar,\n    // Path\n    translatePath,\n    translatePathPredicate,\n    simplifyPath,\n    // Patterns\n    translateExpression,\n    translateGraphPattern,\n    translateBgp,\n    accumulateGroupGraphPattern,\n    simplifiedJoin,\n    // TripleAndQuad\n    translateTripleCollection,\n    translateBasicGraphPattern,\n    translateTripleNesting,\n    recurseGraph,\n    translateQuad,\n    // Updates\n    translateUpdate,\n    translateSingleUpdate,\n    translateInsertDelete,\n    translateUpdateTriplesBlock,\n    translateGraphRefSpecific,\n    translateGraphRefDefSpec,\n    translateGraphRef,\n    translateUpdateGraphLoad,\n    // ToAlgebra\n    translateQuery,\n  );\n\n/**\n * Translates the given SPARQL query to SPARQL Algebra.\n * @param query - sparql 1.1 AST generated by Traqula\n * @param options - Optional options object. Current options:\n * @param options.dataFactory - The Datafactory used to generate terms. Default @rdfjs/data-model.\n * @param options.quads - Boolean indicating whether triples should be converted to Quads\n *        (consumes GRAPH statements). Default false.\n * @param options.prefixes - Pre-defined prefixes for the given query. Default empty.\n * @param options.baseIRI - Base IRI that should be used for the query.\n *        Default undefined (throws error if required).\n * @param options.blankToVariable - translate all blank nodes into variables\n * @returns Operation\n */\nexport function toAlgebra(query: SparqlQuery, options: ContextConfigs = {}): Algebra.Operation {\n  const c = createAlgebraContext(options);\n  const transformer = toAlgebra11Builder.build();\n  return transformer.translateQuery(c, query, options.quads, options.blankToVariable);\n}\n"]}