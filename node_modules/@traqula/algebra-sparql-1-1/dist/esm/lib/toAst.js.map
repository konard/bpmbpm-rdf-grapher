{"version":3,"file":"toAst.js","sourceRoot":"","sources":["../../../lib/toAst.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n  Algebra,\n} from '@traqula/algebra-transformations-1-1';\nimport {\n  registerProjection,\n  resetContext,\n  translateAlgAggregateExpression,\n  translateAlgAnyExpression,\n  translateAlgExpressionOrOrdering,\n  translateAlgExpressionOrWild,\n  translateAlgPattern,\n  translateAlgOrderBy,\n  translateAlgPureExpression,\n  translateAlgReduced,\n  translateAlgPathComponent,\n  translateAlgAlt,\n  translateAlgInv,\n  translateAlgZeroOrMorePath,\n  translateAlgSeq,\n  translateAlgPatternIntoGroup,\n  translateAlgSinglePattern,\n  translateAlgPatternNew,\n  translateAlgPath,\n  translateAlgBgp,\n  translateAlgJoin,\n  translateAlgGroup,\n  operationAlgInputAsPatternList,\n  translateAlgService,\n  translateAlgLeftJoin,\n  translateAlgNamedExpression,\n  translateAlgPureOperatorExpression,\n  translateAlgExistenceExpression,\n  translateAlgWildcardExpression,\n\n  translateAlgExtend,\n  translateAlgTerm,\n\n  translateAlgNps,\n  translateAlgBoundAggregate,\n  translateAlgFrom,\n\n  translateAlgGraph,\n\n  translateAlgSlice,\n  translateAlgValues,\n  translateAlgUnion,\n  translateAlgMinus,\n  translateAlgOperatorExpression,\n  translateAlgDatasetClauses,\n  translateAlgDistinct,\n\n  translateAlgZeroOrOnePath,\n  translateAlgOneOrMorePath,\n  translateAlgLink,\n  translateAlgFilter,\n  algWrapInPatternGroup,\n  removeAlgQuads,\n  removeAlgQuadsRecursive,\n  splitAlgBgpToGraphs,\n  translateAlgConstruct,\n  translateAlgProject,\n  registerOrderBy,\n  registerVariables,\n  putExtensionsInGroup,\n  filterReplace,\n  translateAlgUpdateOperation,\n  translateAlgDeleteInsert,\n  translateAlgCompositeUpdate,\n  translateAlgLoad,\n  translateAlgGraphRef,\n  translateAlgClear,\n  translateAlgCreate,\n\n  translateAlgDrop,\n  translateAlgMove,\n  translateAlgCopy,\n  translateAlgAdd,\n  toUpdate,\n  objectContainsVariable,\n  cleanupAlgUpdateOperationModify,\n  createAstContext,\n  convertAlgUpdatePatterns,\n  algToSparql,\n  registerAlgGroupBy,\n  replaceAlgAggregatorVariables,\n} from '@traqula/algebra-transformations-1-1';\nimport { IndirBuilder } from '@traqula/core';\nimport type { SparqlQuery } from '@traqula/rules-sparql-1-1';\n\nexport const toAst11Builder = IndirBuilder\n  .create(<const> [ resetContext, registerProjection ])\n  .addMany(\n    translateAlgPureExpression,\n    translateAlgExpressionOrWild,\n    translateAlgExpressionOrOrdering,\n    translateAlgAnyExpression,\n    translateAlgAggregateExpression,\n    translateAlgExistenceExpression,\n    translateAlgNamedExpression,\n    translateAlgPureOperatorExpression,\n    translateAlgOperatorExpression,\n    translateAlgWildcardExpression,\n    // General\n    translateAlgTerm,\n    translateAlgExtend,\n    translateAlgDatasetClauses,\n    translateAlgOrderBy,\n    translateAlgPattern,\n    translateAlgReduced,\n    translateAlgDistinct,\n    // Path\n    translateAlgPathComponent,\n    translateAlgAlt,\n    translateAlgInv,\n    translateAlgLink,\n    translateAlgNps,\n    translateAlgOneOrMorePath,\n    translateAlgSeq,\n    translateAlgZeroOrMorePath,\n    translateAlgZeroOrOnePath,\n  )\n  .addMany(\n    // Pattern\n    translateAlgPatternIntoGroup,\n    translateAlgSinglePattern,\n    translateAlgPatternNew,\n    translateAlgBoundAggregate,\n    translateAlgBgp,\n    translateAlgPath,\n    translateAlgFrom,\n    translateAlgFilter,\n    translateAlgGraph,\n    translateAlgGroup,\n    translateAlgJoin,\n    translateAlgLeftJoin,\n    translateAlgMinus,\n    translateAlgService,\n    operationAlgInputAsPatternList,\n    translateAlgSlice,\n    algWrapInPatternGroup,\n    translateAlgUnion,\n    translateAlgValues,\n    // Quads\n    removeAlgQuads,\n    removeAlgQuadsRecursive,\n    splitAlgBgpToGraphs,\n    // QueryUnit\n    translateAlgConstruct,\n    replaceAlgAggregatorVariables,\n    translateAlgProject,\n    registerAlgGroupBy,\n    registerOrderBy,\n    registerVariables,\n    putExtensionsInGroup,\n    filterReplace,\n    objectContainsVariable,\n    // UpdateUnit\n    translateAlgUpdateOperation,\n    toUpdate,\n    translateAlgCompositeUpdate,\n    translateAlgDeleteInsert,\n    cleanupAlgUpdateOperationModify,\n    translateAlgLoad,\n    translateAlgGraphRef,\n    translateAlgClear,\n    translateAlgCreate,\n    translateAlgDrop,\n    translateAlgAdd,\n    translateAlgMove,\n    translateAlgCopy,\n    convertAlgUpdatePatterns,\n    // ToAst\n    algToSparql,\n  );\n\n/**\n * Transform an operation to a SPARQL 1.1 Traqula AST.\n * @param op\n */\nexport function toAst(op: Algebra.Operation): SparqlQuery {\n  const c = createAstContext();\n  const transformer = toAst11Builder.build();\n  return transformer.algToSparql(c, op);\n}\n"]}