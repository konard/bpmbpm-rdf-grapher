"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.toAlgebra11Builder = void 0;
exports.toAlgebra = toAlgebra;
const algebra_transformations_1_1_1 = require("@traqula/algebra-transformations-1-1");
const core_1 = require("@traqula/core");
exports.toAlgebra11Builder = core_1.IndirBuilder
    .create([
    // Aggregate
    algebra_transformations_1_1_1.translateAggregates,
    algebra_transformations_1_1_1.mapAggregate,
    algebra_transformations_1_1_1.translateBoundAggregate,
])
    .addMany(
// General
algebra_transformations_1_1_1.translateNamed, algebra_transformations_1_1_1.translateTerm, algebra_transformations_1_1_1.registerContextDefinitions, algebra_transformations_1_1_1.translateInlineData, algebra_transformations_1_1_1.translateDatasetClause, algebra_transformations_1_1_1.translateBlankNodesToVariables, algebra_transformations_1_1_1.findAllVariables, algebra_transformations_1_1_1.inScopeVariables, algebra_transformations_1_1_1.generateFreshVar, 
// Path
algebra_transformations_1_1_1.translatePath, algebra_transformations_1_1_1.translatePathPredicate, algebra_transformations_1_1_1.simplifyPath, 
// Patterns
algebra_transformations_1_1_1.translateExpression, algebra_transformations_1_1_1.translateGraphPattern, algebra_transformations_1_1_1.translateBgp, algebra_transformations_1_1_1.accumulateGroupGraphPattern, algebra_transformations_1_1_1.simplifiedJoin, 
// TripleAndQuad
algebra_transformations_1_1_1.translateTripleCollection, algebra_transformations_1_1_1.translateBasicGraphPattern, algebra_transformations_1_1_1.translateTripleNesting, algebra_transformations_1_1_1.recurseGraph, algebra_transformations_1_1_1.translateQuad, 
// Updates
algebra_transformations_1_1_1.translateUpdate, algebra_transformations_1_1_1.translateSingleUpdate, algebra_transformations_1_1_1.translateInsertDelete, algebra_transformations_1_1_1.translateUpdateTriplesBlock, algebra_transformations_1_1_1.translateGraphRefSpecific, algebra_transformations_1_1_1.translateGraphRefDefSpec, algebra_transformations_1_1_1.translateGraphRef, algebra_transformations_1_1_1.translateUpdateGraphLoad, 
// ToAlgebra
algebra_transformations_1_1_1.translateQuery);
/**
 * Translates the given SPARQL query to SPARQL Algebra.
 * @param query - sparql 1.1 AST generated by Traqula
 * @param options - Optional options object. Current options:
 * @param options.dataFactory - The Datafactory used to generate terms. Default @rdfjs/data-model.
 * @param options.quads - Boolean indicating whether triples should be converted to Quads
 *        (consumes GRAPH statements). Default false.
 * @param options.prefixes - Pre-defined prefixes for the given query. Default empty.
 * @param options.baseIRI - Base IRI that should be used for the query.
 *        Default undefined (throws error if required).
 * @param options.blankToVariable - translate all blank nodes into variables
 * @returns Operation
 */
function toAlgebra(query, options = {}) {
    const c = (0, algebra_transformations_1_1_1.createAlgebraContext)(options);
    const transformer = exports.toAlgebra11Builder.build();
    return transformer.translateQuery(c, query, options.quads, options.blankToVariable);
}
//# sourceMappingURL=toAlgebra.js.map