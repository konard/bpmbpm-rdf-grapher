{"version":3,"file":"toAlgebra.js","sourceRoot":"","sources":["../../../lib/toAlgebra.ts"],"names":[],"mappings":";;;AAqGA,8BAIC;AAzGD,sFAoC8C;AAE9C,wCAA6C;AAGhC,QAAA,kBAAkB,GAAG,mBAAY;KAC3C,MAAM,CAAS;IACd,YAAY;IACZ,iDAAmB;IACnB,0CAAY;IACZ,qDAAuB;CACxB,CAAC;KACD,OAAO;AACN,UAAU;AACV,4CAAc,EACd,2CAAa,EACb,wDAA0B,EAC1B,iDAAmB,EACnB,oDAAsB,EACtB,4DAA8B,EAC9B,8CAAgB,EAChB,8CAAgB,EAChB,8CAAgB;AAChB,OAAO;AACP,2CAAa,EACb,oDAAsB,EACtB,0CAAY;AACZ,WAAW;AACX,iDAAmB,EACnB,mDAAqB,EACrB,0CAAY,EACZ,yDAA2B,EAC3B,4CAAc;AACd,gBAAgB;AAChB,uDAAyB,EACzB,wDAA0B,EAC1B,oDAAsB,EACtB,0CAAY,EACZ,2CAAa;AACb,UAAU;AACV,6CAAe,EACf,mDAAqB,EACrB,mDAAqB,EACrB,yDAA2B,EAC3B,uDAAyB,EACzB,sDAAwB,EACxB,+CAAiB,EACjB,sDAAwB;AACxB,YAAY;AACZ,4CAAc,CACf,CAAC;AAEJ;;;;;;;;;;;;GAYG;AACH,SAAgB,SAAS,CAAC,KAAkB,EAAE,UAA0B,EAAE;IACxE,MAAM,CAAC,GAAG,IAAA,kDAAoB,EAAC,OAAO,CAAC,CAAC;IACxC,MAAM,WAAW,GAAG,0BAAkB,CAAC,KAAK,EAAE,CAAC;IAC/C,OAAO,WAAW,CAAC,cAAc,CAAC,CAAC,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC;AACtF,CAAC","sourcesContent":["import {\n  mapAggregate,\n  translateAggregates,\n  translateNamed,\n  translateInlineData,\n  translateDatasetClause,\n  translateBlankNodesToVariables,\n  findAllVariables,\n  generateFreshVar,\n  translatePath,\n  translatePathPredicate,\n  simplifyPath,\n  translateExpression,\n  translateGraphPattern,\n  translateBgp,\n  accumulateGroupGraphPattern,\n  simplifiedJoin,\n  translateTripleCollection,\n  translateBasicGraphPattern,\n  translateTripleNesting,\n  recurseGraph,\n  translateQuad,\n  translateUpdate,\n  translateSingleUpdate,\n  translateInsertDelete,\n  translateUpdateTriplesBlock,\n  translateGraphRefSpecific,\n  translateGraphRefDefSpec,\n  translateGraphRef,\n  translateUpdateGraphLoad,\n  translateTerm,\n  registerContextDefinitions,\n  translateBoundAggregate,\n  translateQuery,\n  createAlgebraContext,\n  inScopeVariables,\n} from '@traqula/algebra-transformations-1-1';\nimport type { Algebra, ContextConfigs } from '@traqula/algebra-transformations-1-1';\nimport { IndirBuilder } from '@traqula/core';\nimport type { SparqlQuery } from '@traqula/rules-sparql-1-1';\n\nexport const toAlgebra11Builder = IndirBuilder\n  .create(<const> [\n    // Aggregate\n    translateAggregates,\n    mapAggregate,\n    translateBoundAggregate,\n  ])\n  .addMany(\n    // General\n    translateNamed,\n    translateTerm,\n    registerContextDefinitions,\n    translateInlineData,\n    translateDatasetClause,\n    translateBlankNodesToVariables,\n    findAllVariables,\n    inScopeVariables,\n    generateFreshVar,\n    // Path\n    translatePath,\n    translatePathPredicate,\n    simplifyPath,\n    // Patterns\n    translateExpression,\n    translateGraphPattern,\n    translateBgp,\n    accumulateGroupGraphPattern,\n    simplifiedJoin,\n    // TripleAndQuad\n    translateTripleCollection,\n    translateBasicGraphPattern,\n    translateTripleNesting,\n    recurseGraph,\n    translateQuad,\n    // Updates\n    translateUpdate,\n    translateSingleUpdate,\n    translateInsertDelete,\n    translateUpdateTriplesBlock,\n    translateGraphRefSpecific,\n    translateGraphRefDefSpec,\n    translateGraphRef,\n    translateUpdateGraphLoad,\n    // ToAlgebra\n    translateQuery,\n  );\n\n/**\n * Translates the given SPARQL query to SPARQL Algebra.\n * @param query - sparql 1.1 AST generated by Traqula\n * @param options - Optional options object. Current options:\n * @param options.dataFactory - The Datafactory used to generate terms. Default @rdfjs/data-model.\n * @param options.quads - Boolean indicating whether triples should be converted to Quads\n *        (consumes GRAPH statements). Default false.\n * @param options.prefixes - Pre-defined prefixes for the given query. Default empty.\n * @param options.baseIRI - Base IRI that should be used for the query.\n *        Default undefined (throws error if required).\n * @param options.blankToVariable - translate all blank nodes into variables\n * @returns Operation\n */\nexport function toAlgebra(query: SparqlQuery, options: ContextConfigs = {}): Algebra.Operation {\n  const c = createAlgebraContext(options);\n  const transformer = toAlgebra11Builder.build();\n  return transformer.translateQuery(c, query, options.quads, options.blankToVariable);\n}\n"]}