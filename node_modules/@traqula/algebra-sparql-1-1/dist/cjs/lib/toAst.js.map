{"version":3,"file":"toAst.js","sourceRoot":"","sources":["../../../lib/toAst.ts"],"names":[],"mappings":";;;AAmLA,sBAIC;AApLD,sFAkF8C;AAC9C,wCAA6C;AAGhC,QAAA,cAAc,GAAG,mBAAY;KACvC,MAAM,CAAS,CAAE,0CAAY,EAAE,gDAAkB,CAAE,CAAC;KACpD,OAAO,CACN,wDAA0B,EAC1B,0DAA4B,EAC5B,8DAAgC,EAChC,uDAAyB,EACzB,6DAA+B,EAC/B,6DAA+B,EAC/B,yDAA2B,EAC3B,gEAAkC,EAClC,4DAA8B,EAC9B,4DAA8B;AAC9B,UAAU;AACV,8CAAgB,EAChB,gDAAkB,EAClB,wDAA0B,EAC1B,iDAAmB,EACnB,iDAAmB,EACnB,iDAAmB,EACnB,kDAAoB;AACpB,OAAO;AACP,uDAAyB,EACzB,6CAAe,EACf,6CAAe,EACf,8CAAgB,EAChB,6CAAe,EACf,uDAAyB,EACzB,6CAAe,EACf,wDAA0B,EAC1B,uDAAyB,CAC1B;KACA,OAAO;AACN,UAAU;AACV,0DAA4B,EAC5B,uDAAyB,EACzB,oDAAsB,EACtB,wDAA0B,EAC1B,6CAAe,EACf,8CAAgB,EAChB,8CAAgB,EAChB,gDAAkB,EAClB,+CAAiB,EACjB,+CAAiB,EACjB,8CAAgB,EAChB,kDAAoB,EACpB,+CAAiB,EACjB,iDAAmB,EACnB,4DAA8B,EAC9B,+CAAiB,EACjB,mDAAqB,EACrB,+CAAiB,EACjB,gDAAkB;AAClB,QAAQ;AACR,4CAAc,EACd,qDAAuB,EACvB,iDAAmB;AACnB,YAAY;AACZ,mDAAqB,EACrB,2DAA6B,EAC7B,iDAAmB,EACnB,gDAAkB,EAClB,6CAAe,EACf,+CAAiB,EACjB,kDAAoB,EACpB,2CAAa,EACb,oDAAsB;AACtB,aAAa;AACb,yDAA2B,EAC3B,sCAAQ,EACR,yDAA2B,EAC3B,sDAAwB,EACxB,6DAA+B,EAC/B,8CAAgB,EAChB,kDAAoB,EACpB,+CAAiB,EACjB,gDAAkB,EAClB,8CAAgB,EAChB,6CAAe,EACf,8CAAgB,EAChB,8CAAgB,EAChB,sDAAwB;AACxB,QAAQ;AACR,yCAAW,CACZ,CAAC;AAEJ;;;GAGG;AACH,SAAgB,KAAK,CAAC,EAAqB;IACzC,MAAM,CAAC,GAAG,IAAA,8CAAgB,GAAE,CAAC;IAC7B,MAAM,WAAW,GAAG,sBAAc,CAAC,KAAK,EAAE,CAAC;IAC3C,OAAO,WAAW,CAAC,WAAW,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AACxC,CAAC","sourcesContent":["import type {\n  Algebra,\n} from '@traqula/algebra-transformations-1-1';\nimport {\n  registerProjection,\n  resetContext,\n  translateAlgAggregateExpression,\n  translateAlgAnyExpression,\n  translateAlgExpressionOrOrdering,\n  translateAlgExpressionOrWild,\n  translateAlgPattern,\n  translateAlgOrderBy,\n  translateAlgPureExpression,\n  translateAlgReduced,\n  translateAlgPathComponent,\n  translateAlgAlt,\n  translateAlgInv,\n  translateAlgZeroOrMorePath,\n  translateAlgSeq,\n  translateAlgPatternIntoGroup,\n  translateAlgSinglePattern,\n  translateAlgPatternNew,\n  translateAlgPath,\n  translateAlgBgp,\n  translateAlgJoin,\n  translateAlgGroup,\n  operationAlgInputAsPatternList,\n  translateAlgService,\n  translateAlgLeftJoin,\n  translateAlgNamedExpression,\n  translateAlgPureOperatorExpression,\n  translateAlgExistenceExpression,\n  translateAlgWildcardExpression,\n\n  translateAlgExtend,\n  translateAlgTerm,\n\n  translateAlgNps,\n  translateAlgBoundAggregate,\n  translateAlgFrom,\n\n  translateAlgGraph,\n\n  translateAlgSlice,\n  translateAlgValues,\n  translateAlgUnion,\n  translateAlgMinus,\n  translateAlgOperatorExpression,\n  translateAlgDatasetClauses,\n  translateAlgDistinct,\n\n  translateAlgZeroOrOnePath,\n  translateAlgOneOrMorePath,\n  translateAlgLink,\n  translateAlgFilter,\n  algWrapInPatternGroup,\n  removeAlgQuads,\n  removeAlgQuadsRecursive,\n  splitAlgBgpToGraphs,\n  translateAlgConstruct,\n  translateAlgProject,\n  registerOrderBy,\n  registerVariables,\n  putExtensionsInGroup,\n  filterReplace,\n  translateAlgUpdateOperation,\n  translateAlgDeleteInsert,\n  translateAlgCompositeUpdate,\n  translateAlgLoad,\n  translateAlgGraphRef,\n  translateAlgClear,\n  translateAlgCreate,\n\n  translateAlgDrop,\n  translateAlgMove,\n  translateAlgCopy,\n  translateAlgAdd,\n  toUpdate,\n  objectContainsVariable,\n  cleanupAlgUpdateOperationModify,\n  createAstContext,\n  convertAlgUpdatePatterns,\n  algToSparql,\n  registerAlgGroupBy,\n  replaceAlgAggregatorVariables,\n} from '@traqula/algebra-transformations-1-1';\nimport { IndirBuilder } from '@traqula/core';\nimport type { SparqlQuery } from '@traqula/rules-sparql-1-1';\n\nexport const toAst11Builder = IndirBuilder\n  .create(<const> [ resetContext, registerProjection ])\n  .addMany(\n    translateAlgPureExpression,\n    translateAlgExpressionOrWild,\n    translateAlgExpressionOrOrdering,\n    translateAlgAnyExpression,\n    translateAlgAggregateExpression,\n    translateAlgExistenceExpression,\n    translateAlgNamedExpression,\n    translateAlgPureOperatorExpression,\n    translateAlgOperatorExpression,\n    translateAlgWildcardExpression,\n    // General\n    translateAlgTerm,\n    translateAlgExtend,\n    translateAlgDatasetClauses,\n    translateAlgOrderBy,\n    translateAlgPattern,\n    translateAlgReduced,\n    translateAlgDistinct,\n    // Path\n    translateAlgPathComponent,\n    translateAlgAlt,\n    translateAlgInv,\n    translateAlgLink,\n    translateAlgNps,\n    translateAlgOneOrMorePath,\n    translateAlgSeq,\n    translateAlgZeroOrMorePath,\n    translateAlgZeroOrOnePath,\n  )\n  .addMany(\n    // Pattern\n    translateAlgPatternIntoGroup,\n    translateAlgSinglePattern,\n    translateAlgPatternNew,\n    translateAlgBoundAggregate,\n    translateAlgBgp,\n    translateAlgPath,\n    translateAlgFrom,\n    translateAlgFilter,\n    translateAlgGraph,\n    translateAlgGroup,\n    translateAlgJoin,\n    translateAlgLeftJoin,\n    translateAlgMinus,\n    translateAlgService,\n    operationAlgInputAsPatternList,\n    translateAlgSlice,\n    algWrapInPatternGroup,\n    translateAlgUnion,\n    translateAlgValues,\n    // Quads\n    removeAlgQuads,\n    removeAlgQuadsRecursive,\n    splitAlgBgpToGraphs,\n    // QueryUnit\n    translateAlgConstruct,\n    replaceAlgAggregatorVariables,\n    translateAlgProject,\n    registerAlgGroupBy,\n    registerOrderBy,\n    registerVariables,\n    putExtensionsInGroup,\n    filterReplace,\n    objectContainsVariable,\n    // UpdateUnit\n    translateAlgUpdateOperation,\n    toUpdate,\n    translateAlgCompositeUpdate,\n    translateAlgDeleteInsert,\n    cleanupAlgUpdateOperationModify,\n    translateAlgLoad,\n    translateAlgGraphRef,\n    translateAlgClear,\n    translateAlgCreate,\n    translateAlgDrop,\n    translateAlgAdd,\n    translateAlgMove,\n    translateAlgCopy,\n    convertAlgUpdatePatterns,\n    // ToAst\n    algToSparql,\n  );\n\n/**\n * Transform an operation to a SPARQL 1.1 Traqula AST.\n * @param op\n */\nexport function toAst(op: Algebra.Operation): SparqlQuery {\n  const c = createAstContext();\n  const transformer = toAst11Builder.build();\n  return transformer.algToSparql(c, op);\n}\n"]}