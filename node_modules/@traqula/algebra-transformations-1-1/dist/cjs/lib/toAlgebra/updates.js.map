{"version":3,"file":"updates.js","sourceRoot":"","sources":["../../../../lib/toAlgebra/updates.ts"],"names":[],"mappings":"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","sourcesContent":["import type * as RDF from '@rdfjs/types';\nimport type {\n  GraphQuads,\n  GraphRef,\n  GraphRefDefault,\n  GraphRefSpecific,\n  PatternBgp,\n  Update,\n  UpdateOperation,\n  UpdateOperationDeleteData,\n  UpdateOperationDeleteWhere,\n  UpdateOperationInsertData,\n  UpdateOperationLoad,\n  UpdateOperationModify,\n} from '@traqula/rules-sparql-1-1';\nimport type { Algebra } from '../index.js';\nimport type { AlgebraIndir, FlattenedTriple } from './core.js';\nimport { registerContextDefinitions, translateDatasetClause, translateNamed, translateTerm } from './general.js';\nimport { translateGraphPattern } from './patterns.js';\nimport { recurseGraph, translateBasicGraphPattern, translateQuad } from './tripleAndQuad.js';\n\nexport const translateUpdate: AlgebraIndir<'translateUpdate', Algebra.Operation, [Update]> = {\n  name: 'translateUpdate',\n  fun: ({ SUBRULE }) => ({ algebraFactory: AF }, thingy) => {\n    const updates: Algebra.Update[] = thingy.updates.flatMap((update) => {\n      SUBRULE(registerContextDefinitions, update.context);\n      return update.operation ? [ SUBRULE(translateSingleUpdate, update.operation) ] : [];\n    });\n    if (updates.length === 0) {\n      return AF.createNop();\n    }\n    if (updates.length === 1) {\n      return updates[0];\n    }\n    return AF.createCompositeUpdate(updates);\n  },\n};\n\nexport const translateSingleUpdate: AlgebraIndir<'translateSingleUpdate', Algebra.Update, [UpdateOperation]> = {\n  name: 'translateSingleUpdate',\n  fun: ({ SUBRULE }) => ({ astFactory: F, algebraFactory: AF }, op) => {\n    if (F.isUpdateOperationLoad(op)) {\n      return SUBRULE(translateUpdateGraphLoad, op);\n    }\n    if (F.isUpdateOperationClear(op)) {\n      return AF.createClear(SUBRULE(translateGraphRef, op.destination), op.silent);\n    }\n    if (F.isUpdateOperationCreate(op)) {\n      return AF.createCreate(<RDF.NamedNode> SUBRULE(translateGraphRef, op.destination), op.silent);\n    }\n    if (F.isUpdateOperationDrop(op)) {\n      return AF.createDrop(SUBRULE(translateGraphRef, op.destination), op.silent);\n    }\n    if (F.isUpdateOperationAdd(op)) {\n      return AF.createAdd(\n        SUBRULE(translateGraphRefDefSpec, op.source),\n        SUBRULE(translateGraphRefDefSpec, op.destination),\n        op.silent,\n      );\n    }\n    if (F.isUpdateOperationCopy(op)) {\n      return AF.createCopy(\n        SUBRULE(translateGraphRefDefSpec, op.source),\n        SUBRULE(translateGraphRefDefSpec, op.destination),\n        op.silent,\n      );\n    }\n    if (F.isUpdateOperationMove(op)) {\n      return AF.createMove(\n        SUBRULE(translateGraphRefDefSpec, op.source),\n        SUBRULE(translateGraphRefDefSpec, op.destination),\n        op.silent,\n      );\n    }\n    if (F.isUpdateOperationInsertData(op) || F.isUpdateOperationDeleteData(op) || F.isUpdateOperationDeleteWhere(op) ||\n      F.isUpdateOperationModify(op)) {\n      return SUBRULE(translateInsertDelete, op);\n    }\n\n    throw new Error(`Unknown update type ${JSON.stringify(op)}`);\n  },\n};\n\nexport const translateInsertDelete:\nAlgebraIndir<\n  'translateInsertDelete',\nAlgebra.Update,\n[UpdateOperationInsertData | UpdateOperationDeleteData | UpdateOperationDeleteWhere | UpdateOperationModify]\n> = {\n  name: 'translateInsertDelete',\n  fun: ({ SUBRULE }) => ({ useQuads, algebraFactory: AF, astFactory: F }, op) => {\n    if (!useQuads) {\n      throw new Error('INSERT/DELETE operations are only supported with quads option enabled');\n    }\n\n    const deleteTriples: Algebra.Pattern[] = [];\n    const insertTriples: Algebra.Pattern[] = [];\n    let where: Algebra.Operation | undefined;\n    if (F.isUpdateOperationDeleteData(op) || F.isUpdateOperationDeleteWhere(op)) {\n      deleteTriples.push(...op.data.flatMap(quad => SUBRULE(translateUpdateTriplesBlock, quad, undefined)));\n      if (F.isUpdateOperationDeleteWhere(op)) {\n        where = AF.createBgp(deleteTriples);\n      }\n    } else if (F.isUpdateOperationInsertData(op)) {\n      insertTriples.push(...op.data.flatMap(quad => SUBRULE(translateUpdateTriplesBlock, quad, undefined)));\n    } else {\n      deleteTriples.push(...op.delete.flatMap(quad =>\n        SUBRULE(translateUpdateTriplesBlock, quad, op.graph ? SUBRULE(translateNamed, op.graph) : op.graph)));\n      insertTriples.push(...op.insert.flatMap(quad =>\n        SUBRULE(translateUpdateTriplesBlock, quad, op.graph ? SUBRULE(translateNamed, op.graph) : op.graph)));\n      if (op.where.patterns.length > 0) {\n        where = SUBRULE(translateGraphPattern, op.where);\n        const use: { default: RDF.NamedNode[]; named: RDF.NamedNode[] } = SUBRULE(translateDatasetClause, op.from);\n        if (use.default.length > 0 || use.named.length > 0) {\n          where = AF.createFrom(where, use.default, use.named);\n        } else if (F.isUpdateOperationModify(op) && op.graph) {\n          // This is equivalent\n          where = SUBRULE(recurseGraph, where, SUBRULE(translateNamed, op.graph), undefined);\n        }\n      }\n    }\n\n    return AF.createDeleteInsert(\n      deleteTriples.length > 0 ? deleteTriples : undefined,\n      insertTriples.length > 0 ? insertTriples : undefined,\n      where,\n    );\n  },\n};\n\n// UPDATE parsing will always return quads and have no GRAPH elements\nexport const translateUpdateTriplesBlock:\nAlgebraIndir<'translateUpdateTriplesBlock', Algebra.Pattern[], [PatternBgp | GraphQuads, RDF.NamedNode | undefined]> = {\n  name: 'translateUpdateTriplesBlock',\n  fun: ({ SUBRULE }) => (c, thingy, graph) => {\n    const F = c.astFactory;\n    let currentGraph: RDF.NamedNode | RDF.Variable | undefined = graph;\n    let patternBgp: PatternBgp;\n    if (F.isGraphQuads(thingy)) {\n      currentGraph = <RDF.NamedNode | RDF.Variable> SUBRULE(translateTerm, thingy.graph);\n      patternBgp = thingy.triples;\n    } else {\n      patternBgp = thingy;\n    }\n    let triples: FlattenedTriple[] = [];\n    SUBRULE(translateBasicGraphPattern, patternBgp.triples, triples);\n    if (currentGraph) {\n      triples = triples.map(triple => Object.assign(triple, { graph: currentGraph }));\n    }\n    return triples.map(triple => SUBRULE(translateQuad, triple));\n  },\n};\n\nexport const translateGraphRefSpecific: AlgebraIndir<'translateGraphRefSpecific', RDF.NamedNode, [GraphRefSpecific]> = {\n  name: 'translateGraphRefSpecific',\n  fun: ({ SUBRULE }) => (_, graph) => SUBRULE(translateNamed, graph.graph),\n};\n\nexport const translateGraphRefDefSpec:\nAlgebraIndir<'translateGraphRefDefSpec', RDF.NamedNode | 'DEFAULT', [GraphRefSpecific | GraphRefDefault]> = {\n  name: 'translateGraphRefDefSpec',\n  fun: ({ SUBRULE }) => ({ astFactory: F }, graph) =>\n    F.isGraphRefDefault(graph) ? 'DEFAULT' : SUBRULE(translateGraphRefSpecific, graph),\n};\n\nexport const translateGraphRef:\nAlgebraIndir<'translateGraphRef', 'DEFAULT' | 'NAMED' | 'ALL' | RDF.NamedNode, [GraphRef]> = {\n  name: 'translateGraphRef',\n  fun: ({ SUBRULE }) => (c, graph) => {\n    const F = c.astFactory;\n    if (F.isGraphRefAll(graph)) {\n      return 'ALL';\n    }\n    if (F.isGraphRefNamed(graph)) {\n      return 'NAMED';\n    }\n    return SUBRULE(translateGraphRefDefSpec, graph);\n  },\n};\n\nexport const translateUpdateGraphLoad: AlgebraIndir<'translateUpdateGraphLoad', Algebra.Load, [UpdateOperationLoad]> = {\n  name: 'translateUpdateGraphLoad',\n  fun: ({ SUBRULE }) => ({ algebraFactory: AF }, op) => AF.createLoad(\n    SUBRULE(translateNamed, op.source),\n    op.destination ? SUBRULE(translateNamed, op.destination.graph) : undefined,\n    op.silent,\n  ),\n};\n"]}