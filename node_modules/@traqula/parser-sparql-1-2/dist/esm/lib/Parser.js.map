{"version":3,"file":"Parser.js","sourceRoot":"","sources":["../../../lib/Parser.ts"],"names":[],"mappings":"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","sourcesContent":["import { ParserBuilder } from '@traqula/core';\nimport type { Patch, Wrap, ParserBuildArgs } from '@traqula/core';\nimport { sparql11ParserBuilder } from '@traqula/parser-sparql-1-1';\nimport {\n  gram as g11,\n  sparqlCodepointEscape,\n} from '@traqula/rules-sparql-1-1';\nimport type {\n  TermIri,\n} from '@traqula/rules-sparql-1-1';\nimport { completeParseContext, copyParseContext, gram as S12, lex as l12 } from '@traqula/rules-sparql-1-2';\nimport type * as T12 from '@traqula/rules-sparql-1-2';\n\nexport const sparql12ParserBuilder = ParserBuilder.create(sparql11ParserBuilder)\n  .widenContext<T12.SparqlContext>()\n  .typePatch<{\n    /// GeneralFile\n    queryOrUpdate: [ T12.SparqlQuery];\n    /// Query Unit file\n    [g11.selectQuery.name]: [Omit<T12.QuerySelect, g11.HandledByBase>];\n    [g11.subSelect.name]: [ Omit<T12.SubSelect, 'prefixes'>];\n    [g11.selectClause.name]: [Wrap<Pick<T12.QuerySelect, 'variables' | 'distinct' | 'reduced'>>];\n    [g11.constructQuery.name]: [Omit<T12.QueryConstruct, g11.HandledByBase>];\n    [g11.describeQuery.name]: [Omit<T12.QueryDescribe, g11.HandledByBase>];\n    [g11.askQuery.name]: [Omit<T12.QueryAsk, g11.HandledByBase>];\n    [g11.valuesClause.name]: [T12.PatternValues[] | undefined];\n    [g11.constructTemplate.name]: [Wrap<T12.PatternBgp>];\n    [g11.constructTriples.name]: [T12.PatternBgp];\n    /// Update Unit file\n    [g11.update1.name]: [T12.UpdateOperation];\n    [g11.load.name]: [T12.UpdateOperationLoad];\n    [g11.clear.name]: [T12.UpdateOperationClear];\n    [g11.drop.name]: [T12.UpdateOperationDrop];\n    [g11.create.name]: [T12.UpdateOperationCreate];\n    [g11.add.name]: [T12.UpdateOperationAdd];\n    [g11.move.name]: [T12.UpdateOperationMove];\n    [g11.copy.name]: [T12.UpdateOperationCopy];\n    [g11.quadPattern.name]: [Wrap<T12.Quads[]>];\n    [g11.quadData.name]: [Wrap<T12.Quads[]>];\n    [g11.insertData.name]: [T12.UpdateOperationInsertData];\n    [g11.deleteData.name]: [T12.UpdateOperationDeleteData];\n    [g11.deleteWhere.name]: [T12.UpdateOperationDeleteWhere];\n    [g11.modify.name]: [T12.UpdateOperationModify];\n    [g11.deleteClause.name]: [Wrap<T12.Quads[]>];\n    [g11.insertClause.name]: [Wrap<T12.Quads[]>];\n    [g11.graphOrDefault.name]: [T12.GraphRefDefault | T12.GraphRefSpecific];\n    [g11.graphRef.name]: [T12.GraphRefSpecific];\n    [g11.graphRefAll.name]: [T12.GraphRef];\n    [g11.quads.name]: [Wrap<T12.Quads[]>];\n    [g11.quadsNotTriples.name]: [T12.GraphQuads];\n    /// Built-in functions\n    [g11.builtInStr.name]: [T12.ExpressionOperation];\n    [g11.builtInLang.name]: [T12.ExpressionOperation];\n    [g11.builtInLangmatches.name]: [T12.ExpressionOperation];\n    [g11.builtInDatatype.name]: [T12.ExpressionOperation];\n    [g11.builtInBound.name]: [T12.ExpressionOperation];\n    [g11.builtInIri.name]: [T12.ExpressionOperation];\n    [g11.builtInUri.name]: [T12.ExpressionOperation];\n    [g11.builtInBnodeSparqlJs.name]: [T12.ExpressionOperation];\n    [g11.builtInRand.name]: [T12.ExpressionOperation];\n    [g11.builtInAbs.name]: [T12.ExpressionOperation];\n    [g11.builtInCeil.name]: [T12.ExpressionOperation];\n    [g11.builtInFloor.name]: [T12.ExpressionOperation];\n    [g11.builtInRound.name]: [T12.ExpressionOperation];\n    [g11.builtInConcat.name]: [T12.ExpressionOperation];\n    [g11.substringExpression.name]: [T12.ExpressionOperation];\n    [g11.builtInStrlen.name]: [T12.ExpressionOperation];\n    [g11.strReplaceExpression.name]: [T12.ExpressionOperation];\n    [g11.builtInUcase.name]: [T12.ExpressionOperation];\n    [g11.builtInLcase.name]: [T12.ExpressionOperation];\n    [g11.builtInEncode_for_uri.name]: [T12.ExpressionOperation];\n    [g11.builtInContains.name]: [T12.ExpressionOperation];\n    [g11.builtInStrstarts.name]: [T12.ExpressionOperation];\n    [g11.builtInStrends.name]: [T12.ExpressionOperation];\n    [g11.builtInStrbefore.name]: [T12.ExpressionOperation];\n    [g11.builtInStrafter.name]: [T12.ExpressionOperation];\n    [g11.builtInYear.name]: [T12.ExpressionOperation];\n    [g11.builtInMonth.name]: [T12.ExpressionOperation];\n    [g11.builtInDay.name]: [T12.ExpressionOperation];\n    [g11.builtInHours.name]: [T12.ExpressionOperation];\n    [g11.builtInMinutes.name]: [T12.ExpressionOperation];\n    [g11.builtInSeconds.name]: [T12.ExpressionOperation];\n    [g11.builtInTimezone.name]: [T12.ExpressionOperation];\n    [g11.builtInTz.name]: [T12.ExpressionOperation];\n    [g11.builtInNow.name]: [T12.ExpressionOperation];\n    [g11.builtInUuid.name]: [T12.ExpressionOperation];\n    [g11.builtInStruuid.name]: [T12.ExpressionOperation];\n    [g11.builtInMd5.name]: [T12.ExpressionOperation];\n    [g11.builtInSha1.name]: [T12.ExpressionOperation];\n    [g11.builtInSha256.name]: [T12.ExpressionOperation];\n    [g11.builtInSha384.name]: [T12.ExpressionOperation];\n    [g11.builtInSha512.name]: [T12.ExpressionOperation];\n    [g11.builtInCoalesce.name]: [T12.ExpressionOperation];\n    [g11.builtInIf.name]: [T12.ExpressionOperation];\n    [g11.builtInStrlang.name]: [T12.ExpressionOperation];\n    [g11.builtInStrdt.name]: [T12.ExpressionOperation];\n    [g11.builtInSameterm.name]: [T12.ExpressionOperation];\n    [g11.builtInIsiri.name]: [T12.ExpressionOperation];\n    [g11.builtInIsuri.name]: [T12.ExpressionOperation];\n    [g11.builtInIsblank.name]: [T12.ExpressionOperation];\n    [g11.builtInIsliteral.name]: [T12.ExpressionOperation];\n    [g11.builtInIsnumeric.name]: [T12.ExpressionOperation];\n    [g11.existsFunc.name]: [T12.ExpressionPatternOperation];\n    [g11.notExistsFunc.name]: [T12.ExpressionPatternOperation];\n    [g11.aggregateCount.name]: [T12.ExpressionAggregateOnWildcard | T12.ExpressionAggregateDefault];\n    [g11.aggregateSum.name]: [T12.ExpressionAggregateDefault];\n    [g11.aggregateMin.name]: [T12.ExpressionAggregateDefault];\n    [g11.aggregateMax.name]: [T12.ExpressionAggregateDefault];\n    [g11.aggregateAvg.name]: [T12.ExpressionAggregateDefault];\n    [g11.aggregateSample.name]: [T12.ExpressionAggregateDefault];\n    [g11.aggregateGroup_concat.name]: [T12.ExpressionAggregateDefault | T12.ExpressionAggregateSeparator];\n    [g11.aggregate.name]: [T12.ExpressionAggregate];\n    [g11.builtInCall.name]: [T12.Expression];\n    /// DatasetClause\n    [g11.datasetClause.name]: [Wrap<T12.DatasetClauses['clauses'][0]>];\n    [g11.defaultGraphClause.name]: [T12.TermIri];\n    [g11.usingClause.name]: [Wrap<T12.DatasetClauses['clauses'][0]>];\n    [g11.datasetClauseStar.name]: [T12.DatasetClauses];\n    [g11.usingClauseStar.name]: [T12.DatasetClauses];\n    [g11.namedGraphClause.name]: [Wrap<T12.TermIri>];\n    [g11.sourceSelector.name]: [T12.TermIri];\n    // Expression file\n    [g11.argList.name]: [Wrap<Patch<g11.IArgList, { args: T12.Expression[] }>>];\n    [g11.expressionList.name]: [Wrap<T12.Expression[]>];\n    [g11.expression.name]: [T12.Expression];\n    [g11.conditionalOrExpression.name]: [T12.ExpressionOperation | T12.Expression];\n    [g11.conditionalAndExpression.name]: [T12.Expression];\n    [g11.valueLogical.name]: [T12.Expression];\n    [g11.relationalExpression.name]: [T12.ExpressionOperation | T12.Expression];\n    [g11.numericExpression.name]: [T12.Expression];\n    [g11.additiveExpression.name]: [T12.Expression];\n    [g11.multiplicativeExpression.name]: [T12.Expression];\n    [g11.unaryExpression.name]: [T12.Expression];\n    [g11.primaryExpression.name]: [T12.Expression];\n    [g11.brackettedExpression.name]: [T12.Expression];\n    [g11.iriOrFunction.name]: [T12.TermIri | T12.ExpressionFunctionCall];\n    /// General\n    [g11.prologue.name]: [T12.ContextDefinition[]];\n    [g11.baseDecl.name]: [T12.ContextDefinition];\n    [g11.prefixDecl.name]: [T12.ContextDefinition];\n    [g11.verb.name]: [T12.TermVariable | T12.TermIri];\n    [g11.varOrTerm.name]: [T12.Term];\n    [g11.varOrIri.name]: [T12.TermIri | T12.TermVariable];\n    [g11.var_.name]: [T12.TermVariable];\n    [g11.graphTerm.name]: [T12.GraphTerm];\n    /// Literals\n    [g11.rdfLiteral.name]: [T12.TermLiteral];\n    [g11.numericLiteral.name]: [T12.TermLiteralTyped];\n    [g11.numericLiteralUnsigned.name]: [T12.TermLiteralTyped];\n    [g11.numericLiteralPositive.name]: [T12.TermLiteralTyped];\n    [g11.numericLiteralNegative.name]: [T12.TermLiteralTyped];\n    [g11.booleanLiteral.name]: [T12.TermLiteralTyped];\n    [g11.string.name]: [T12.TermLiteralStr];\n    [g11.iri.name]: [T12.TermIri];\n    [g11.iriFull.name]: [T12.TermIriFull];\n    [g11.prefixedName.name]: [T12.TermIriPrefixed];\n    [g11.blankNode.name]: [T12.TermBlank];\n    [g11.verbA.name]: [T12.TermIriFull];\n    /// / Paths: unchanged\n    /// / SolutionModifiers\n    [g11.solutionModifier.name]: [T12.SolutionModifiers];\n    [g11.groupClause.name]: [T12.SolutionModifierGroup];\n    [g11.groupCondition.name]: [T12.Expression | T12.SolutionModifierGroupBind];\n    [g11.havingClause.name]: [T12.SolutionModifierHaving];\n    [g11.havingCondition.name]: [T12.Expression];\n    [g11.orderClause.name]: [T12.SolutionModifierOrder];\n    [g11.orderCondition.name]: [T12.Ordering];\n    [g11.limitOffsetClauses.name]: [T12.SolutionModifierLimitOffset];\n    [g11.limitClause.name]: [Wrap<number>];\n    [g11.offsetClause.name]: [ Wrap<number>];\n    /// tripleBlock\n    [g11.triplesBlock.name]: [T12.PatternBgp];\n    [g11.triplesSameSubject.name]: [T12.BasicGraphPattern];\n    [g11.triplesSameSubjectPath.name]: [T12.BasicGraphPattern];\n    [g11.triplesTemplate.name]: [T12.PatternBgp];\n    [g11.propertyList.name]: [T12.TripleNesting[]];\n    [g11.propertyListPath.name]: [T12.TripleNesting[]];\n    [g11.propertyListNotEmpty.name]: [T12.TripleNesting[]];\n    [g11.propertyListPathNotEmpty.name]: [T12.TripleNesting[]];\n    [g11.verbPath.name]: [T12.Path];\n    [g11.verbSimple.name]: [T12.TermVariable];\n    [g11.objectList.name]: [T12.TripleNesting[], [ T12.TripleNesting['subject'], T12.TripleNesting['predicate'] ]];\n    [g11.objectListPath.name]: [T12.TripleNesting, [ T12.TripleNesting['subject'], T12.TripleNesting['predicate'] ]];\n    [g11.object.name]: [T12.TripleNesting, [ T12.TripleNesting['subject'], T12.TripleNesting['predicate'] ]];\n    [g11.objectPath.name]: [T12.TripleNesting[], [ T12.TripleNesting['subject'], T12.TripleNesting['predicate'] ]];\n    [g11.collection.name]: [T12.TripleCollectionList];\n    [g11.collectionPath.name]: [T12.TripleCollectionList];\n    [g11.triplesNode.name]: [T12.TripleCollection];\n    [g11.triplesNodePath.name]: [T12.TripleCollection];\n    [g11.blankNodePropertyList.name]: [T12.TripleCollectionBlankNodeProperties];\n    [g11.blankNodePropertyListPath.name]: [T12.TripleCollectionBlankNodeProperties];\n    [g11.graphNode.name]: [T12.Term | T12.TripleCollection];\n    [g11.graphNodePath.name]: [T12.Term | T12.TripleCollection];\n    /// WhereClause\n    [g11.whereClause.name]: [Wrap<T12.PatternGroup>];\n    [g11.groupGraphPattern.name]: [T12.PatternGroup];\n    [g11.groupGraphPatternSub.name]: [T12.Pattern[]];\n    [g11.graphPatternNotTriples.name]: [Exclude<T12.Pattern, T12.SubSelect | T12.PatternBgp>];\n    [g11.optionalGraphPattern.name]: [T12.PatternOptional];\n    [g11.graphGraphPattern.name]: [T12.PatternGraph];\n    [g11.serviceGraphPattern.name]: [T12.PatternService];\n    [g11.bind.name]: [T12.PatternBind];\n    [g11.inlineData.name]: [T12.PatternValues];\n    [g11.dataBlock.name]: [T12.PatternValues];\n    [g11.inlineDataOneVar.name]: [T12.PatternValues];\n    [g11.inlineDataFull.name]: [T12.PatternValues];\n    [g11.dataBlockValue.name]: [T12.TermIri | T12.TermLiteral | undefined];\n    [g11.minusGraphPattern.name]: [T12.PatternMinus];\n    [g11.groupOrUnionGraphPattern.name]: [T12.PatternGroup | T12.PatternUnion];\n    [g11.filter.name]: [T12.PatternFilter];\n    [g11.constraint.name]: [T12.Expression];\n    [g11.functionCall.name]: [T12.ExpressionFunctionCall];\n  }>()\n  .addMany(\n    S12.reifiedTripleBlock,\n    S12.reifiedTripleBlockPath,\n    S12.reifier,\n    S12.varOrReifierId,\n    S12.annotation,\n    S12.annotationPath,\n    S12.annotationBlockPath,\n    S12.annotationBlock,\n    S12.reifiedTriple,\n    S12.reifiedTripleSubject,\n    S12.reifiedTripleObject,\n    S12.tripleTerm,\n    S12.tripleTermSubject,\n    S12.tripleTermObject,\n    S12.tripleTermData,\n    S12.tripleTermDataSubject,\n    S12.tripleTermDataObject,\n    S12.exprTripleTerm,\n    S12.exprTripleTermSubject,\n    S12.exprTripleTermObject,\n  )\n  .addMany(\n    S12.versionDecl,\n    S12.versionSpecifier,\n  )\n  .addMany(\n    S12.buildInLangDir,\n    S12.buildInLangStrDir,\n    S12.buildInHasLang,\n    S12.buildInHasLangDir,\n    S12.buildInIsTriple,\n    S12.buildInTriple,\n    S12.buildInSubject,\n    S12.buildInPredicate,\n    S12.buildInObject,\n  )\n  .patchRule(S12.dataBlockValue)\n  .patchRule(S12.triplesSameSubject)\n  .patchRule(S12.triplesSameSubjectPath)\n  .patchRule(S12.object)\n  .patchRule(S12.objectPath)\n  .patchRule(S12.graphNode)\n  .patchRule(S12.graphNodePath)\n  .patchRule(S12.varOrTerm)\n  .deleteRule(g11.graphTerm.name)\n  .patchRule(S12.primaryExpression)\n  .patchRule(S12.builtInCall)\n  .patchRule(S12.rdfLiteral)\n  .patchRule(S12.unaryExpression)\n  .patchRule(S12.prologue);\n\nexport type SparqlParser = ReturnType<typeof sparql12ParserBuilder.build>;\n\n/**\n * Generator that can generate a SPARQL 1.2 AST given a SPARQL 1.2 string.\n */\nexport class Parser {\n  private readonly parser: SparqlParser;\n  protected readonly defaultContext: T12.SparqlContext;\n\n  public constructor(\n    args: Pick<ParserBuildArgs, 'parserConfig' | 'lexerConfig'> & { defaultContext?: Partial<T12.SparqlContext> } = {},\n  ) {\n    this.parser = sparql12ParserBuilder.build({\n      ...args,\n      queryPreProcessor: sparqlCodepointEscape,\n      tokenVocabulary: l12.sparql12LexerBuilder.tokenVocabulary,\n    });\n    this.defaultContext = completeParseContext(args.defaultContext ?? {});\n  }\n\n  /**\n   * Parse a query string starting from the\n   * [QueryUnit](https://www.w3.org/TR/sparql12-query/#rQueryUnit)\n   * or [QueryUpdate](https://www.w3.org/TR/sparql12-query/#rUpdateUnit) rules.\n   * @param query\n   * @param context\n   */\n  public parse(query: string, context: Partial<T12.SparqlContext> = {}): T12.SparqlQuery {\n    const ast = this.parser.queryOrUpdate(query, copyParseContext({ ...this.defaultContext, ...context }));\n    ast.loc = this.defaultContext.astFactory.sourceLocationInlinedSource(query, ast.loc, 0, Number.MAX_SAFE_INTEGER);\n    return ast;\n  }\n\n  /**\n   * Parse a query string starting from the [Path](https://www.w3.org/TR/sparql12-query/#rPath) grammar rule.\n   * @param query\n   * @param context\n   */\n  public parsePath(\n    query: string,\ncontext: Partial<T12.SparqlContext> = {},\n  ): (T12.Path & { prefixes: object }) | TermIri {\n    const ast = this.parser.path(query, copyParseContext({ ...this.defaultContext, ...context }));\n    ast.loc = this.defaultContext.astFactory.sourceLocationInlinedSource(query, ast.loc, 0, Number.MAX_SAFE_INTEGER);\n    if (this.defaultContext.astFactory.isPathPure(ast)) {\n      return {\n        ...ast,\n        prefixes: {},\n      };\n    }\n    return ast;\n  }\n}\n"]}