{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../lib/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { GeneratorBuilder } from '@traqula/core';\nimport type * as T11 from '@traqula/rules-sparql-1-1';\nimport { gram, completeGeneratorContext } from '@traqula/rules-sparql-1-1';\n\nexport const sparql11GeneratorBuilder = GeneratorBuilder.create(<const> [\n  gram.queryOrUpdate,\n  gram.query,\n  gram.selectQuery,\n  gram.constructQuery,\n  gram.describeQuery,\n  gram.askQuery,\n  gram.selectClause,\n])\n  .addMany(\n    gram.update,\n    gram.update1,\n    gram.load,\n    gram.clear,\n    gram.drop,\n    gram.create,\n    gram.copy,\n    gram.move,\n    gram.add,\n    gram.insertData,\n    gram.deleteData,\n    gram.deleteWhere,\n    gram.modify,\n    gram.graphRef,\n    gram.graphRefAll,\n    gram.quads,\n    gram.quadsNotTriples,\n  )\n  .addRule(gram.aggregate)\n  .addMany(\n    gram.datasetClauseStar,\n    gram.usingClauseStar,\n  )\n  .addMany(\n    gram.argList,\n    gram.expression,\n    gram.iriOrFunction,\n  )\n  .addMany(\n    gram.prologue,\n    gram.prefixDecl,\n    gram.baseDecl,\n    gram.varOrTerm,\n    gram.var_,\n    gram.graphTerm,\n  )\n  .addMany(\n    gram.rdfLiteral,\n    gram.iri,\n    gram.iriFull,\n    gram.prefixedName,\n    gram.blankNode,\n  )\n  .addRule(gram.pathGenerator)\n  .addMany(\n    gram.solutionModifier,\n    gram.groupClause,\n    gram.havingClause,\n    gram.orderClause,\n    gram.limitOffsetClauses,\n  )\n  .addMany(\n    gram.triplesBlock,\n    gram.collectionPath,\n    gram.blankNodePropertyListPath,\n    gram.triplesNodePath,\n    gram.graphNodePath,\n  )\n  .addMany(\n    gram.whereClause,\n    gram.generatePattern,\n    gram.groupGraphPattern,\n    gram.graphPatternNotTriples,\n    gram.optionalGraphPattern,\n    gram.graphGraphPattern,\n    gram.serviceGraphPattern,\n    gram.bind,\n    gram.inlineData,\n    gram.minusGraphPattern,\n    gram.groupOrUnionGraphPattern,\n    gram.filter,\n  );\n\nexport type SparqlGenerator = ReturnType<typeof sparql11GeneratorBuilder.build>;\n\n/**\n * Generator that can generate a SPARQL 1.1 query string given a SPARQL 1.1 Traqula AST.\n */\nexport class Generator {\n  protected readonly defaultContext: T11.SparqlGeneratorContext;\n  public constructor(defaultContext: Partial<T11.SparqlGeneratorContext> = {}) {\n    this.defaultContext = completeGeneratorContext(defaultContext);\n  }\n\n  private readonly generator: SparqlGenerator = sparql11GeneratorBuilder.build();\n\n  /**\n   * Generates a query string starting from the\n   * [QueryUnit](https://www.w3.org/TR/sparql11-query/#rQueryUnit)\n   * or [QueryUpdate](https://www.w3.org/TR/sparql11-query/#rUpdateUnit) rules.\n   * @param ast\n   * @param context\n   */\n  public generate(ast: T11.Query | T11.Update, context: Partial<T11.SparqlGeneratorContext> = {}): string {\n    return this.generator.queryOrUpdate(ast, { ...this.defaultContext, ...context }).trim();\n  }\n\n  /**\n   * Generates a query string starting from the [Path](https://www.w3.org/TR/sparql11-query/#rPath) grammar rule.\n   * @param ast\n   * @param context\n   */\n  public generatePath(ast: T11.Path, context: Partial<T11.SparqlGeneratorContext> = {}): string {\n    return this.generator.path(ast, completeGeneratorContext({ ...this.defaultContext, ...context }), undefined).trim();\n  }\n}\n"]}