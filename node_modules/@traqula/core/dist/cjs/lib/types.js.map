{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../lib/types.ts"],"names":[],"mappings":"","sourcesContent":["/**\n * Type that is used by the Traqula core package to type raw objects/ Data Transfer Objects (DTO).\n * Enforces the presence of a type string, and that in case the subType key is present, it also be a string.\n */\nexport interface Typed<Type extends string = string> {\n  type: Type;\n  subType?: string;\n}\n\n/**\n * A {@link Typed} object that is sure to have a subType\n */\nexport interface SubTyped<Type extends string = string, SubType extends string = string> extends Typed<Type> {\n  subType: SubType;\n}\n\n/**\n * Type used by the parser and generator builders of the core Traqula package to annotate\n * the relation between AST objects and the source string.\n */\nexport interface Localized {\n  loc: SourceLocation;\n}\n\n/**\n * Wrapper type for localization,\n * can be used to state localization information about any other type (including primitive types)\n */\nexport interface Wrap<T> extends Localized {\n  val: T;\n}\n\n/**\n * An AST node. Nodes are indexable by their types.\n * When generating, the SUBRULES called should be located within the current location range.\n */\nexport interface Node extends Localized, Typed {}\n\nexport interface SourceLocationBase {\n  sourceLocationType: string;\n}\n\n/**\n * SourceLocation type that annotates that the node represents the AST representation of\n * the given range in the source string.\n */\nexport interface SourceLocationSource extends SourceLocationBase {\n  sourceLocationType: 'source';\n  start: number;\n  end: number;\n}\n\n/**\n * Similar to {@link SourceLocationSource} but also carrying the source it related too.\n * All sourceLocation nodes that are descends of this one, relate themselves to this source.\n */\nexport interface SourceLocationInlinedSource extends SourceLocationBase, Localized {\n  sourceLocationType: 'inlinedSource';\n  /**\n   * The string that will be used as the source for this node and the descends of this node.\n   * Note that the generator will print the characters from newSource[0] until start. Likewise for the suffix.\n   */\n  newSource: string;\n  /**\n   * Behavior of the current loc, after replacing the source string.\n   */\n  loc: SourceLocation;\n  /**\n   * The range that this node replaces in the context of the original source.\n   */\n  start: number;\n  end: number;\n  startOnNew: number;\n  endOnNew: number;\n}\n\n/**\n * NoStringManifestation means the node does not have a string representation.\n * For example the literal '5' has an integer type (which is an AST node),\n * but the type does not have an associated string representation.\n * When set to true, the node will not be printed, start and end are meaningless in this case.\n */\nexport interface SourceLocationNoMaterialize extends SourceLocationBase {\n  sourceLocationType: 'noMaterialize';\n}\n\n/**\n * SourceLocation type that annotates that the node has been replaced\n *   in relation to the original string by a new string.\n * It means that this node should be generated, and that the source string from start to end has been changed.\n */\nexport interface SourceLocationStringReplace extends SourceLocationBase {\n  sourceLocationType: 'stringReplace';\n  /**\n   * The string that will replace the given range in the original source.\n   */\n  newSource: string;\n  /**\n   * The start of the region in the original source string that this node replaces.\n   */\n  start: number;\n  /**\n   * The end of the region in the original source string that this node replaces.\n   */\n  end: number;\n}\n\n/**\n * SourceLocation type that annotates that the node has been replaced in relation to the original string.\n * It means that this node should be generated, and that the source string from start to end has been changed.\n */\nexport interface SourceLocationNodeReplace extends SourceLocationBase {\n  sourceLocationType: 'nodeReplace';\n  /**\n   * The start of the region in the original source string that this node replaces.\n   */\n  start: number;\n  /**\n   * The end of the region in the original source string that this node replaces.\n   */\n  end: number;\n}\n/**\n * Must have an ancestor of type {@link SourceLocationNodeReplace}\n */\nexport interface SourceLocationNodeAutoGenerate extends SourceLocationBase {\n  sourceLocationType: 'autoGenerate';\n}\n\nexport type SourceLocation =\n  // Relate yourself to the source\n  | SourceLocationSource\n  // Add a new source\n  | SourceLocationInlinedSource\n  // No not generate anything for the current node and descendants\n  | SourceLocationNoMaterialize\n  // Replace some range by a string\n  | SourceLocationStringReplace\n  // Replace this node by some autogen\n  | SourceLocationNodeReplace\n  // Auto gen current node.\n  | SourceLocationNodeAutoGenerate;\n"]}