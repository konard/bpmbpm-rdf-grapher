{"version":3,"file":"AstFactory.js","sourceRoot":"","sources":["../../../lib/AstFactory.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,UAAU,IAAI,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAc1E;;GAEG;AACH,MAAM,OAAO,UAAW,SAAQ,eAAe;IACtC,UAAU,CACf,OAA8B,EAC9B,SAAkC,EAClC,MAA4B,EAC5B,GAAmB;QAEnB,OAAO;YACL,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,QAAQ;YACjB,OAAO;YACP,SAAS;YACT,MAAM;YACN,GAAG;SACJ,CAAC;IACJ,CAAC;IAEM,YAAY,CAAC,GAAW;QAC7B,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;IACjD,CAAC;IAEM,6BAA6B,CAClC,GAAmB,EACnB,OAAiC,EACjC,SAAqC,EACrC,MAA+B,EAC/B,OAAqD;QAErD,OAAO;YACL,IAAI,EAAE,kBAAkB;YACxB,OAAO,EAAE,eAAe;YACxB,OAAO,EAAE,CAAE,IAAI,CAAC,MAAM,CAA+B,OAAO,EAAE,SAAS,EAA+B,MAAM,CAAC,CAAE;YAC/G,UAAU,EAAE,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC;YACvE,GAAG;SACJ,CAAC;IACJ,CAAC;IAEM,+BAA+B,CAAC,GAAW;QAChD,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,kBAAkB,EAAE,eAAe,CAAC,CAAC;IACpE,CAAC;IAEe,mCAAmC,CACjD,UAA8C,EAC9C,OAAwB,EACxB,GAAmB;QAEnB,OAAiD;YAC/C,IAAI,EAAE,kBAAkB;YACxB,OAAO,EAAE,qBAAqB;YAC9B,OAAO;YACP,UAAU;YACV,GAAG;SAC0C,CAAC;IAClD,CAAC;IAED;;OAEG;IACa,MAAM,GACpB,CAAC,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAoB;QACvD,IAAI,EAAE,QAAQ;QACd,OAAO;QACP,SAAS;QACT,MAAM;QACN,WAAW,EAAE,EAAE;QACf,GAAG,EAAE,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,SAAS,EAAE,MAAM,CAAC;KACpC,CAAA,CAAC;IAErB,eAAe,CACpB,OAAiC,EACjC,SAAqC,EACrC,MAA+B,EAC/B,WAA0B,EAC1B,GAAoB;QAEpB,OAAO;YACL,IAAI,EAAE,QAAQ;YACd,OAAO;YACP,SAAS;YACT,MAAM;YACN,WAAW,EAAE,WAAW,IAAI,EAAE;YAC9B,GAAG,EAAE,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,WAAW,IAAI,EAAE,CAAC;SAClF,CAAC;IACJ,CAAC;IAEM,wBAAwB,CAAC,OAAe,EAAE,GAAmB;QAClE,OAAO;YACL,IAAI,EAAE,YAAY;YAClB,OAAO,EAAE,SAAS;YAClB,OAAO;YACP,GAAG;SACJ,CAAC;IACJ,CAAC;IAEM,0BAA0B,CAAC,GAAW;QAC3C,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;IACxD,CAAC;CACF","sourcesContent":["import type { SourceLocation, SubTyped } from '@traqula/core';\nimport { AstFactory as Sparql11Factory } from '@traqula/rules-sparql-1-1';\nimport type * as T11 from '@traqula/rules-sparql-1-1';\nimport type {\n  Annotation,\n  ContextDefinitionVersion,\n  TermBlank,\n  TermIri,\n  TermTriple,\n  TermVariable,\n  TripleCollectionBlankNodeProperties,\n  TripleCollectionReifiedTriple,\n  TripleNesting,\n} from './sparql12Types.js';\n\n/**\n * A factory that helps you create, and check types for AST nodes for SPARQL 1.2\n */\nexport class AstFactory extends Sparql11Factory {\n  public termTriple(\n    subject: TermTriple['subject'],\n    predicate: TermTriple['predicate'],\n    object: TermTriple['object'],\n    loc: SourceLocation,\n  ): TermTriple {\n    return {\n      type: 'term',\n      subType: 'triple',\n      subject,\n      predicate,\n      object,\n      loc,\n    };\n  }\n\n  public isTermTriple(obj: object): obj is SubTyped<'term', 'triple'> {\n    return this.isOfSubType(obj, 'term', 'triple');\n  }\n\n  public tripleCollectionReifiedTriple(\n    loc: SourceLocation,\n    subject: TripleNesting['subject'],\n    predicate: TripleNesting['predicate'],\n    object: TripleNesting['object'],\n    reifier?: TripleCollectionReifiedTriple['identifier'],\n  ): TripleCollectionReifiedTriple {\n    return {\n      type: 'tripleCollection',\n      subType: 'reifiedTriple',\n      triples: [ this.triple(<T11.TripleNesting['subject']>subject, predicate, <T11.TripleNesting['object']>object) ],\n      identifier: reifier ?? this.termBlank(undefined, this.sourceLocation()),\n      loc,\n    };\n  }\n\n  public isTripleCollectionReifiedTriple(obj: object): obj is SubTyped<'tripleCollection', 'reifiedTriple'> {\n    return this.isOfSubType(obj, 'tripleCollection', 'reifiedTriple');\n  }\n\n  public override tripleCollectionBlankNodeProperties(\n    identifier: TermBlank | TermVariable | TermIri,\n    triples: TripleNesting[],\n    loc: SourceLocation,\n  ): T11.TripleCollectionBlankNodeProperties {\n    return <T11.TripleCollectionBlankNodeProperties> {\n      type: 'tripleCollection',\n      subType: 'blankNodeProperties',\n      triples,\n      identifier,\n      loc,\n    } satisfies TripleCollectionBlankNodeProperties;\n  }\n\n  /**\n   * Overwritten triple constructor to always contain an empty annotations list\n   */\n  public override triple: Sparql11Factory['triple'] =\n    (subject, predicate, object, loc) => <T11.TripleNesting> {\n      type: 'triple',\n      subject,\n      predicate,\n      object,\n      annotations: [],\n      loc: loc ?? this.sourceLocation(subject, predicate, object),\n    } satisfies TripleNesting;\n\n  public annotatedTriple(\n    subject: TripleNesting['subject'],\n    predicate: TripleNesting['predicate'],\n    object: TripleNesting['object'],\n    annotations?: Annotation[],\n    loc?: SourceLocation,\n  ): TripleNesting {\n    return {\n      type: 'triple',\n      subject,\n      predicate,\n      object,\n      annotations: annotations ?? [],\n      loc: loc ?? this.sourceLocation(subject, predicate, object, ...annotations ?? []),\n    };\n  }\n\n  public contextDefinitionVersion(version: string, loc: SourceLocation): ContextDefinitionVersion {\n    return {\n      type: 'contextDef',\n      subType: 'version',\n      version,\n      loc,\n    };\n  }\n\n  public isContextDefinitionVersion(obj: object): obj is SubTyped<'contextDef', 'version'> {\n    return this.isOfSubType(obj, 'contextDef', 'version');\n  }\n}\n"]}