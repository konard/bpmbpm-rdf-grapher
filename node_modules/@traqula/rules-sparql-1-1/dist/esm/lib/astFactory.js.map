{"version":3,"file":"astFactory.js","sourceRoot":"","sources":["../../../lib/astFactory.ts"],"names":[],"mappings":"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","sourcesContent":["import type { SourceLocation, SubTyped, Typed } from '@traqula/core';\nimport { AstCoreFactory } from '@traqula/core';\nimport { ContextFactoryMixin } from './factoryMixins/ContextFactory.js';\nimport { ExpressionFactoryMixin } from './factoryMixins/ExpressionFactory.js';\nimport { GraphRefFactoryMixin } from './factoryMixins/GraphRefFactory.js';\nimport { asArg } from './factoryMixins/mixins.js';\nimport { PathFactoryMixin } from './factoryMixins/PathFactory.js';\nimport { PatternFactoryMixin } from './factoryMixins/Patternfactory.js';\nimport { QueryFactoryMixin } from './factoryMixins/QueryFactory.js';\nimport { SolutionModifiersFactoryMixin } from './factoryMixins/SolutionModifiersFactory.js';\nimport { TermFactoryMixin } from './factoryMixins/TermFactory.js';\nimport { UpdateOperationFactoryMixin } from './factoryMixins/UpdateOperationFactory.js';\nimport type {\n  DatasetClauses,\n  GraphNode,\n  GraphQuads,\n  PatternBgp,\n  Sparql11Nodes,\n  Term,\n  TermBlank,\n  TermIri,\n  TermVariable,\n  TripleCollectionBlankNodeProperties,\n  TripleCollectionList,\n  TripleNesting,\n  Update,\n  Wildcard,\n} from './Sparql11types.js';\n\n/**\n * A factory that helps you create, and check types for AST nodes for SPARQL 1.1\n */\nexport class AstFactory extends asArg(AstCoreFactory)\n  .call(ContextFactoryMixin)\n  .call(ExpressionFactoryMixin)\n  .call(GraphRefFactoryMixin)\n  .call(PathFactoryMixin)\n  .call(PatternFactoryMixin)\n  .call(QueryFactoryMixin)\n  .call(SolutionModifiersFactoryMixin)\n  .call(TermFactoryMixin)\n  .call(UpdateOperationFactoryMixin)\n  .returns() {\n  public alwaysSparql11(obj: object): obj is Sparql11Nodes {\n    return true;\n  }\n\n  public isPath(obj: object): obj is SubTyped<'term', 'namedNode'> | Typed<'path'> {\n    return this.isPathPure(obj) || this.isTermNamed(obj);\n  }\n\n  public isExpression(obj: object):\n    obj is SubTyped<'term', 'namedNode' | 'variable' | 'literal'> | Typed<'expression'> {\n    return this.isExpressionPure(obj) || this.isTermNamed(obj) || this.isTermVariable(obj) || this.isTermLiteral(obj);\n  }\n\n  public graphNodeIdentifier(graphNode: GraphNode): Term {\n    return graphNode.type === 'tripleCollection' ? graphNode.identifier : graphNode;\n  }\n\n  public triple(\n    subject: TripleNesting['subject'],\n    predicate: TripleNesting['predicate'],\n    object: TripleNesting['object'],\n    loc?: SourceLocation,\n  ): TripleNesting {\n    return {\n      type: 'triple',\n      subject,\n      predicate,\n      object,\n      loc: loc ?? this.sourceLocation(subject, predicate, object),\n    };\n  }\n\n  public isTriple(obj: object): obj is Typed<'triple'> {\n    return this.isOfType(obj, 'triple');\n  }\n\n  public datasetClauses(clauses: DatasetClauses['clauses'], loc: SourceLocation): DatasetClauses {\n    return {\n      type: 'datasetClauses',\n      clauses,\n      loc,\n    };\n  }\n\n  public isDatasetClauses(obj: object): obj is Typed<'datasetClauses'> {\n    return this.isOfType(obj, 'datasetClauses');\n  }\n\n  public wildcard(loc: SourceLocation): Wildcard {\n    return { type: 'wildcard', loc };\n  }\n\n  public isWildcard(obj: object): obj is Typed<'wildcard'> {\n    return this.isOfType(obj, 'wildcard');\n  }\n\n  public isTripleCollection(obj: object): obj is Typed<'tripleCollection'> {\n    return this.isOfType(obj, 'tripleCollection');\n  }\n\n  public tripleCollectionBlankNodeProperties(\n    identifier: TermBlank,\n    triples: TripleNesting[],\n    loc: SourceLocation,\n  ): TripleCollectionBlankNodeProperties {\n    return {\n      type: 'tripleCollection',\n      subType: 'blankNodeProperties',\n      identifier,\n      triples,\n      loc,\n    };\n  }\n\n  public isTripleCollectionBlankNodeProperties(obj: object):\n    obj is SubTyped<'tripleCollection', 'blankNodeProperties'> {\n    return this.isOfSubType(obj, 'tripleCollection', 'blankNodeProperties');\n  }\n\n  public tripleCollectionList(\n    identifier: TermBlank,\n    triples: TripleNesting[],\n    loc: SourceLocation,\n  ): TripleCollectionList {\n    return {\n      type: 'tripleCollection',\n      subType: 'list',\n      identifier,\n      triples,\n      loc,\n    };\n  }\n\n  public isTripleCollectionList(obj: object):\n    obj is SubTyped<'tripleCollection', 'list'> {\n    return this.isOfSubType(obj, 'tripleCollection', 'list');\n  }\n\n  public graphQuads(graph: TermIri | TermVariable, triples: PatternBgp, loc: SourceLocation): GraphQuads {\n    return {\n      type: 'graph',\n      graph,\n      triples,\n      loc,\n    };\n  }\n\n  public isGraphQuads(obj: object): obj is GraphQuads {\n    return super.isOfType(obj, 'graph');\n  }\n\n  public isUpdate(obj: object): obj is Update {\n    return super.isOfType(obj, 'update');\n  }\n}\n"]}