{"version":3,"file":"QueryFactory.js","sourceRoot":"","sources":["../../../../lib/factoryMixins/QueryFactory.ts"],"names":[],"mappings":"AAcA,MAAM,QAAQ,GAAa,OAAO,CAAC;AAEnC,4DAA4D;AAC5D,MAAM,UAAU,iBAAiB,CAA4C,IAAW;IACtF,OAAO,MAAM,YAAa,SAAQ,IAAI;QAC7B,OAAO,CAAC,GAAW;YACxB,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;QACtC,CAAC;QAEM,aAAa,CAAC,GAAW;YAC9B,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACnD,CAAC;QAEM,cAAc,CACnB,GAAmB,EACnB,OAA4B,EAC5B,QAAoB,EACpB,KAAmB,EACnB,iBAAoC,EACpC,QAAwB,EACxB,MAAsB;YAEtB,OAAO;gBACL,IAAI,EAAE,OAAO;gBACb,OAAO,EAAE,WAAW;gBACpB,OAAO;gBACP,QAAQ;gBACR,KAAK;gBACL,iBAAiB;gBACjB,QAAQ;gBACR,MAAM;gBACN,GAAG;aACJ,CAAC;QACJ,CAAC;QAEM,gBAAgB,CAAC,GAAW;YACjC,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;QACtD,CAAC;QAEM,eAAe,CAAC,GAAW;YAChC,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;QACrD,CAAC;QAEM,UAAU,CAAC,GAAW;YAC3B,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;QAChD,CAAC;QAEM,WAAW,CAAC,GAAkD,EAAE,GAAmB;YACxF,OAAO;gBACL,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,QAAQ;gBACjB,GAAG,GAAG;gBACN,GAAG;aACJ,CAAC;QACJ,CAAC;KACF,CAAC;AACJ,CAAC","sourcesContent":["import type { AstCoreFactory, SourceLocation, Typed, SubTyped } from '@traqula/core';\nimport type {\n  ContextDefinition,\n  DatasetClauses,\n  PatternBgp,\n  PatternGroup,\n  PatternValues,\n  QueryConstruct,\n  QuerySelect,\n  SolutionModifiers,\n} from '../Sparql11types.js';\nimport type { Constructor } from './mixins.js';\n\ntype NodeType = 'query';\nconst nodeType: NodeType = 'query';\n\n// eslint-disable-next-line ts/explicit-function-return-type\nexport function QueryFactoryMixin<TBase extends Constructor<AstCoreFactory>>(Base: TBase) {\n  return class QueryFactory extends Base {\n    public isQuery(obj: object): obj is Typed<NodeType> {\n      return this.isOfType(obj, nodeType);\n    }\n\n    public isQuerySelect(obj: object): obj is SubTyped<NodeType, 'select'> {\n      return this.isOfSubType(obj, nodeType, 'select');\n    }\n\n    public queryConstruct(\n      loc: SourceLocation,\n      context: ContextDefinition[],\n      template: PatternBgp,\n      where: PatternGroup,\n      solutionModifiers: SolutionModifiers,\n      datasets: DatasetClauses,\n      values?: PatternValues,\n    ): QueryConstruct {\n      return {\n        type: 'query',\n        subType: 'construct',\n        context,\n        template,\n        where,\n        solutionModifiers,\n        datasets,\n        values,\n        loc,\n      };\n    }\n\n    public isQueryConstruct(obj: object): obj is SubTyped<NodeType, 'construct'> {\n      return this.isOfSubType(obj, nodeType, 'construct');\n    }\n\n    public isQueryDescribe(obj: object): obj is SubTyped<NodeType, 'describe'> {\n      return this.isOfSubType(obj, nodeType, 'describe');\n    }\n\n    public isQueryAsk(obj: object): obj is SubTyped<NodeType, 'ask'> {\n      return this.isOfSubType(obj, nodeType, 'ask');\n    }\n\n    public querySelect(arg: Omit<QuerySelect, 'type' | 'subType' | 'loc'>, loc: SourceLocation): QuerySelect {\n      return {\n        type: nodeType,\n        subType: 'select',\n        ...arg,\n        loc,\n      };\n    }\n  };\n}\n"]}