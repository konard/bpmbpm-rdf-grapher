{"version":3,"file":"builtIn.js","sourceRoot":"","sources":["../../../../lib/grammar/builtIn.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IOrAlt } from '@traqula/chevrotain';\nimport type { ImplArgs } from '@traqula/core';\nimport {\n  unCapitalize,\n} from '@traqula/core';\nimport {\n  funcExprOrNil1,\n  baseAggregateFunc,\n  funcExpr1,\n  funcExpr2,\n  funcExpr2or3,\n  funcExpr3,\n  funcExpr3or4,\n  funcExprList1,\n  funcGroupGraphPattern,\n  funcNil1,\n  funcVar1,\n} from '../expressionHelpers.js';\nimport * as l from '../lexer/index.js';\nimport type { SparqlGrammarRule, SparqlRule } from '../sparql11HelperTypes.js';\nimport type {\n  Expression,\n  ExpressionAggregate,\n  ExpressionAggregateDefault,\n  ExpressionAggregateOnWildcard,\n  ExpressionAggregateSeparator,\n  Wildcard,\n} from '../Sparql11types.js';\nimport { expression } from './expression.js';\nimport { string, stringEscapedLexical } from './literals.js';\n\nexport const builtInStr = funcExpr1(l.builtIn.str);\nexport const builtInLang = funcExpr1(l.builtIn.lang);\nexport const builtInLangmatches = funcExpr2(l.builtIn.langmatches);\nexport const builtInDatatype = funcExpr1(l.builtIn.datatype);\nexport const builtInBound = funcVar1(l.builtIn.bound);\nexport const builtInIri = funcExpr1(l.builtIn.iri);\nexport const builtInUri = funcExpr1(l.builtIn.uri);\nexport const builtInBnodeSparqlJs = funcExprOrNil1(l.builtIn.bnode);\nexport const builtInRand = funcNil1(l.builtIn.rand);\nexport const builtInAbs = funcExpr1(l.builtIn.abs);\nexport const builtInCeil = funcExpr1(l.builtIn.ceil);\nexport const builtInFloor = funcExpr1(l.builtIn.floor);\nexport const builtInRound = funcExpr1(l.builtIn.round);\nexport const builtInConcat = funcExprList1(l.builtIn.concat);\nexport const builtInStrlen = funcExpr1(l.builtIn.strlen);\nexport const builtInUcase = funcExpr1(l.builtIn.ucase);\nexport const builtInLcase = funcExpr1(l.builtIn.lcase);\nexport const builtInEncode_for_uri = funcExpr1(l.builtIn.encode_for_uri);\nexport const builtInContains = funcExpr2(l.builtIn.contains);\nexport const builtInStrstarts = funcExpr2(l.builtIn.strstarts);\nexport const builtInStrends = funcExpr2(l.builtIn.strends);\nexport const builtInStrbefore = funcExpr2(l.builtIn.strbefore);\nexport const builtInStrafter = funcExpr2(l.builtIn.strafter);\nexport const builtInYear = funcExpr1(l.builtIn.year);\nexport const builtInMonth = funcExpr1(l.builtIn.month);\nexport const builtInDay = funcExpr1(l.builtIn.day);\nexport const builtInHours = funcExpr1(l.builtIn.hours);\nexport const builtInMinutes = funcExpr1(l.builtIn.minutes);\nexport const builtInSeconds = funcExpr1(l.builtIn.seconds);\nexport const builtInTimezone = funcExpr1(l.builtIn.timezone);\nexport const builtInTz = funcExpr1(l.builtIn.tz);\nexport const builtInNow = funcNil1(l.builtIn.now);\nexport const builtInUuid = funcNil1(l.builtIn.uuid);\nexport const builtInStruuid = funcNil1(l.builtIn.struuid);\nexport const builtInMd5 = funcExpr1(l.builtIn.md5);\nexport const builtInSha1 = funcExpr1(l.builtIn.sha1);\nexport const builtInSha256 = funcExpr1(l.builtIn.sha256);\nexport const builtInSha384 = funcExpr1(l.builtIn.sha384);\nexport const builtInSha512 = funcExpr1(l.builtIn.sha512);\nexport const builtInCoalesce = funcExprList1(l.builtIn.coalesce);\nexport const builtInIf = funcExpr3(l.builtIn.if_);\nexport const builtInStrlang = funcExpr2(l.builtIn.strlang);\nexport const builtInStrdt = funcExpr2(l.builtIn.strdt);\nexport const builtInSameterm = funcExpr2(l.builtIn.sameterm);\nexport const builtInIsiri = funcExpr1(l.builtIn.isiri);\nexport const builtInIsuri = funcExpr1(l.builtIn.isuri);\nexport const builtInIsblank = funcExpr1(l.builtIn.isblank);\nexport const builtInIsliteral = funcExpr1(l.builtIn.isliteral);\nexport const builtInIsnumeric = funcExpr1(l.builtIn.isnumeric);\n\nexport function builtInCallList(SUBRULE: ImplArgs['SUBRULE']): IOrAlt<Expression>[] {\n  return [\n    { ALT: () => SUBRULE(aggregate) },\n    { ALT: () => SUBRULE(builtInStr) },\n    { ALT: () => SUBRULE(builtInLang) },\n    { ALT: () => SUBRULE(builtInLangmatches) },\n    { ALT: () => SUBRULE(builtInDatatype) },\n    { ALT: () => SUBRULE(builtInBound) },\n    { ALT: () => SUBRULE(builtInIri) },\n    { ALT: () => SUBRULE(builtInUri) },\n    { ALT: () => SUBRULE(builtInBnodeSparqlJs) },\n    { ALT: () => SUBRULE(builtInRand) },\n    { ALT: () => SUBRULE(builtInAbs) },\n    { ALT: () => SUBRULE(builtInCeil) },\n    { ALT: () => SUBRULE(builtInFloor) },\n    { ALT: () => SUBRULE(builtInRound) },\n    { ALT: () => SUBRULE(builtInConcat) },\n    { ALT: () => SUBRULE(substringExpression) },\n    { ALT: () => SUBRULE(builtInStrlen) },\n    { ALT: () => SUBRULE(strReplaceExpression) },\n    { ALT: () => SUBRULE(builtInUcase) },\n    { ALT: () => SUBRULE(builtInLcase) },\n    { ALT: () => SUBRULE(builtInEncode_for_uri) },\n    { ALT: () => SUBRULE(builtInContains) },\n    { ALT: () => SUBRULE(builtInStrstarts) },\n    { ALT: () => SUBRULE(builtInStrends) },\n    { ALT: () => SUBRULE(builtInStrbefore) },\n    { ALT: () => SUBRULE(builtInStrafter) },\n    { ALT: () => SUBRULE(builtInYear) },\n    { ALT: () => SUBRULE(builtInMonth) },\n    { ALT: () => SUBRULE(builtInDay) },\n    { ALT: () => SUBRULE(builtInHours) },\n    { ALT: () => SUBRULE(builtInMinutes) },\n    { ALT: () => SUBRULE(builtInSeconds) },\n    { ALT: () => SUBRULE(builtInTimezone) },\n    { ALT: () => SUBRULE(builtInTz) },\n    { ALT: () => SUBRULE(builtInNow) },\n    { ALT: () => SUBRULE(builtInUuid) },\n    { ALT: () => SUBRULE(builtInStruuid) },\n    { ALT: () => SUBRULE(builtInMd5) },\n    { ALT: () => SUBRULE(builtInSha1) },\n    { ALT: () => SUBRULE(builtInSha256) },\n    { ALT: () => SUBRULE(builtInSha384) },\n    { ALT: () => SUBRULE(builtInSha512) },\n    { ALT: () => SUBRULE(builtInCoalesce) },\n    { ALT: () => SUBRULE(builtInIf) },\n    { ALT: () => SUBRULE(builtInStrlang) },\n    { ALT: () => SUBRULE(builtInStrdt) },\n    { ALT: () => SUBRULE(builtInSameterm) },\n    { ALT: () => SUBRULE(builtInIsiri) },\n    { ALT: () => SUBRULE(builtInIsuri) },\n    { ALT: () => SUBRULE(builtInIsblank) },\n    { ALT: () => SUBRULE(builtInIsliteral) },\n    { ALT: () => SUBRULE(builtInIsnumeric) },\n    { ALT: () => SUBRULE(regexExpression) },\n    { ALT: () => SUBRULE(existsFunc) },\n    { ALT: () => SUBRULE(notExistsFunc) },\n  ];\n}\n\n/**\n * [[121]](https://www.w3.org/TR/sparql11-query/#rBuiltInCall)\n */\nexport const builtInCall: SparqlGrammarRule<'builtInCall', Expression> = <const>{\n  name: 'builtInCall',\n  impl: ({ OR, SUBRULE, cache }) => () => {\n    const cached = <IOrAlt<Expression>[]>cache.get(builtInCall);\n    if (cached) {\n      return OR<Expression>(cached);\n    }\n    const builtIns = builtInCallList(SUBRULE);\n    cache.set(builtInCall, builtIns);\n    return OR<Expression>(builtIns);\n  },\n};\n\n/**\n * [[122]](https://www.w3.org/TR/sparql11-query/#rBuiltInCall)\n */\nexport const regexExpression = funcExpr2or3(l.builtIn.regex);\n\n/**\n * [[123]](https://www.w3.org/TR/sparql11-query/#rBuiltInCall)\n */\nexport const substringExpression = funcExpr2or3(l.builtIn.substr);\n\n/**\n * [[124]](https://www.w3.org/TR/sparql11-query/#rBuiltInCall)\n */\nexport const strReplaceExpression = funcExpr3or4(l.builtIn.replace);\n\n/**\n * [[125]](https://www.w3.org/TR/sparql11-query/#rBuiltInCall)\n */\nexport const existsFunc = funcGroupGraphPattern(l.builtIn.exists);\n\n/**\n * [[126]](https://www.w3.org/TR/sparql11-query/#rBuiltInCall)\n */\nexport const notExistsFunc = funcGroupGraphPattern(l.builtIn.notexists);\n\nexport const aggregateCount:\nSparqlGrammarRule<'builtInCount', ExpressionAggregateOnWildcard | ExpressionAggregateDefault> = {\n  name: unCapitalize(l.builtIn.count.name),\n  impl: ({ ACTION, CONSUME, SUBRULE, OR, OPTION }) => (C) => {\n    const operatorToken = CONSUME(l.builtIn.count);\n    CONSUME(l.symbols.LParen);\n    const distinctToken = OPTION(() => CONSUME(l.distinct));\n\n    const expressionVal = OR<Expression | Wildcard>([\n      { ALT: () => {\n        const starToken = CONSUME(l.symbols.star);\n        return ACTION(() => C.astFactory.wildcard(C.astFactory.sourceLocation(starToken)));\n      } },\n      { ALT: () => SUBRULE(expression) },\n    ]);\n    const closeToken = CONSUME(l.symbols.RParen);\n\n    return ACTION(() => {\n      const F = C.astFactory;\n      if (C.astFactory.isWildcard(expressionVal)) {\n        return F.aggregate(\n          operatorToken.image,\n          Boolean(distinctToken),\n          expressionVal,\n          undefined,\n          C.astFactory.sourceLocation(operatorToken, closeToken),\n        );\n      }\n      return F.aggregate(\n        operatorToken.image,\n        Boolean(distinctToken),\n        expressionVal,\n        undefined,\n        C.astFactory.sourceLocation(operatorToken, closeToken),\n      );\n    });\n  },\n};\nexport const aggregateSum = baseAggregateFunc(l.builtIn.sum);\nexport const aggregateMin = baseAggregateFunc(l.builtIn.min);\nexport const aggregateMax = baseAggregateFunc(l.builtIn.max);\nexport const aggregateAvg = baseAggregateFunc(l.builtIn.avg);\nexport const aggregateSample = baseAggregateFunc(l.builtIn.sample);\nexport const aggregateGroup_concat:\nSparqlGrammarRule<'builtInGroup_concat', ExpressionAggregateDefault | ExpressionAggregateSeparator> = <const>{\n  name: unCapitalize(l.builtIn.groupConcat.name),\n  impl: ({ ACTION, CONSUME, OPTION1, SUBRULE, OPTION2 }) =>\n    (C) => {\n      const operatorToken = CONSUME(l.builtIn.groupConcat);\n      CONSUME(l.symbols.LParen);\n      const distinctToken = OPTION1(() => CONSUME(l.distinct));\n\n      const expr = SUBRULE(expression);\n      const sep = OPTION2(() => {\n        CONSUME(l.symbols.semi);\n        CONSUME(l.separator);\n        CONSUME(l.symbols.equal);\n        return SUBRULE(string);\n      });\n      const closeToken = CONSUME(l.symbols.RParen);\n\n      return ACTION(() => {\n        const F = C.astFactory;\n        return F.aggregate(\n          operatorToken.image,\n          Boolean(distinctToken),\n          expr,\n          sep?.value ?? ' ',\n          F.sourceLocation(operatorToken, closeToken),\n        );\n      });\n    },\n};\n\n/**\n * [[127]](https://www.w3.org/TR/sparql11-query/#rBuiltInCall)\n */\nexport const aggregate: SparqlRule<'aggregate', ExpressionAggregate> = <const>{\n  name: 'aggregate',\n  impl: ({ ACTION, SUBRULE, OR }) => (C) => {\n    // https://www.w3.org/2013/sparql-errata#errata-query-5 - Or note 15 in SPARQL1.2 spec\n    //  An aggregate function is not allowed within an aggregate function.\n    const wasInAggregate = ACTION(() => C.parseMode.has('inAggregate'));\n    ACTION(() => C.parseMode.add('inAggregate'));\n    const result = OR<ExpressionAggregate>([\n      { ALT: () => SUBRULE(aggregateCount) },\n      { ALT: () => SUBRULE(aggregateSum) },\n      { ALT: () => SUBRULE(aggregateMin) },\n      { ALT: () => SUBRULE(aggregateMax) },\n      { ALT: () => SUBRULE(aggregateAvg) },\n      { ALT: () => SUBRULE(aggregateSample) },\n      { ALT: () => SUBRULE(aggregateGroup_concat) },\n    ]);\n    ACTION(() => !wasInAggregate && C.parseMode.delete('inAggregate'));\n\n    ACTION(() => {\n      if (!C.parseMode.has('canParseAggregate')) {\n        throw new Error('Aggregates are only allowed in SELECT, HAVING, and ORDER BY clauses.');\n      }\n      if (C.parseMode.has('inAggregate')) {\n        throw new Error('An aggregate function is not allowed within an aggregate function.');\n      }\n    });\n\n    return result;\n  },\n  gImpl: ({ SUBRULE, PRINT_WORD }) => (ast, { astFactory: F }) => {\n    F.printFilter(ast, () => {\n      PRINT_WORD(ast.aggregation.toUpperCase(), '(');\n      if (ast.distinct) {\n        PRINT_WORD('DISTINCT');\n      }\n    });\n    const arg = ast.expression[0];\n    if (F.isWildcard(arg)) {\n      F.printFilter(ast, () => PRINT_WORD('*'));\n    } else {\n      SUBRULE(expression, arg);\n    }\n    if (F.isExpressionAggregateSeparator(ast)) {\n      F.printFilter(ast, () => PRINT_WORD(';', 'SEPARATOR', '=', stringEscapedLexical(ast.separator)));\n    }\n    F.printFilter(ast, () => PRINT_WORD(')'));\n  },\n};\n"]}