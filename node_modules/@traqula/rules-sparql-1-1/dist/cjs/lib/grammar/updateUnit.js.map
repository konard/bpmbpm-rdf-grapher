{"version":3,"file":"updateUnit.js","sourceRoot":"","sources":["../../../../lib/grammar/updateUnit.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IToken, TokenType } from '@traqula/chevrotain';\nimport type { Localized, RuleDefReturn, Wrap } from '@traqula/core';\nimport { traqulaIndentation, unCapitalize } from '@traqula/core';\nimport * as l from '../lexer/index.js';\nimport type { SparqlGrammarRule, SparqlRule } from '../sparql11HelperTypes.js';\nimport type {\n  GraphQuads,\n  GraphRef,\n  GraphRefDefault,\n  GraphRefSpecific,\n  Quads,\n  Update,\n  UpdateOperation,\n  UpdateOperationAdd,\n  UpdateOperationClear,\n  UpdateOperationCopy,\n  UpdateOperationCreate,\n  UpdateOperationDeleteData,\n  UpdateOperationDeleteWhere,\n  UpdateOperationDrop,\n  UpdateOperationInsertData,\n  UpdateOperationLoad,\n  UpdateOperationModify,\n  UpdateOperationMove,\n} from '../Sparql11types.js';\nimport { updateNoReuseBlankNodeLabels } from '../validation/validators.js';\nimport { usingClauseStar } from './dataSetClause.js';\nimport { prologue, varOrIri, varOrTerm } from './general.js';\nimport { iri } from './literals.js';\nimport { triplesBlock, triplesTemplate } from './tripleBlock.js';\nimport { groupGraphPattern } from './whereClause.js';\n\n/**\n * [[3]](https://www.w3.org/TR/sparql11-query/#rUpdateUnit)\n */\nexport const updateUnit: SparqlGrammarRule<'updateUnit', Update> = <const> {\n  name: 'updateUnit',\n  impl: ({ SUBRULE }) => () => SUBRULE(update),\n};\n\n/**\n * [[29]](https://www.w3.org/TR/sparql11-query/#rUpdate)\n */\nexport const update: SparqlRule<'update', Update> = <const> {\n  name: 'update',\n  impl: ({ ACTION, SUBRULE, SUBRULE1, SUBRULE2, CONSUME, OPTION1, MANY }) => (C) => {\n    // Override prologueValues on new reads of prologue and sink them into updates later\n    const updates: Update['updates'] = [];\n    const prologueValues = SUBRULE1(prologue);\n    updates.push({ context: prologueValues });\n\n    let parsedSemi = true;\n    MANY({\n      GATE: () => parsedSemi,\n      DEF: () => {\n        parsedSemi = false;\n        updates.at(-1)!.operation = SUBRULE(update1);\n\n        OPTION1(() => {\n          CONSUME(l.symbols.semi);\n\n          parsedSemi = true;\n          const innerPrologue = SUBRULE2(prologue);\n          updates.push({ context: innerPrologue });\n        });\n      },\n    });\n    return ACTION(() => {\n      const update = {\n        type: 'update',\n        updates,\n        loc: C.astFactory.sourceLocation(\n          ...updates.flatMap(x => [ ...x.context, x.operation ]),\n        ),\n      } satisfies Update;\n      if (!C.skipValidation) {\n        updateNoReuseBlankNodeLabels(update);\n      }\n      return update;\n    });\n  },\n  gImpl: ({ SUBRULE, PRINT, NEW_LINE }) => (ast, { astFactory: F }) => {\n    const [ head, ...tail ] = ast.updates;\n    if (head) {\n      SUBRULE(prologue, head.context);\n      if (head.operation) {\n        SUBRULE(update1, head.operation);\n      }\n    }\n    for (const update of tail) {\n      F.printFilter(ast, () => {\n        PRINT(';');\n        NEW_LINE();\n      });\n      SUBRULE(prologue, update.context);\n      if (update.operation) {\n        SUBRULE(update1, update.operation);\n      }\n    }\n  },\n};\n\n/**\n * [[30]](https://www.w3.org/TR/sparql11-query/#rUpdate1)\n */\nexport const update1: SparqlRule<'update1', UpdateOperation> = <const> {\n  name: 'update1',\n  impl: ({ SUBRULE, OR }) => () => OR<UpdateOperation>([\n    { ALT: () => SUBRULE(load) },\n    { ALT: () => SUBRULE(clear) },\n    { ALT: () => SUBRULE(drop) },\n    { ALT: () => SUBRULE(add) },\n    { ALT: () => SUBRULE(move) },\n    { ALT: () => SUBRULE(copy) },\n    { ALT: () => SUBRULE(create) },\n    { ALT: () => SUBRULE(insertData) },\n    { ALT: () => SUBRULE(deleteData) },\n    { ALT: () => SUBRULE(deleteWhere) },\n    { ALT: () => SUBRULE(modify) },\n  ]),\n  gImpl: ({ SUBRULE }) => (ast) => {\n    switch (ast.subType) {\n      case ('load'):\n        SUBRULE(load, ast);\n        break;\n      case ('clear'):\n        SUBRULE(clear, ast);\n        break;\n      case ('drop'):\n        SUBRULE(drop, ast);\n        break;\n      case ('add'):\n        SUBRULE(add, ast);\n        break;\n      case ('move'):\n        SUBRULE(move, ast);\n        break;\n      case ('copy'):\n        SUBRULE(copy, ast);\n        break;\n      case ('create'):\n        SUBRULE(create, ast);\n        break;\n      case ('insertdata'):\n        SUBRULE(insertData, ast);\n        break;\n      case ('deletedata'):\n        SUBRULE(deleteData, ast);\n        break;\n      case ('deletewhere'):\n        SUBRULE(deleteWhere, ast);\n        break;\n      case ('modify'):\n        SUBRULE(modify, ast);\n        break;\n    }\n  },\n};\n\n/**\n * [[31]](https://www.w3.org/TR/sparql11-query/#rLoad)\n */\nexport const load: SparqlRule<'load', UpdateOperationLoad> = <const> {\n  name: 'load',\n  impl: ({ ACTION, SUBRULE1, CONSUME, OPTION1, OPTION2 }) => (C) => {\n    const loadToken = CONSUME(l.load);\n    const silent = OPTION1(() => CONSUME(l.silent));\n    const source = SUBRULE1(iri);\n    const destination = OPTION2(() => {\n      CONSUME(l.loadInto);\n      return SUBRULE1(graphRef);\n    });\n    return ACTION(() => C.astFactory.updateOperationLoad(\n      C.astFactory.sourceLocation(loadToken, source, destination),\n      source,\n      Boolean(silent),\n      destination,\n    ));\n  },\n  gImpl: ({ SUBRULE, PRINT_WORD, PRINT_ON_EMPTY }) => (ast, { astFactory: F }) => {\n    F.printFilter(ast, () => {\n      PRINT_ON_EMPTY('LOAD ');\n      if (ast.silent) {\n        PRINT_WORD('SILENT');\n      }\n    });\n    SUBRULE(iri, ast.source);\n    if (ast.destination) {\n      F.printFilter(ast, () => PRINT_WORD('INTO'));\n      SUBRULE(graphRefAll, ast.destination);\n    }\n  },\n};\n\nfunction clearOrDrop<T extends 'Clear' | 'Drop'>(operation: TokenType & { name: T }):\nSparqlRule<Uncapitalize<T>, UpdateOperationClear | UpdateOperationDrop> {\n  return {\n    name: unCapitalize(operation.name),\n    impl: ({ ACTION, SUBRULE1, CONSUME, OPTION }) => (C) => {\n      const opToken = CONSUME(operation);\n      const silent = OPTION(() => CONSUME(l.silent));\n      const destination = SUBRULE1(graphRefAll);\n      return ACTION(() => C.astFactory.updateOperationClearDrop(\n        unCapitalize(operation.name),\n        Boolean(silent),\n        destination,\n        C.astFactory.sourceLocation(opToken, destination),\n      ));\n    },\n    gImpl: ({ SUBRULE, PRINT_WORD, PRINT_ON_EMPTY }) => (ast, { astFactory: F }) => {\n      F.printFilter(ast, () => {\n        PRINT_ON_EMPTY(operation.name.toUpperCase(), ' ');\n        if (ast.silent) {\n          PRINT_WORD('SILENT');\n        }\n      });\n      SUBRULE(graphRefAll, ast.destination);\n    },\n  };\n}\n\n/**\n * [[32]](https://www.w3.org/TR/sparql11-query/#rClear)\n */\nexport const clear = clearOrDrop(l.clear);\n\n/**\n * [[33]](https://www.w3.org/TR/sparql11-query/#rDrop)\n */\nexport const drop = clearOrDrop(l.drop);\n\n/**\n * [[34]](https://www.w3.org/TR/sparql11-query/#rCreate)\n */\nexport const create: SparqlRule<'create', UpdateOperationCreate> = <const> {\n  name: 'create',\n  impl: ({ ACTION, SUBRULE1, CONSUME, OPTION }) => (C) => {\n    const createToken = CONSUME(l.create);\n    const silent = OPTION(() => CONSUME(l.silent));\n    const destination = SUBRULE1(graphRef);\n\n    return ACTION(() => C.astFactory.updateOperationCreate(\n      destination,\n      Boolean(silent),\n      C.astFactory.sourceLocation(createToken, destination),\n    ));\n  },\n  gImpl: ({ SUBRULE, PRINT_WORD, PRINT_ON_EMPTY }) => (ast, { astFactory: F }) => {\n    F.printFilter(ast, () => {\n      PRINT_ON_EMPTY('CREATE ');\n      if (ast.silent) {\n        PRINT_WORD('SILENT');\n      }\n    });\n    SUBRULE(graphRefAll, ast.destination);\n  },\n};\n\nfunction copyMoveAddOperation<T extends 'Copy' | 'Move' | 'Add'>(operation: TokenType & { name: T }):\nSparqlRule<Uncapitalize<T>, UpdateOperationAdd | UpdateOperationMove | UpdateOperationCopy> {\n  return {\n    name: unCapitalize(operation.name),\n    impl: ({ ACTION, CONSUME, SUBRULE1, SUBRULE2, OPTION }) => (C) => {\n      const op = CONSUME(operation);\n      const silent = OPTION(() => CONSUME(l.silent));\n      const source = SUBRULE1(graphOrDefault);\n      CONSUME(l.to);\n      const destination = SUBRULE2(graphOrDefault);\n\n      return ACTION(() => C.astFactory.updateOperationAddMoveCopy(\n        unCapitalize(operation.name),\n        source,\n        destination,\n        Boolean(silent),\n        C.astFactory.sourceLocation(op, destination),\n      ));\n    },\n    gImpl: ({ SUBRULE, PRINT_WORD, PRINT_ON_EMPTY }) => (ast, { astFactory: F }) => {\n      F.printFilter(ast, () => {\n        PRINT_ON_EMPTY(operation.name.toUpperCase(), ' ');\n        if (ast.silent) {\n          PRINT_WORD('SILENT');\n        }\n      });\n      SUBRULE(graphRefAll, ast.source);\n      F.printFilter(ast, () => PRINT_WORD('TO'));\n      SUBRULE(graphRefAll, ast.destination);\n    },\n  };\n}\n\n/**\n * [[35]](https://www.w3.org/TR/sparql11-query/#rAdd)\n */\nexport const add = copyMoveAddOperation(l.add);\n\n/**\n * [[36]](https://www.w3.org/TR/sparql11-query/#rMove)\n */\nexport const move = copyMoveAddOperation(l.move);\n\n/**\n * [[37]](https://www.w3.org/TR/sparql11-query/#rCopy)\n */\nexport const copy = copyMoveAddOperation(l.copy);\n\n/**\n * [[48]](https://www.w3.org/TR/sparql11-query/#rQuadPattern)\n */\nexport const quadPattern: SparqlGrammarRule<'quadPattern', Wrap<Quads[]>> = <const> {\n  name: 'quadPattern',\n  impl: ({ ACTION, SUBRULE1, CONSUME }) => (C) => {\n    const open = CONSUME(l.symbols.LCurly);\n    const val = SUBRULE1(quads);\n    const close = CONSUME(l.symbols.RCurly);\n    return ACTION(() => C.astFactory.wrap(val.val, C.astFactory.sourceLocation(open, close)));\n  },\n};\n\n/**\n * [[49]](https://www.w3.org/TR/sparql11-query/#rQuadData)\n */\nexport const quadData: SparqlGrammarRule<'quadData', Wrap<Quads[]>> = <const> {\n  name: 'quadData',\n  impl: ({ ACTION, SUBRULE1, CONSUME }) => (C) => {\n    const open = CONSUME(l.symbols.LCurly);\n\n    const couldParseVars = ACTION(() => C.parseMode.delete('canParseVars'));\n    const val = SUBRULE1(quads);\n    ACTION(() => couldParseVars && C.parseMode.add('canParseVars'));\n\n    const close = CONSUME(l.symbols.RCurly);\n    return ACTION(() => C.astFactory.wrap(val.val, C.astFactory.sourceLocation(open, close)));\n  },\n};\n\nfunction insertDeleteDelWhere<T extends string>(\n  name: T,\n  subType: 'insertdata' | 'deletedata' | 'deletewhere',\n  cons1: TokenType,\n  dataRule: SparqlGrammarRule<any, Wrap<Quads[]>>,\n): SparqlRule<T, UpdateOperationInsertData | UpdateOperationDeleteData | UpdateOperationDeleteWhere> {\n  return {\n    name,\n    impl: ({ ACTION, SUBRULE1, CONSUME }) => (C) => {\n      const insDelToken = CONSUME(cons1);\n\n      let couldCreateBlankNodes = true;\n      if (name !== 'insertData') {\n        couldCreateBlankNodes = ACTION(() => C.parseMode.delete('canCreateBlankNodes'));\n      }\n      const data = SUBRULE1(dataRule);\n      if (name !== 'insertData') {\n        ACTION(() => couldCreateBlankNodes && C.parseMode.add('canCreateBlankNodes'));\n      }\n\n      return ACTION(() =>\n        C.astFactory.updateOperationInsDelDataWhere(subType, data.val, C.astFactory.sourceLocation(insDelToken, data)));\n    },\n    gImpl: ({ SUBRULE, PRINT_WORD, PRINT_ON_EMPTY, PRINT_ON_OWN_LINE, NEW_LINE }) => (ast, C) => {\n      const { astFactory: F, indentInc } = C;\n      F.printFilter(ast, () => {\n        if (subType === 'insertdata') {\n          PRINT_ON_EMPTY('INSERT DATA ');\n        } else if (subType === 'deletedata') {\n          PRINT_ON_EMPTY('DELETE DATA ');\n        } else if (subType === 'deletewhere') {\n          PRINT_ON_EMPTY('DELETE WHERE ');\n        }\n        C[traqulaIndentation] += indentInc;\n        PRINT_WORD('{');\n        NEW_LINE();\n      });\n      SUBRULE(quads, F.wrap(ast.data, ast.loc));\n      F.printFilter(ast, () => {\n        C[traqulaIndentation] -= indentInc;\n        PRINT_ON_OWN_LINE('}');\n      });\n    },\n  };\n}\n\n/**\n * [[38]](https://www.w3.org/TR/sparql11-query/#rInsertData)\n */\nexport const insertData = insertDeleteDelWhere('insertData', 'insertdata', l.insertDataClause, quadData);\n\n/**\n * [[39]](https://www.w3.org/TR/sparql11-query/#rDeleteData)\n */\nexport const deleteData = insertDeleteDelWhere('deleteData', 'deletedata', l.deleteDataClause, quadData);\n\n/**\n * [[40]](https://www.w3.org/TR/sparql11-query/#rDeleteWhere)\n */\nexport const deleteWhere = insertDeleteDelWhere('deleteWhere', 'deletewhere', l.deleteWhereClause, quadPattern);\n\n/**\n * [[41]](https://www.w3.org/TR/sparql11-query/#rModify)\n */\nexport const modify: SparqlRule<'modify', UpdateOperationModify> = <const> {\n  name: 'modify',\n  impl: ({ ACTION, CONSUME, SUBRULE1, SUBRULE2, OPTION1, OPTION2, OR }) => (C) => {\n    const graph = OPTION1(() => {\n      const withToken = CONSUME(l.modifyWith);\n      const graph = SUBRULE1(iri);\n      return { withToken, graph };\n    });\n    const { insert, del } = OR<{\n      del: RuleDefReturn<typeof deleteClause> | undefined;\n      insert: RuleDefReturn<typeof insertClause> | undefined;\n    }>([\n      { ALT: () => {\n        const del = SUBRULE1(deleteClause);\n        const insert = OPTION2(() => SUBRULE1(insertClause));\n        return { del, insert };\n      } },\n      { ALT: () => {\n        const insert = SUBRULE2(insertClause);\n        return { insert, del: undefined };\n      } },\n    ]);\n    const using = SUBRULE1(usingClauseStar);\n    CONSUME(l.where);\n    const where = SUBRULE1(groupGraphPattern);\n\n    return ACTION(() => C.astFactory.updateOperationModify(\n      C.astFactory.sourceLocation(graph?.withToken, del, insert, where),\n      insert?.val ?? [],\n      del?.val ?? [],\n      where,\n      using,\n      graph?.graph,\n    ));\n  },\n  gImpl: ({ SUBRULE, PRINT_WORDS, PRINT_ON_EMPTY, NEW_LINE }) => (ast, C) => {\n    const { astFactory: F, indentInc } = C;\n    if (ast.graph) {\n      F.printFilter(ast, () => PRINT_WORDS('WITH'));\n      SUBRULE(iri, ast.graph);\n    }\n    if (ast.delete.length > 0) {\n      F.printFilter(ast, () => {\n        C[traqulaIndentation] += indentInc;\n        PRINT_WORDS('DELETE', '{');\n        NEW_LINE();\n      });\n      SUBRULE(quads, F.wrap(ast.delete, ast.loc));\n      F.printFilter(ast, () => {\n        C[traqulaIndentation] -= indentInc;\n        PRINT_ON_EMPTY('}');\n        NEW_LINE();\n      });\n    }\n    if (ast.insert.length > 0) {\n      F.printFilter(ast, () => {\n        C[traqulaIndentation] += indentInc;\n        PRINT_WORDS('INSERT', '{');\n        NEW_LINE();\n      });\n      SUBRULE(quads, F.wrap(ast.insert, ast.loc));\n      F.printFilter(ast, () => {\n        C[traqulaIndentation] -= indentInc;\n        PRINT_ON_EMPTY('} ');\n        NEW_LINE();\n      });\n    }\n    SUBRULE(usingClauseStar, ast.from);\n    F.printFilter(ast, () => PRINT_WORDS('WHERE'));\n    SUBRULE(groupGraphPattern, ast.where);\n  },\n};\n\n/**\n * [[42]](https://www.w3.org/TR/sparql11-query/#rDeleteClause)\n */\nexport const deleteClause: SparqlGrammarRule<'deleteClause', Wrap<Quads[]>> = <const> {\n  name: 'deleteClause',\n  impl: ({ ACTION, SUBRULE, CONSUME }) => (C) => {\n    const delToken = CONSUME(l.deleteClause);\n    const couldCreateBlankNodes = ACTION(() => C.parseMode.delete('canCreateBlankNodes'));\n    const del = SUBRULE(quadPattern);\n    ACTION(() => couldCreateBlankNodes && C.parseMode.add('canCreateBlankNodes'));\n\n    return ACTION(() => C.astFactory.wrap(del.val, C.astFactory.sourceLocation(delToken, del)));\n  },\n};\n\n/**\n * [[43]](https://www.w3.org/TR/sparql11-query/#rInsertClause)\n */\nexport const insertClause: SparqlGrammarRule<'insertClause', Wrap<Quads[]>> = <const> {\n  name: 'insertClause',\n  impl: ({ ACTION, SUBRULE, CONSUME }) => (C) => {\n    const insertToken = CONSUME(l.insertClause);\n    const insert = SUBRULE(quadPattern);\n\n    return ACTION(() => C.astFactory.wrap(insert.val, C.astFactory.sourceLocation(insertToken, insert)));\n  },\n};\n\n/**\n * [[45]](https://www.w3.org/TR/sparql11-query/#rGraphOrDefault)\n */\nexport const graphOrDefault: SparqlGrammarRule<'graphOrDefault', GraphRefDefault | GraphRefSpecific> = <const> {\n  name: 'graphOrDefault',\n  impl: ({ ACTION, SUBRULE1, CONSUME, OPTION, OR }) => C => OR<GraphRefDefault | GraphRefSpecific>([\n    { ALT: () => {\n      const def = CONSUME(l.graph.default_);\n      return ACTION(() => C.astFactory.graphRefDefault(C.astFactory.sourceLocation(def)));\n    } },\n    { ALT: () => {\n      const graph = OPTION(() => CONSUME(l.graph.graph));\n      const name = SUBRULE1(iri);\n      return ACTION(() =>\n        C.astFactory.graphRefSpecific(name, C.astFactory.sourceLocation(graph, name)));\n    } },\n  ]),\n};\n\n/**\n * [[46]](https://www.w3.org/TR/sparql11-query/#rGraphRef)\n */\nexport const graphRef: SparqlRule<'graphRef', GraphRefSpecific> = <const> {\n  name: 'graphRef',\n  impl: ({ ACTION, SUBRULE, CONSUME }) => (C) => {\n    const graph = CONSUME(l.graph.graph);\n    const val = SUBRULE(iri);\n    return ACTION(() => C.astFactory.graphRefSpecific(val, C.astFactory.sourceLocation(graph, val)));\n  },\n  gImpl: ({ SUBRULE, PRINT_WORD }) => (ast, { astFactory: F }) => {\n    F.printFilter(ast, () => PRINT_WORD('GRAPH'));\n    SUBRULE(iri, ast.graph);\n  },\n};\n\n/**\n * [[47]](https://www.w3.org/TR/sparql11-query/#rGraphRefAll)\n */\nexport const graphRefAll: SparqlRule<'graphRefAll', GraphRef> = <const> {\n  name: 'graphRefAll',\n  impl: ({ ACTION, SUBRULE, CONSUME, OR }) => C => OR<GraphRef>([\n    { ALT: () => SUBRULE(graphRef) },\n    { ALT: () => {\n      const def = CONSUME(l.graph.default_);\n      return ACTION(() => C.astFactory.graphRefDefault(C.astFactory.sourceLocation(def)));\n    } },\n    { ALT: () => {\n      const named = CONSUME(l.graph.named);\n      return ACTION(() => C.astFactory.graphRefNamed(C.astFactory.sourceLocation(named)));\n    } },\n    { ALT: () => {\n      const graphAll = CONSUME(l.graph.graphAll);\n      return ACTION(() => C.astFactory.graphRefAll(C.astFactory.sourceLocation(graphAll)));\n    } },\n  ]),\n  gImpl: ({ SUBRULE, PRINT_WORD }) => (ast, { astFactory: F }) => {\n    if (F.isGraphRefSpecific(ast)) {\n      SUBRULE(graphRef, ast);\n    } else if (F.isGraphRefDefault(ast)) {\n      F.printFilter(ast, () => PRINT_WORD('DEFAULT'));\n    } else if (F.isGraphRefNamed(ast)) {\n      F.printFilter(ast, () => PRINT_WORD('NAMED'));\n    } else if (F.isGraphRefAll(ast)) {\n      F.printFilter(ast, () => PRINT_WORD('ALL'));\n    }\n  },\n};\n\n/**\n * [[50]](https://www.w3.org/TR/sparql11-query/#rQuads)\n */\nexport const quads: SparqlRule<'quads', Wrap<Quads[]>> = <const> {\n  name: 'quads',\n  impl: ({ ACTION, SUBRULE, CONSUME, MANY, SUBRULE1, SUBRULE2, OPTION1, OPTION2, OPTION3 }) => (C) => {\n    const quads: Quads[] = [];\n    let last: IToken | Localized | undefined;\n\n    OPTION1(() => {\n      const triples = SUBRULE1(triplesTemplate);\n      last = triples;\n      ACTION(() => quads.push(triples));\n    });\n\n    MANY(() => {\n      const notTriples = SUBRULE(quadsNotTriples);\n      last = notTriples;\n      quads.push(notTriples);\n      OPTION2(() => {\n        const dotToken = CONSUME(l.symbols.dot);\n        last = dotToken;\n        return dotToken;\n      });\n      OPTION3(() => {\n        const triples = SUBRULE2(triplesTemplate);\n        last = triples;\n        ACTION(() => quads.push(triples));\n      });\n    });\n\n    return ACTION(() => C.astFactory.wrap(quads, C.astFactory.sourceLocation(quads.at(0), last)));\n  },\n  gImpl: ({ SUBRULE }) => (ast, { astFactory: F }) => {\n    for (const quad of ast.val) {\n      if (F.isPattern(quad)) {\n        SUBRULE(triplesBlock, quad);\n      } else {\n        SUBRULE(quadsNotTriples, quad);\n      }\n    }\n  },\n};\n\n/**\n * [[51]](https://www.w3.org/TR/sparql11-query/#rQuadsNotTriples)\n */\nexport const quadsNotTriples: SparqlRule<'quadsNotTriples', GraphQuads> = <const> {\n  name: 'quadsNotTriples',\n  impl: ({ ACTION, SUBRULE1, CONSUME, OPTION }) => (C) => {\n    const graph = CONSUME(l.graph.graph);\n    const name = SUBRULE1(varOrIri);\n    CONSUME(l.symbols.LCurly);\n    const triples = OPTION(() => SUBRULE1(triplesTemplate));\n    const close = CONSUME(l.symbols.RCurly);\n\n    return ACTION(() => C.astFactory.graphQuads(\n      name,\n      triples ?? C.astFactory.patternBgp([], C.astFactory.sourceLocation()),\n      C.astFactory.sourceLocation(graph, close),\n    ));\n  },\n  gImpl: ({ SUBRULE, PRINT_WORD, NEW_LINE, PRINT_ON_OWN_LINE }) => (ast, C) => {\n    const { astFactory: F, indentInc } = C;\n    F.printFilter(ast, () => PRINT_WORD('GRAPH'));\n    SUBRULE(varOrTerm, ast.graph);\n    F.printFilter(ast, () => {\n      C[traqulaIndentation] += indentInc;\n      PRINT_WORD('{');\n      NEW_LINE();\n    });\n    SUBRULE(triplesBlock, ast.triples);\n    F.printFilter(ast, () => {\n      C[traqulaIndentation] -= indentInc;\n      PRINT_ON_OWN_LINE('}');\n    });\n  },\n};\n"]}