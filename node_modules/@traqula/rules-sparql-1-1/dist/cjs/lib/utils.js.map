{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../lib/utils.ts"],"names":[],"mappings":";;;AAOA,sDAqBC;AA5BD,wCAAoD;AAGpD;;;GAGG;AACH,SAAgB,qBAAqB,CAAC,KAAa;IACjD,MAAM,cAAc,GAAG,KAAK,CAAC,UAAU,CACrC,2CAA2C,EAC3C,CAAC,CAAC,EAAE,QAAgB,EAAE,QAAgB,EAAE,EAAE;QACxC,IAAI,QAAQ,EAAE,CAAC;YACb,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;YAC/C,OAAO,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACxC,CAAC;QACD,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QAC/C,IAAI,QAAQ,GAAG,MAAM,EAAE,CAAC;YACtB,OAAO,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACxC,CAAC;QACD,MAAM,mBAAmB,GAAG,QAAQ,GAAG,OAAO,CAAC;QAC/C,OAAO,MAAM,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,mBAAmB,IAAI,EAAE,CAAC,EAAE,MAAM,GAAG,CAAC,mBAAmB,GAAG,KAAK,CAAC,CAAC,CAAC;IAC5G,CAAC,CACF,CAAC;IACF,2CAA2C;IAC3C,IAAI,wCAAwC,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC;QAClE,MAAM,IAAI,KAAK,CAAC,6EAA6E,CAAC,CAAC;IACjG,CAAC;IACD,OAAO,cAAc,CAAC;AACxB,CAAC;AAED,IAAY,UAYX;AAZD,WAAY,UAAU;IACpB,MAAM;IACN,kEAAoD,CAAA;IACpD,kEAAoD,CAAA;IACpD,kEAAoD,CAAA;IACpD,gEAAkD,CAAA;IAClD,gEAAkD,CAAA;IAClD,MAAM;IACN,wEAA0D,CAAA;IAC1D,sEAAwD,CAAA;IACxD,oEAAsD,CAAA;IACtD,sEAAwD,CAAA;AAC1D,CAAC,EAZW,UAAU,0BAAV,UAAU,QAYrB;AAED,MAAa,cAAe,SAAQ,0BAAkC;CAAG;AAAzE,wCAAyE","sourcesContent":["import { TransformerSubTyped } from '@traqula/core';\nimport type { Sparql11Nodes } from './Sparql11types.js';\n\n/**\n * Transform input in accordance to [19.2](https://www.w3.org/TR/sparql11-query/#codepointEscape)\n * and validate unicode codepoints.\n */\nexport function sparqlCodepointEscape(input: string): string {\n  const sanitizedInput = input.replaceAll(\n    /\\\\u([0-9a-fA-F]{4})|\\\\U([0-9a-fA-F]{8})/gu,\n    (_, unicode4: string, unicode8: string) => {\n      if (unicode4) {\n        const charCode = Number.parseInt(unicode4, 16);\n        return String.fromCodePoint(charCode);\n      }\n      const charCode = Number.parseInt(unicode8, 16);\n      if (charCode < 0xFFFF) {\n        return String.fromCodePoint(charCode);\n      }\n      const substractedCharCode = charCode - 0x10000;\n      return String.fromCodePoint(0xD800 + (substractedCharCode >> 10), 0xDC00 + (substractedCharCode & 0x3FF));\n    },\n  );\n  // Test for invalid unicode surrogate pairs\n  if (/[\\uD800-\\uDBFF](?:[^\\uDC00-\\uDFFF]|$)/u.test(sanitizedInput)) {\n    throw new Error(`Invalid unicode codepoint of surrogate pair without corresponding codepoint`);\n  }\n  return sanitizedInput;\n}\n\nexport enum CommonIRIs {\n  // XSD\n  BOOLEAN = 'http://www.w3.org/2001/XMLSchema#boolean',\n  INTEGER = 'http://www.w3.org/2001/XMLSchema#integer',\n  DECIMAL = 'http://www.w3.org/2001/XMLSchema#decimal',\n  DOUBLE = 'http://www.w3.org/2001/XMLSchema#double',\n  STRING = 'http://www.w3.org/2001/XMLSchema#string',\n  // RDF\n  FIRST = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#first',\n  REST = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#rest',\n  NIL = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil',\n  TYPE = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',\n}\n\nexport class AstTransformer extends TransformerSubTyped<Sparql11Nodes> {}\n"]}