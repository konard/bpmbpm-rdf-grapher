"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.toAlgebra12Builder = void 0;
exports.toAlgebra = toAlgebra;
const algebra_sparql_1_1_1 = require("@traqula/algebra-sparql-1-1");
const algebra_transformations_1_2_1 = require("@traqula/algebra-transformations-1-2");
const core_1 = require("@traqula/core");
exports.toAlgebra12Builder = core_1.IndirBuilder
    .create(algebra_sparql_1_1_1.toAlgebra11Builder)
    .widenContext()
    .patchRule(algebra_transformations_1_2_1.translateTerm12)
    .patchRule(algebra_transformations_1_2_1.translateTripleCollection12)
    .patchRule(algebra_transformations_1_2_1.translateTripleNesting12)
    .patchRule(algebra_transformations_1_2_1.inScopeVariables)
    .typePatch();
/**
 * Translates the given SPARQL query to SPARQL Algebra.
 * @param query - sparql 1.2 AST generated by Traqula
 * @param options - Optional options object. Current options:
 * @param options.dataFactory - The Datafactory used to generate terms. Default @rdfjs/data-model.
 * @param options.quads - Boolean indicating whether triples should be converted to Quads
 *        (consumes GRAPH statements). Default false.
 * @param options.prefixes - Pre-defined prefixes for the given query. Default empty.
 * @param options.baseIRI - Base IRI that should be used for the query.
 *        Default undefined (throws error if required).
 * @param options.blankToVariable - translate all blank nodes into variables
 * @returns Operation
 */
function toAlgebra(query, options = {}) {
    const c = (0, algebra_transformations_1_2_1.createAlgebraContext)(options);
    const transformer = exports.toAlgebra12Builder.build();
    return transformer.translateQuery(c, query, options.quads, options.blankToVariable);
}
//# sourceMappingURL=toAlgebra12.js.map