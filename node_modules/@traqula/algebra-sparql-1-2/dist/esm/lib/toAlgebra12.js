import { toAlgebra11Builder } from '@traqula/algebra-sparql-1-1';
import { createAlgebraContext, inScopeVariables, translateTerm12, translateTripleCollection12, translateTripleNesting12, } from '@traqula/algebra-transformations-1-2';
import { IndirBuilder } from '@traqula/core';
export const toAlgebra12Builder = IndirBuilder
    .create(toAlgebra11Builder)
    .widenContext()
    .patchRule(translateTerm12)
    .patchRule(translateTripleCollection12)
    .patchRule(translateTripleNesting12)
    .patchRule(inScopeVariables)
    .typePatch();
/**
 * Translates the given SPARQL query to SPARQL Algebra.
 * @param query - sparql 1.2 AST generated by Traqula
 * @param options - Optional options object. Current options:
 * @param options.dataFactory - The Datafactory used to generate terms. Default @rdfjs/data-model.
 * @param options.quads - Boolean indicating whether triples should be converted to Quads
 *        (consumes GRAPH statements). Default false.
 * @param options.prefixes - Pre-defined prefixes for the given query. Default empty.
 * @param options.baseIRI - Base IRI that should be used for the query.
 *        Default undefined (throws error if required).
 * @param options.blankToVariable - translate all blank nodes into variables
 * @returns Operation
 */
export function toAlgebra(query, options = {}) {
    const c = createAlgebraContext(options);
    const transformer = toAlgebra12Builder.build();
    return transformer.translateQuery(c, query, options.quads, options.blankToVariable);
}
//# sourceMappingURL=toAlgebra12.js.map