# ==============================================================================
# Basic VAD Ontology - Базовая онтология верхнеуровневых процессов
# ==============================================================================
#
# Автор: RDF Grapher Project
# Версия: 1.2 (ver8tree)
# Дата создания: 2026-01-21
# Дата обновления: 2026-01-27
# Проект: https://github.com/bpmbpm/rdf-grapher/tree/main/ver8tree/index.html
#
# Описание:
# Данная онтология формализует модель верхнеуровневых бизнес-процессов в нотации
# VAD (Value Added Diagram / Цепочка добавленной стоимости).
# Онтология используется для моделирования процессов, их иерархии, исполнителей
# и связей между ними.
#
# НОВАЯ КОНЦЕПЦИЯ (v1.2):
# - Дерево объектов строится на основе vad:hasParentObj (не hasParentTrig)
# - Все объекты (TriG, TypeProcess, TypeExecutor) могут иметь родителя через hasParentObj
# - vad:ObjectTree - общий тип для ptree и rtree (заменяет ProcessTree и ExecutorTree)
# - vad:TechTree - тип для корневого узла vad:root
# - В "Дерево TriG" отображаются все узлы с hasParentObj, объекты типа TriG выделяются жирным
# - vad:definesProcess не используется (достаточно ссылки на материнский объект через hasParentObj)
#
# СВЯЗАННЫЕ ФАЙЛЫ:
# - vad-basic-ontology_tech_Appendix.ttl - технологические классы и объекты
#   (загружается при старте index.html для формирования справочников)
#
# ==============================================================================
# СОГЛАШЕНИЯ ОБ ИМЕНОВАНИИ:
# - Имена классов (подклассов), типов (подтипов): UpperCamelCase (напр. Process)
# - Имена предикатов: lowerCamelCase (напр. hasNext)
# ==============================================================================
#
# СВЯЗЬ С JavaScript-КОДОМ (index.html):
# - Константа VAD_ALLOWED_TYPES: содержит список разрешённых типов объектов
# - Константа VAD_ALLOWED_PREDICATES: содержит список разрешённых предикатов
# - Константа PTREE_PREDICATES: определяет предикаты для хранения в vad:ptree
# ==============================================================================

@prefix rdf:      <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:     <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:      <http://www.w3.org/2002/07/owl#> .
@prefix xsd:      <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms:  <http://purl.org/dc/terms/> .
@prefix vad:      <http://example.org/vad#> .

# ==============================================================================
# МЕТАДАННЫЕ ОНТОЛОГИИ
# ==============================================================================

<http://example.org/vad#>
    rdf:type owl:Ontology ;
    rdfs:label "Basic VAD Ontology" ;
    rdfs:comment """
        Базовая онтология верхнеуровневых процессов (Basic VAD Ontology).

        Предназначена для формализации бизнес-процессов в нотации VAD
        (Value Added Diagram / Цепочка добавленной стоимости).

        Ключевые концепции:
        1. Process (TypeProcess) - ключевой объект, представляющий бизнес-процесс
           - Концепт процесса - определение процесса с метаданными (label, description, hasTrig) в vad:ptree
           - Индивид процесса - конкретное использование процесса в схеме VADProcessDia
        2. VADProcessDia - схема процесса (TriG-граф)
        3. ObjectTree - базовый класс для деревьев объектов (ptree, rtree)
        4. TechTree - технический класс для корневого узла (vad:root)
        5. ExecutorGroup - группа исполнителей процесса
        6. Executor (TypeExecutor) - конкретный исполнитель

        Иерархия объектов строится через vad:hasParentObj:
        - vad:root (TechTree) - корень дерева, не имеет hasParentObj
        - vad:ptree, vad:rtree (ObjectTree) - hasParentObj = vad:root
        - Процессы (TypeProcess) - hasParentObj указывает на родительский процесс или ptree
        - Исполнители (TypeExecutor) - hasParentObj указывает на родительского исполнителя или rtree
        - Схемы (VADProcessDia) - hasParentObj указывает на концепт процесса

        Технологические объекты (Tech) вынесены в отдельный файл:
        vad-basic-ontology_tech_Appendix.ttl
    """ ;
    dcterms:description "Базовая онтология для моделирования верхнеуровневых бизнес-процессов в нотации VAD" ;
    owl:versionInfo "1.2" .

# ==============================================================================
# КЛЮЧЕВЫЕ ПРАВИЛА (KEY RULES)
# ==============================================================================
# Правила использования окна Smart Design и добавления данных
# ==============================================================================

# Правило 1: Добавление триплетов только в TriG
# Добавлять триплеты мы можем только в какой-либо TriG, поэтому в окне
# Smart Design в поле TriG: нужно выбрать конкретный TriG.
# Кнопка «New TriG (VADProcessDia)» позволяет добавлять только TriG типа
# VADProcessDia. Другие типы TriG (vad:ptree, vad:rtree) не добавляются
# через окно Smart Design.

# Правило 2: Свойства процесса разделены на две группы
# a) Свойства концепта (хранятся в vad:ptree):
#    rdf:type, rdfs:label, dcterms:description, vad:hasTrig, vad:hasParentObj
# b) Индивидуальные свойства (хранятся в VADProcessDia):
#    vad:isSubprocessTrig, vad:hasExecutor, vad:processSubtype, vad:hasNext

# Правило 3: Автоматическое создание связанных объектов
# При создании нового индивида процесса (TypeProcess) автоматически создаются:
# - vad:isSubprocessTrig - связь с текущим TriG
# - vad:hasExecutor - ссылка на автоматически создаваемую ExecutorGroup

# Правило 4: Исполнители определяются разово в vad:rtree
# Все свойства исполнителя (rdf:type, rdfs:label, vad:hasParentObj) определяются разово
# в vad:rtree, а не дублируются в каждой схеме процесса.

# Правило 5: Группы исполнителей создаются автоматически
# При создании нового индивида процесса автоматически создается
# ExecutorGroup с уникальным id (vad:ExecutorGroup_{processId}).

# Правило 6: Новый TriG создается на основе концепта процесса
# ID нового TriG формируется автоматически как t_{processId},
# а rdfs:label - на основе label концепта процесса.
# В VADProcessDia указывается vad:hasParentObj на концепт процесса.

# ==============================================================================
# КЛАССЫ (CLASSES)
# ==============================================================================

# ------------------------------------------------------------------------------
# Класс Process - Процесс
# ------------------------------------------------------------------------------
# Ключевая сущность онтологии. Представляет бизнес-процесс любого уровня.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:Process
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "Process" ;
    rdfs:comment """
        Процесс (Process) - ключевая сущность онтологии.

        КОНЦЕПТ ПРОЦЕССА vs ИНДИВИД ПРОЦЕССА:

        Концепт процесса - это определение процесса с метаданными, хранится в vad:ptree:
        - rdf:type vad:TypeProcess
        - rdfs:label (название процесса)
        - dcterms:description (описание процесса)
        - vad:hasParentObj (родительский объект - другой процесс или vad:ptree)
        - vad:hasTrig (ссылка на TriG-схему детализации, при наличии)

        Индивид процесса - это конкретное использование концепта в схеме процесса,
        хранится в соответствующем TriG типа VADProcessDia:
        - vad:isSubprocessTrig (ссылка на содержащий TriG, добавляется первым!)
        - vad:hasExecutor (исполнитель/группа исполнителей процесса)
        - vad:processSubtype (подтип процесса: Basic или Detailed)
        - vad:hasNext (следующий процесс в цепочке)

        Связь с JS-кодом: эти предикаты определены в константах PTREE_PREDICATES
    """ ;
    dcterms:description "Бизнес-процесс в цепочке добавленной стоимости" .

# ------------------------------------------------------------------------------
# Класс TypeProcess - Синоним класса Process
# ------------------------------------------------------------------------------
# TypeProcess используется в JavaScript-коде как псевдоним для vad:Process.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:TypeProcess
    rdf:type rdfs:Class, owl:Class ;
    owl:equivalentClass vad:Process ;
    rdfs:label "TypeProcess" ;
    rdfs:comment """
        TypeProcess - синоним (эквивалентный класс) для vad:Process.

        Используется в JavaScript-коде для унификации типов объектов.
        Включает все подтипы процессов:
        - vad:Basic - базовый процесс
        - vad:Detailed - детализированный процесс
        - vad:DetailedChild - детализированный подпроцесс
        - vad:DetailedExternal - детализированный внешний процесс

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Синоним класса Process для использования в JavaScript-коде" .

# ------------------------------------------------------------------------------
# Класс TriG - Базовый класс для всех типов TriG-графов
# ------------------------------------------------------------------------------
# Базовый класс, объединяющий все типы TriG-графов, используемых в проекте.
# Подклассы: VADProcessDia, ObjectTree
#
# Связь с JS-кодом: используется для определения списка всех типов TriG в проекте
# ------------------------------------------------------------------------------

vad:TriG
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "TriG" ;
    rdfs:comment """
        Базовый класс TriG (TriG) - объединяет все типы TriG-графов в проекте.

        Подклассы:
        - vad:VADProcessDia - схема процесса в нотации VAD
        - vad:ObjectTree - дерево объектов (ptree, rtree)

        Данный класс позволяет:
        - Получить список всех типов TriG, используемых в проекте
        - Определить общие свойства для всех TriG-графов
        - Организовать иерархию классов для лучшей структуризации

        В "Дерево TriG" объекты типа TriG (и его подклассов) выделяются жирным.
    """ ;
    dcterms:description "Базовый класс для всех типов TriG-графов (именованных графов)" .

# ------------------------------------------------------------------------------
# Класс VADProcessDia - Схема процесса (TriG-граф)
# ------------------------------------------------------------------------------
# Формализует схему процесса как именованный граф (TriG).
# Название: dia = diagram (диаграмма/схема)
# ------------------------------------------------------------------------------

vad:VADProcessDia
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:TriG ;
    rdfs:label "VADProcessDia" ;
    rdfs:comment """
        Схема процесса (VADProcessDia) - именованный граф TriG,
        представляющий конкретную схему процесса в нотации VAD.

        Каждая схема процесса содержит:
        - Список процессов, отображаемых на схеме
        - Связи между процессами (vad:hasNext)
        - Привязку исполнителей (vad:hasExecutor)
        - Группы исполнителей и их членов

        При построении схемы процесса используется информация из двух источников:
        1. Текущий TriG (VADProcessDia) - индивидуальные свойства процессов
        2. vad:ptree - общие свойства всех процессов (метаданные)

        Структурные свойства TriG:
        - rdfs:label - название схемы
        - vad:hasParentObj - родительский объект (концепт процесса в ptree)

        ВАЖНО: VADProcessDia должен иметь vad:hasParentObj, указывающий
        на концепт процесса, который эта схема детализирует.
    """ ;
    dcterms:description "Схема процесса, представленная как именованный граф TriG" .

# ------------------------------------------------------------------------------
# Класс TechTree - Технический корневой класс
# ------------------------------------------------------------------------------
# Класс для корневого технического узла vad:root
#
# Связь с JS-кодом: используется для идентификации корня дерева
# ------------------------------------------------------------------------------

vad:TechTree
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "TechTree" ;
    rdfs:comment """
        TechTree - технический класс для корневого узла дерева объектов.

        Единственный экземпляр данного класса - vad:root.
        Корневой узел НЕ имеет свойства vad:hasParentObj (он сам является корнем).

        Все объекты верхнего уровня (ptree, rtree, корневые схемы процессов)
        указывают на vad:root как на родителя через vad:hasParentObj.

        В "Дерево TriG" узел vad:root не отображается - он служит только для
        определения верхнего уровня иерархии.

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Технический класс для корневого узла дерева объектов" .

# ------------------------------------------------------------------------------
# Класс ObjectTree - Общий класс для деревьев объектов
# ------------------------------------------------------------------------------
# Заменяет ProcessTree и ExecutorTree единым общим типом
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:ObjectTree
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:TriG ;
    rdfs:label "ObjectTree" ;
    rdfs:comment """
        Дерево объектов (ObjectTree) - общий класс для деревьев ptree и rtree.

        Заменяет устаревшие классы ProcessTree и ExecutorTree единым типом.
        Экземпляры: vad:ptree (дерево процессов), vad:rtree (дерево исполнителей).

        ObjectTree является TriG-графом, содержащим:
        1. Собственные свойства (rdfs:label, vad:hasParentObj)
        2. Метаданные объектов соответствующего типа

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Общий класс для деревьев объектов (ptree, rtree)" .

# ------------------------------------------------------------------------------
# Класс ProcessTree - Дерево процессов (устаревший, заменён на ObjectTree)
# ------------------------------------------------------------------------------
# Сохранён для обратной совместимости как подкласс ObjectTree
# ------------------------------------------------------------------------------

vad:ProcessTree
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:ObjectTree ;
    rdfs:label "ProcessTree" ;
    owl:deprecated true ;
    rdfs:comment """
        УСТАРЕВШИЙ КЛАСС - заменён на vad:ObjectTree.

        Дерево процессов (ProcessTree) - специальный класс,
        имеющий единственный экземпляр vad:ptree.

        Сохранён для обратной совместимости.
        Рекомендуется использовать vad:ObjectTree.
    """ ;
    dcterms:description "Дерево процессов (устаревший, используйте ObjectTree)" .

# ------------------------------------------------------------------------------
# Класс ExecutorGroup - Группа исполнителей
# ------------------------------------------------------------------------------
# Технический класс для группировки исполнителей процесса.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:ExecutorGroup
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "ExecutorGroup" ;
    rdfs:comment """
        Группа исполнителей (ExecutorGroup) - технический класс,
        предназначенный для группировки исполнителей конкретного процесса.

        Каждая группа исполнителей:
        - Принадлежит конкретному процессу (связь через vad:hasExecutor)
        - Содержит одного или нескольких исполнителей (vad:includes)
        - Имеет название (rdfs:label)

        Примечание: ExecutorGroup является индивидуальным для каждой схемы процесса
        и хранится в соответствующем TriG (VADProcessDia), а не в vad:ptree.
    """ ;
    dcterms:description "Группа исполнителей процесса" .

# ------------------------------------------------------------------------------
# Класс Executor - Исполнитель
# ------------------------------------------------------------------------------
# Представляет конкретного исполнителя (роль, должность, подразделение и т.д.)
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:Executor
    rdf:type rdfs:Class, owl:Class ;
    rdfs:label "Executor" ;
    rdfs:comment """
        Исполнитель (Executor) - конкретный участник процесса.

        Может представлять:
        - Роль (например, "Менеджер проекта")
        - Должность (например, "Главный бухгалтер")
        - Подразделение (например, "Отдел продаж")
        - Внешнего участника (например, "Клиент")

        Свойства (хранятся в vad:rtree):
        - rdf:type vad:TypeExecutor
        - rdfs:label (название исполнителя)
        - vad:hasParentObj (родительский объект - другой исполнитель или vad:rtree)

        Исполнители могут входить в несколько групп исполнителей,
        что позволяет моделировать участие одного исполнителя
        в нескольких процессах.
    """ ;
    dcterms:description "Исполнитель (роль, подразделение или должность)" .

# ------------------------------------------------------------------------------
# Класс TypeExecutor - Синоним класса Executor
# ------------------------------------------------------------------------------
# TypeExecutor используется в JavaScript-коде как псевдоним для vad:Executor.
#
# Связь с JS-кодом: входит в константу VAD_ALLOWED_TYPES
# ------------------------------------------------------------------------------

vad:TypeExecutor
    rdf:type rdfs:Class, owl:Class ;
    owl:equivalentClass vad:Executor ;
    rdfs:label "TypeExecutor" ;
    rdfs:comment """
        TypeExecutor - синоним (эквивалентный класс) для vad:Executor.

        Используется в JavaScript-коде для унификации типов объектов.
        Представляет исполнителей всех видов (роли, должности, подразделения).

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Синоним класса Executor для использования в JavaScript-коде" .

# ------------------------------------------------------------------------------
# Класс ExecutorTree - Дерево исполнителей (устаревший, заменён на ObjectTree)
# ------------------------------------------------------------------------------
# Сохранён для обратной совместимости как подкласс ObjectTree
# ------------------------------------------------------------------------------

vad:ExecutorTree
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:ObjectTree ;
    rdfs:label "ExecutorTree" ;
    owl:deprecated true ;
    rdfs:comment """
        УСТАРЕВШИЙ КЛАСС - заменён на vad:ObjectTree.

        Дерево исполнителей (ExecutorTree) - специальный класс,
        имеющий единственный экземпляр vad:rtree (r=Role).

        Сохранён для обратной совместимости.
        Рекомендуется использовать vad:ObjectTree.
    """ ;
    dcterms:description "Дерево исполнителей (устаревший, используйте ObjectTree)" .

# ==============================================================================
# ПОДТИПЫ ПРОЦЕССОВ (PROCESS SUBTYPES)
# ==============================================================================

# ------------------------------------------------------------------------------
# Basic - Базовый процесс
# ------------------------------------------------------------------------------
# Процесс без детализации (не имеет дочерней схемы)
# ------------------------------------------------------------------------------

vad:Basic
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:Process ;
    rdfs:label "Basic" ;
    rdfs:comment """
        Базовый процесс (Basic) - процесс без детализации.

        Не имеет связанной дочерней схемы процесса (vad:hasTrig).
        Является "листовым" элементом в иерархии процессов.

        Используется через предикат vad:processSubtype:
        vad:SomeProcess vad:processSubtype vad:Basic .
    """ ;
    dcterms:description "Базовый (нетедализируемый) процесс" .

# ------------------------------------------------------------------------------
# Detailed - Детализированный процесс (базовый класс)
# ------------------------------------------------------------------------------
# Процесс с детализацией (имеет дочернюю схему через vad:hasTrig)
# Родительский класс для DetailedChild и DetailedExternal
# ------------------------------------------------------------------------------

vad:Detailed
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:Process ;
    rdfs:label "Detailed" ;
    rdfs:comment """
        Детализированный процесс (Detailed) - процесс с детализацией.

        Имеет связанную дочернюю схему процесса через предикат vad:hasTrig
        в vad:ptree. При двойном клике на такой процесс происходит переход
        к его детализирующей схеме.

        Используется через предикат vad:processSubtype:
        vad:SomeProcess vad:processSubtype vad:Detailed .

        В vad:ptree для такого процесса указывается:
        vad:SomeProcess vad:hasTrig vad:t_SomeProcess .

        Имеет два подтипа:
        - vad:DetailedChild - детализация является подпроцессом текущего процесса
        - vad:DetailedExternal - детализация не является подпроцессом текущего процесса
    """ ;
    dcterms:description "Детализированный процесс (имеет дочернюю схему)" .

# ------------------------------------------------------------------------------
# DetailedChild - Детализированный процесс (подпроцесс)
# ------------------------------------------------------------------------------
# Детализированный процесс, который является подпроцессом текущего процесса
# (связан через vad:hasParentObj с текущим концептом процесса)
# ------------------------------------------------------------------------------

vad:DetailedChild
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:Detailed ;
    rdfs:label "DetailedChild" ;
    rdfs:comment """
        DetailedChild - детализированный процесс, являющийся подпроцессом.

        Признак того, что детализируемый процесс (с синей заливкой и кликабельный)
        является подпроцессом текущего процесса.

        Определяется через vad:hasParentObj в vad:ptree:
        Если vad:hasParentObj концепта процесса указывает на тот же процесс,
        схема которого сейчас отображается - это DetailedChild.

        Визуализация:
        - Синяя заливка (как у Detailed)
        - Кликабельный (переход к дочерней схеме)

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Детализированный процесс-подпроцесс" .

# ------------------------------------------------------------------------------
# DetailedExternal - Детализированный процесс (внешний)
# ------------------------------------------------------------------------------
# Детализированный процесс, который НЕ является подпроцессом текущего процесса
# (не связан через vad:hasParentObj с текущим концептом процесса)
# ------------------------------------------------------------------------------

vad:DetailedExternal
    rdf:type rdfs:Class, owl:Class ;
    rdfs:subClassOf vad:Detailed ;
    rdfs:label "DetailedExternal" ;
    rdfs:comment """
        DetailedExternal - детализированный процесс, не являющийся подпроцессом.

        Признак того, что детализируемый процесс (с синей заливкой и кликабельный)
        НЕ является подпроцессом текущего процесса. Это может быть ссылка
        на внешний процесс или процесс из другой ветви иерархии.

        Определяется через vad:hasParentObj в vad:ptree:
        Если vad:hasParentObj концепта процесса НЕ указывает на процесс,
        схема которого сейчас отображается - это DetailedExternal.

        Визуализация:
        - Синяя заливка (как у Detailed)
        - Кликабельный (переход к внешней схеме)
        - Возможно отличие в визуальном стиле для индикации внешней ссылки

        Связь с JS-кодом: входит в VAD_ALLOWED_TYPES
    """ ;
    dcterms:description "Детализированный внешний процесс" .

# ==============================================================================
# ТЕХНИЧЕСКИЕ ЭКЗЕМПЛЯРЫ (TECHNICAL INSTANCES)
# ==============================================================================

# ------------------------------------------------------------------------------
# vad:root - Корневой узел дерева объектов
# ------------------------------------------------------------------------------
# Технический корень дерева, не отображается в UI
# ------------------------------------------------------------------------------

vad:root
    rdf:type vad:TechTree ;
    rdfs:label "Корень Дерева" ;
    rdfs:comment """
        Корневой технический узел (root) - образует корень дерева всех объектов
        при формировании иерархии в Окне «Дерево TriG».

        Узел root в дереве не отображается - он служит только для
        определения верхнего уровня иерархии.

        vad:root НЕ имеет свойства vad:hasParentObj (он сам является корнем).

        Использование:
        vad:ptree vad:hasParentObj vad:root .
        vad:rtree vad:hasParentObj vad:root .
    """ ;
    dcterms:description "Технический корневой узел дерева объектов" .

# ------------------------------------------------------------------------------
# vad:ptree - Дерево процессов
# ------------------------------------------------------------------------------
# Центральное хранилище метаданных всех процессов
# ------------------------------------------------------------------------------

vad:ptree
    rdf:type vad:ObjectTree ;
    rdfs:label "Дерево Процессов (TriG)" ;
    rdfs:comment """
        Дерево процессов (ptree) - экземпляр класса ObjectTree.

        Является именованным графом (TriG), содержащим:
        1. Собственные свойства (rdfs:label, vad:hasParentObj)
        2. Концепты всех процессов (rdf:type, rdfs:label, dcterms:description, vad:hasParentObj, vad:hasTrig)

        Связь с JS-кодом: используется для определения целевого графа
        при добавлении триплетов (функция determineTargetGraph)
    """ ;
    dcterms:description "Дерево процессов, хранящее концепты всех процессов" .

# ------------------------------------------------------------------------------
# vad:rtree - Дерево исполнителей
# ------------------------------------------------------------------------------
# Центральное хранилище метаданных всех исполнителей (r=Role)
# ------------------------------------------------------------------------------

vad:rtree
    rdf:type vad:ObjectTree ;
    rdfs:label "Дерево Исполнителей (TriG)" ;
    rdfs:comment """
        Дерево исполнителей (rtree) - экземпляр класса ObjectTree.

        Является именованным графом (TriG), содержащим:
        1. Собственные свойства (rdfs:label, vad:hasParentObj)
        2. Метаданные всех исполнителей (rdf:type, rdfs:label, vad:hasParentObj)

        При отрисовке схемы процесса используется информация как из vad:ptree
        (для процессов), так и из vad:rtree (для исполнителей).

        Связь с JS-кодом: используется для определения целевого графа
        при добавлении триплетов (функция determineTargetGraph)
    """ ;
    dcterms:description "Дерево исполнителей, хранящее метаданные всех исполнителей" .

# ==============================================================================
# СВОЙСТВА (PROPERTIES)
# ==============================================================================

# ==============================================================================
# ГРУППА СВОЙСТВ «ОБЩАЯ ДЛЯ ВСЕХ СХЕМ ПРОЦЕССОВ» (PTREE_PREDICATES)
# ==============================================================================
# Эти предикаты хранятся в vad:ptree для объектов типа vad:Process
# Связь с JS-кодом: константа PTREE_PREDICATES
# ==============================================================================

# ------------------------------------------------------------------------------
# vad:hasParentObj - Родительский объект (НОВЫЙ КЛЮЧЕВОЙ ПРЕДИКАТ)
# ------------------------------------------------------------------------------
# Определяет иерархию всех объектов в дереве
# ------------------------------------------------------------------------------

vad:hasParentObj
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasParentObj" ;
    rdfs:comment """
        Предикат hasParentObj определяет родительский объект в иерархии.

        КЛЮЧЕВОЙ ПРЕДИКАТ для построения "Дерево TriG":
        Все объекты (кроме vad:root) должны иметь vad:hasParentObj.

        Использование:
        1. vad:ptree, vad:rtree -> vad:hasParentObj vad:root
        2. Концепты процессов в ptree -> vad:hasParentObj указывает на родительский процесс или vad:ptree
        3. Исполнители в rtree -> vad:hasParentObj указывает на родительского исполнителя или vad:rtree
        4. VADProcessDia -> vad:hasParentObj указывает на концепт процесса

        Пример иерархии процессов:
        vad:p1 vad:hasParentObj vad:ptree .     # Процесс p1 на верхнем уровне
        vad:p1.1 vad:hasParentObj vad:p1 .     # Процесс p1.1 - подпроцесс p1
        vad:t_p1 vad:hasParentObj vad:p1 .     # Схема t_p1 детализирует процесс p1

        В "Дерево TriG" отображаются все узлы с hasParentObj.
        Объекты типа TriG (VADProcessDia, ObjectTree) выделяются жирным.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES и PTREE_PREDICATES
    """ ;
    dcterms:description "Определяет родительский объект в иерархии для построения дерева" .

# ------------------------------------------------------------------------------
# vad:hasTrig - Ссылка на детализирующую схему
# ------------------------------------------------------------------------------
# Входит в PTREE_PREDICATES
# ------------------------------------------------------------------------------

vad:hasTrig
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasTrig" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:VADProcessDia ;
    rdfs:comment """
        Предикат hasTrig связывает концепт процесса с его детализирующей схемой (TriG).

        Используется для процессов с подтипом vad:Detailed.
        Хранится в vad:ptree (входит в группу PTREE_PREDICATES).

        Пример:
        vad:p1 vad:hasTrig vad:t_p1 .

        Здесь концепт процесса p1 детализирован в схеме t_p1.
        При этом vad:t_p1 vad:hasParentObj vad:p1 (обратная связь).

        Связь с JS-кодом: входит в константу PTREE_PREDICATES
    """ ;
    dcterms:description "Связывает концепт процесса с его детализирующей схемой TriG" .

# ------------------------------------------------------------------------------
# vad:definesProcess - УСТАРЕВШИЙ ПРЕДИКАТ
# ------------------------------------------------------------------------------
# Заменён на vad:hasParentObj
# ------------------------------------------------------------------------------

vad:definesProcess
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "definesProcess" ;
    owl:deprecated true ;
    rdfs:comment """
        УСТАРЕВШИЙ ПРЕДИКАТ - заменён на vad:hasParentObj.

        Ранее использовался для явной связи схемы процесса (TriG)
        с конкретным процессом, который она описывает.

        Теперь эта связь выражается через:
        vad:t_p1 vad:hasParentObj vad:p1 .

        Сохранён для обратной совместимости.
    """ ;
    dcterms:description "Устаревший предикат, заменён на hasParentObj" .

# ==============================================================================
# ГРУППА СВОЙСТВ «ИНДИВИДУАЛЬНАЯ ДЛЯ КОНКРЕТНОЙ СХЕМЫ ПРОЦЕССА»
# ==============================================================================
# Эти предикаты хранятся в соответствующем TriG (VADProcessDia)
# ==============================================================================

# ------------------------------------------------------------------------------
# vad:hasNext - Следующий процесс
# ------------------------------------------------------------------------------
# Определяет последовательность процессов в цепочке VAD
# ------------------------------------------------------------------------------

vad:hasNext
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasNext" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:Process ;
    rdfs:comment """
        Предикат hasNext определяет следующий процесс в цепочке VAD.

        Используется для построения последовательной цепочки процессов
        на схеме. Процесс может иметь несколько следующих процессов
        (ветвление цепочки).

        Пример:
        vad:Process1 vad:hasNext vad:Process2 .
        vad:Process2 vad:hasNext vad:Process3, vad:Process4 .  # ветвление

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Определяет следующий процесс в цепочке добавленной стоимости" .

# ------------------------------------------------------------------------------
# vad:isSubprocessTrig - Явная связь процесса со схемой процесса
# ------------------------------------------------------------------------------
# Указывает, что процесс является подпроцессом в данном TriG
# Добавляется первым при создании нового процесса в составе TriG
# ------------------------------------------------------------------------------

vad:isSubprocessTrig
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "isSubprocessTrig" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:VADProcessDia ;
    rdfs:comment """
        Предикат isSubprocessTrig явно указывает вхождение индивида процесса
        в схему процесса (TriG).

        Этот предикат ПЕРВЫМ добавляется при создании нового процесса
        в составе TriG (схемы процесса). Он явно указывает, что данный
        процесс является подпроцессом в данной схеме.

        Пример:
        vad:Process2 vad:isSubprocessTrig vad:t_pGA ;
            vad:hasExecutor vad:ExecutorGroup_Process2 ;
            vad:processSubtype vad:Basic .

        Порядок предикатов:
        1. vad:isSubprocessTrig - связь с TriG (первым!)
        2. vad:hasExecutor - группа исполнителей
        3. vad:processSubtype - подтип процесса
        4. vad:hasNext - следующий процесс (опционально)

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Явно указывает вхождение индивида процесса в схему процесса (TriG)" .

# ------------------------------------------------------------------------------
# vad:hasExecutor - Исполнитель процесса
# ------------------------------------------------------------------------------
# Связывает процесс с группой исполнителей
# ------------------------------------------------------------------------------

vad:hasExecutor
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasExecutor" ;
    rdfs:domain vad:Process ;
    rdfs:range vad:ExecutorGroup ;
    rdfs:comment """
        Предикат hasExecutor связывает процесс с группой исполнителей.

        Каждый процесс на схеме имеет одну группу исполнителей,
        которая содержит одного или нескольких конкретных исполнителей.

        Пример:
        vad:Process1 vad:hasExecutor vad:ExecutorGroup1 .

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Связывает процесс с группой исполнителей" .

# ------------------------------------------------------------------------------
# vad:processSubtype - Подтип процесса
# ------------------------------------------------------------------------------
# Указывает подтип процесса (Basic или Detailed)
# ------------------------------------------------------------------------------

vad:processSubtype
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "processSubtype" ;
    rdfs:domain vad:Process ;
    rdfs:range [ owl:oneOf ( vad:Basic vad:Detailed vad:DetailedChild vad:DetailedExternal ) ] ;
    rdfs:comment """
        Предикат processSubtype указывает подтип процесса.

        Возможные значения:
        - vad:Basic - базовый процесс (без детализации)
        - vad:Detailed - детализированный процесс (имеет дочернюю схему)
        - vad:DetailedChild - детализированный процесс-подпроцесс
        - vad:DetailedExternal - детализированный внешний процесс

        Пример:
        vad:Process1 vad:processSubtype vad:DetailedChild .
        vad:Process2 vad:processSubtype vad:Basic .
        vad:Process3 vad:processSubtype vad:DetailedExternal .

        Свойство хранится в TriG схемы процесса (VADProcessDia),
        НЕ в vad:ptree.

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Указывает подтип процесса (Basic, Detailed, DetailedChild или DetailedExternal)" .

# ------------------------------------------------------------------------------
# vad:hasParentTrig - УСТАРЕВШИЙ ПРЕДИКАТ
# ------------------------------------------------------------------------------
# Заменён на vad:hasParentObj
# ------------------------------------------------------------------------------

vad:hasParentTrig
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "hasParentTrig" ;
    owl:deprecated true ;
    rdfs:comment """
        УСТАРЕВШИЙ ПРЕДИКАТ - заменён на vad:hasParentObj.

        Ранее использовался для определения родительского TriG графа.

        Теперь иерархия всех объектов (включая TriG) строится через
        vad:hasParentObj, который работает для всех типов объектов.

        Сохранён для обратной совместимости.
    """ ;
    dcterms:description "Устаревший предикат, заменён на hasParentObj" .

# ------------------------------------------------------------------------------
# vad:includes - Включает исполнителя
# ------------------------------------------------------------------------------
# Связывает группу исполнителей с конкретными исполнителями
# ------------------------------------------------------------------------------

vad:includes
    rdf:type rdf:Property, owl:ObjectProperty ;
    rdfs:label "includes" ;
    rdfs:domain vad:ExecutorGroup ;
    rdfs:range vad:Executor ;
    rdfs:comment """
        Предикат includes связывает группу исполнителей с конкретными исполнителями.

        Одна группа может включать нескольких исполнителей,
        один исполнитель может входить в несколько групп.

        Пример:
        vad:ExecutorGroup1 vad:includes vad:Executor1 .
        vad:ExecutorGroup2 vad:includes vad:Executor1, vad:Executor2 .

        Связь с JS-кодом: входит в VAD_ALLOWED_PREDICATES
    """ ;
    dcterms:description "Связывает группу исполнителей с конкретными исполнителями" .

# ==============================================================================
# ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ (USAGE EXAMPLES) - Новая концепция
# ==============================================================================
# Примеры на основе Trig_VADv5
# ==============================================================================

# Пример корня:
#
# vad:root {
#     vad:root rdf:type vad:TechTree ;
#         rdfs:label "Корень Дерева" .
# }

# Пример дерева процессов:
#
# vad:ptree {
#     vad:ptree rdf:type vad:ObjectTree ;
#         rdfs:label "Дерево Процессов (TriG)" ;
#         vad:hasParentObj vad:root .
#
#     vad:p1 rdf:type vad:TypeProcess ;
#         rdfs:label "p1 Процесс 1" ;
#         dcterms:description "p1 Процесс 1" ;
#         vad:hasParentObj vad:ptree ;
#         vad:hasTrig vad:t_p1 .
#
#     vad:p1.1 rdf:type vad:TypeProcess ;
#         rdfs:label "p1.1 Процесс 1.1" ;
#         dcterms:description "Первый процесс в цепочке" ;
#         vad:hasParentObj vad:p1 ;
#         vad:hasTrig vad:t_p1.1 .
# }

# Пример схемы процесса с vad:hasParentObj:
#
# vad:t_p1 {
#     vad:t_p1 rdf:type vad:VADProcessDia ;
#         rdfs:label "Схема t_p1 процесса p1" ;
#         vad:hasParentObj vad:p1 .
#
#     vad:p1.1 vad:isSubprocessTrig vad:t_p1 ;
#         vad:hasExecutor vad:ExecutorGroup_p1.1 ;
#         vad:hasNext vad:p1.2 .
# }

# ==============================================================================
# ПРИЛОЖЕНИЕ 1: СВОДНАЯ ТАБЛИЦА «ОБЪЕКТ-ПРЕДИКАТ» (обновлённая)
# ==============================================================================
#
# | Тип объекта (Subject Type)    | Допустимые предикаты                                        | Граф хранения     |
# |-------------------------------|-------------------------------------------------------------|-------------------|
# | vad:TechTree                  | rdf:type, rdfs:label                                        | vad:root          |
# | vad:ObjectTree                | rdf:type, rdfs:label, vad:hasParentObj                      | ptree/rtree       |
# | vad:VADProcessDia             | rdf:type, rdfs:label, vad:hasParentObj                      | VADProcessDia     |
# | vad:TypeProcess (в ptree)     | rdf:type, rdfs:label, dcterms:description,                  | vad:ptree         |
# |                               | vad:hasParentObj, vad:hasTrig                               |                   |
# | vad:TypeProcess (в VAD)       | vad:isSubprocessTrig, vad:hasExecutor, vad:processSubtype,  | VADProcessDia     |
# |                               | vad:hasNext                                                 |                   |
# | vad:TypeExecutor (в rtree)    | rdf:type, rdfs:label, vad:hasParentObj                      | vad:rtree         |
# | vad:ExecutorGroup             | rdf:type, rdfs:label, vad:includes                          | VADProcessDia     |
#
# ==============================================================================

# ==============================================================================
# ПРИЛОЖЕНИЕ 2: СПИСКИ ОБЩИХ СВОЙСТВ (обновлённые)
# ==============================================================================
#
# --- Группа «Общие свойства концептов процессов» (PTREE_PREDICATES) ---
# Хранятся в vad:ptree для всех объектов типа vad:TypeProcess:
#   1. rdf:type           - тип объекта (vad:TypeProcess)
#   2. rdfs:label         - название процесса
#   3. dcterms:description - описание процесса
#   4. vad:hasParentObj   - родительский объект (процесс или ptree)
#   5. vad:hasTrig        - ссылка на детализирующую схему (при наличии)
#
# --- Группа «Индивидуальные свойства процесса для конкретной схемы» ---
# Хранятся в соответствующем VADProcessDia:
#   1. vad:isSubprocessTrig - связь с TriG (добавляется первым!)
#   2. vad:hasExecutor      - группа исполнителей
#   3. vad:processSubtype   - подтип процесса
#   4. vad:hasNext          - следующий процесс
#
# --- Группа «Общие свойства исполнителя» (RTREE_PREDICATES) ---
# Хранятся в vad:rtree для всех объектов типа vad:TypeExecutor:
#   1. rdf:type         - тип объекта (vad:TypeExecutor)
#   2. rdfs:label       - название исполнителя
#   3. vad:hasParentObj - родительский объект (исполнитель или rtree)
#
# --- Группа «Свойства схемы процесса» ---
# Хранятся в соответствующем TriG (VADProcessDia):
#   1. rdf:type         - тип объекта (vad:VADProcessDia)
#   2. rdfs:label       - название схемы
#   3. vad:hasParentObj - родительский объект (концепт процесса)
#
# ==============================================================================

# ==============================================================================
# КОНЕЦ ОНТОЛОГИИ
# ==============================================================================
